Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;var e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var t=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function ee(){}var C={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function ne(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function re(e,t){return ne(e.type,t,e.props)}function ie(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ae(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var oe=/\/+/g;function se(e,t){return typeof e==`object`&&e&&e.key!=null?ae(``+e.key):t.toString(36)}function ce(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(ee,ee):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function le(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,le(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+se(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(oe,`$&/`)+`/`),le(o,r,i,``,function(e){return e})):o!=null&&(ie(o)&&(o=re(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(oe,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+se(a,u),c+=le(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+se(a,u++),c+=le(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return le(ce(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ue(e,t,n){if(e==null)return e;var r=[],i=0;return le(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function de(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var w=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},T={map:ue,forEach:function(e,t,n){ue(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ue(e,function(){t++}),t},toArray:function(e){return ue(e,function(e){return e})||[]},only:function(e){if(!ie(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=T,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!te.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return ne(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)te.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return ne(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ie,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:de}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),i=C.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(ee,w)}catch(e){w(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),C.T=t}},e.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},e.use=function(e){return C.H.use(e)},e.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},e.useCallback=function(e,t){return C.H.useCallback(e,t)},e.useContext=function(e){return C.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return C.H.useEffect(e,t)},e.useEffectEvent=function(e){return C.H.useEffectEvent(e)},e.useId=function(){return C.H.useId()},e.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return C.H.useMemo(e,t)},e.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},e.useRef=function(e){return C.H.useRef(e)},e.useState=function(e){return C.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return C.H.useTransition()},e.version=`19.2.3`})),n=e(((e,n)=>{n.exports=t()})),r=e((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,ie());else{var t=n(l);t!==null&&se(x,t.startTime-e)}}var S=!1,ee=-1,C=5,te=-1;function ne(){return g?!0:!(e.unstable_now()-te<C)}function re(){if(g=!1,S){var t=e.unstable_now();te=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(ee),ee=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&ne());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&se(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ie():S=!1}}}var ie;if(typeof y==`function`)ie=function(){y(re)};else if(typeof MessageChannel<`u`){var ae=new MessageChannel,oe=ae.port2;ae.port1.onmessage=re,ie=function(){oe.postMessage(null)}}else ie=function(){_(re,0)};function se(t,n){ee=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(ee),ee=-1):h=!0,se(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,ie()))),r},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),i=e(((e,t)=>{t.exports=r()})),a=e((e=>{var t=n();function r(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for(`react.portal`);function s(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,e.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(r(299));return s(e,t,null,n)},e.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,a.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&a.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin),i=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?a.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):n===`script`&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??a.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else a.d.m(e)},e.requestFormReset=function(e){a.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},e.useFormStatus=function(){return c.H.useHostTransitionStatus()},e.version=`19.2.3`})),o=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=a()})),s=e((e=>{var t=i(),r=n(),a=o();function s(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(l(e)!==e)throw Error(s(188))}function p(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t===e?e:null}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return f(i),e;if(a===r)return f(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),ee=Symbol.for(`react.context`),C=Symbol.for(`react.forward_ref`),te=Symbol.for(`react.suspense`),ne=Symbol.for(`react.suspense_list`),re=Symbol.for(`react.memo`),ie=Symbol.for(`react.lazy`),ae=Symbol.for(`react.activity`),oe=Symbol.for(`react.memo_cache_sentinel`),se=Symbol.iterator;function ce(e){return typeof e!=`object`||!e?null:(e=se&&e[se]||e[`@@iterator`],typeof e==`function`?e:null)}var le=Symbol.for(`react.client.reference`);function ue(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case te:return`Suspense`;case ne:return`SuspenseList`;case ae:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case ee:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case C:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case re:return t=e.displayName||null,t===null?ue(e.type)||`Memo`:t;case ie:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}var de=Array.isArray,w=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},pe=[],me=-1;function he(e){return{current:e}}function ge(e){0>me||(e.current=pe[me],pe[me]=null,me--)}function _e(e,t){me++,pe[me]=e.current,e.current=t}var ve=he(null),ye=he(null),be=he(null),xe=he(null);function Se(e,t){switch(_e(be,t),_e(ye,e),_e(ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wd(t),e=Gd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ge(ve),_e(ve,e)}function Ce(){ge(ve),ge(ye),ge(be)}function we(e){e.memoizedState!==null&&_e(xe,e);var t=ve.current,n=Gd(t,e.type);t!==n&&(_e(ye,e),_e(ve,n))}function Te(e){ye.current===e&&(ge(ve),ge(ye)),xe.current===e&&(ge(xe),ep._currentValue=fe)}var Ee,De;function Oe(e){if(Ee===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ee=t&&t[1]||``,De=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Ee+e+De}var ke=!1;function Ae(e,t){if(!e||ke)return``;ke=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ke=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Oe(n):``}function je(e,t){switch(e.tag){case 26:case 27:case 5:return Oe(e.type);case 16:return Oe(`Lazy`);case 13:return e.child!==t&&t!==null?Oe(`Suspense Fallback`):Oe(`Suspense`);case 19:return Oe(`SuspenseList`);case 0:case 15:return Ae(e.type,!1);case 11:return Ae(e.type.render,!1);case 1:return Ae(e.type,!0);case 31:return Oe(`Activity`);default:return``}}function Me(e){try{var t=``,n=null;do t+=je(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ne=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,Ie=t.unstable_shouldYield,Le=t.unstable_requestPaint,Re=t.unstable_now,ze=t.unstable_getCurrentPriorityLevel,Be=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,He=t.unstable_NormalPriority,E=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,We=t.log,Ge=t.unstable_setDisableYieldValue,Ke=null,qe=null;function Je(e){if(typeof We==`function`&&Ge(e),qe&&typeof qe.setStrictMode==`function`)try{qe.setStrictMode(Ke,e)}catch{}}var Ye=Math.clz32?Math.clz32:Qe,Xe=Math.log,Ze=Math.LN2;function Qe(e){return e>>>=0,e===0?32:31-(Xe(e)/Ze|0)|0}var $e=256,et=262144,tt=4194304;function nt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=nt(n))):i=nt(o):i=nt(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=nt(n))):i=nt(o)):i=nt(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function it(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function at(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var e=tt;return tt<<=1,!(tt&62914560)&&(tt=4194304),e}function st(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lt(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ye(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ut(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ut(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ye(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function dt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ft(e,t){var n=t&-t;return n=n&42?1:pt(n),(n&(e.suspendedLanes|t))===0?n:0}function pt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ht(){var e=T.p;return e===0?(e=window.event,e===void 0?32:gp(e.type)):e}function gt(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}var _t=Math.random().toString(36).slice(2),vt=`__reactFiber$`+_t,yt=`__reactProps$`+_t,bt=`__reactContainer$`+_t,xt=`__reactEvents$`+_t,St=`__reactListeners$`+_t,Ct=`__reactHandles$`+_t,wt=`__reactResources$`+_t,Tt=`__reactMarker$`+_t;function Et(e){delete e[vt],delete e[yt],delete e[xt],delete e[St],delete e[Ct]}function Dt(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=pf(e);e!==null;){if(n=e[vt])return n;e=pf(e)}return t}e=n,n=e.parentNode}return null}function Ot(e){if(e=e[vt]||e[bt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function kt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function At(e){var t=e[wt];return t||=e[wt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function jt(e){e[Tt]=!0}var Mt=new Set,Nt={};function Pt(e,t){Ft(e,t),Ft(e+`Capture`,t)}function Ft(e,t){for(Nt[e]=t,e=0;e<t.length;e++)Mt.add(t[e])}var It=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Lt={},Rt={};function zt(e){return Ne.call(Rt,e)?!0:Ne.call(Lt,e)?!1:It.test(e)?Rt[e]=!0:(Lt[e]=!0,!1)}function Bt(e,t,n){if(zt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Vt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Ht(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function D(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ut(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Wt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gt(e){if(!e._valueTracker){var t=Ut(e)?`checked`:`value`;e._valueTracker=Wt(e,t,``+e[t])}}function Kt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ut(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function qt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Jt=/[\n"\\]/g;function Yt(e){return e.replace(Jt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Xt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+D(t)):e.value!==``+D(t)&&(e.value=``+D(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Qt(e,o,D(n)):Qt(e,o,D(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+D(s):e.removeAttribute(`name`)}function Zt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Gt(e);return}n=n==null?``:``+D(n),t=t==null?n:``+D(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Gt(e)}function Qt(e,t,n){t===`number`&&qt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function $t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+D(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function en(e,t,n){if(t!=null&&(t=``+D(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+D(n)}function tn(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(s(92));if(de(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}n??=``,t=n}n=D(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Gt(e)}function nn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function an(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||rn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function on(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(s(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&an(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&an(e,a,t[a])}function sn(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var cn=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),ln=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function un(e){return ln.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function dn(){}var fn=null;function pn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mn=null,hn=null;function gn(e){var t=Ot(e);if(t&&(e=t.stateNode)){var n=e[yt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Xt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Yt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[yt]||null;if(!i)throw Error(s(90));Xt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Kt(r)}break a;case`textarea`:en(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&$t(e,!!n.multiple,t,!1)}}}var _n=!1;function vn(e,t,n){if(_n)return e(t,n);_n=!0;try{return e(t)}finally{if(_n=!1,(mn!==null||hn!==null)&&(xu(),mn&&(t=mn,e=hn,hn=mn=null,gn(t),e)))for(t=0;t<e.length;t++)gn(e[t])}}function yn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[yt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(s(231,t,typeof n));return n}var bn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),xn=!1;if(bn)try{var Sn={};Object.defineProperty(Sn,`passive`,{get:function(){xn=!0}}),window.addEventListener(`test`,Sn,Sn),window.removeEventListener(`test`,Sn,Sn)}catch{xn=!1}var Cn=null,wn=null,Tn=null;function En(){if(Tn)return Tn;var e,t=wn,n=t.length,r,i=`value`in Cn?Cn.value:Cn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Tn=i.slice(e,1<r?1-r:void 0)}function Dn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function On(){return!0}function kn(){return!1}function An(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?On:kn,this.isPropagationStopped=kn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),t}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=An(jn),Nn=h({},jn,{view:0,detail:0}),Pn=An(Nn),Fn,In,Ln,Rn=h({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Ln&&(Ln&&e.type===`mousemove`?(Fn=e.screenX-Ln.screenX,In=e.screenY-Ln.screenY):In=Fn=0,Ln=e),Fn)},movementY:function(e){return`movementY`in e?e.movementY:In}}),zn=An(Rn),Bn=An(h({},Rn,{dataTransfer:0})),Vn=An(h({},Nn,{relatedTarget:0})),Hn=An(h({},jn,{animationName:0,elapsedTime:0,pseudoElement:0})),Un=An(h({},jn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Wn=An(h({},jn,{data:0})),Gn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},O={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Kn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function qn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kn[e])?!!t[e]:!1}function Jn(){return qn}var k=An(h({},Nn,{key:function(e){if(e.key){var t=Gn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=Dn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?O[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(e){return e.type===`keypress`?Dn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?Dn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Yn=An(h({},Rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),A=An(h({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn})),j=An(h({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0})),M=An(h({},Rn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),N=An(h({},jn,{newState:0,oldState:0})),Xn=[9,13,27,32],Zn=bn&&`CompositionEvent`in window,Qn=null;bn&&`documentMode`in document&&(Qn=document.documentMode);var $n=bn&&`TextEvent`in window&&!Qn,er=bn&&(!Zn||Qn&&8<Qn&&11>=Qn),tr=` `,nr=!1;function rr(e,t){switch(e){case`keyup`:return Xn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function ir(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var ar=!1;function or(e,t){switch(e){case`compositionend`:return ir(t);case`keypress`:return t.which===32?(nr=!0,tr):null;case`textInput`:return e=t.data,e===tr&&nr?null:e;default:return null}}function P(e,t){if(ar)return e===`compositionend`||!Zn&&rr(e,t)?(e=En(),Tn=wn=Cn=null,ar=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return er&&t.locale!==`ko`?null:t.data;default:return null}}var sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!sr[e.type]:t===`textarea`}function lr(e,t,n,r){mn?hn?hn.push(r):hn=[r]:mn=r,t=Od(t,`onChange`),0<t.length&&(n=new Mn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var ur=null,dr=null;function fr(e){xd(e,0)}function pr(e){if(Kt(kt(e)))return e}function mr(e,t){if(e===`change`)return t}var hr=!1;if(bn){var gr;if(bn){var F=`oninput`in document;if(!F){var _r=document.createElement(`div`);_r.setAttribute(`oninput`,`return;`),F=typeof _r.oninput==`function`}gr=F}else gr=!1;hr=gr&&(!document.documentMode||9<document.documentMode)}function vr(){ur&&(ur.detachEvent(`onpropertychange`,yr),dr=ur=null)}function yr(e){if(e.propertyName===`value`&&pr(dr)){var t=[];lr(t,dr,e,pn(e)),vn(fr,t)}}function br(e,t,n){e===`focusin`?(vr(),ur=t,dr=n,ur.attachEvent(`onpropertychange`,yr)):e===`focusout`&&vr()}function xr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return pr(dr)}function Sr(e,t){if(e===`click`)return pr(t)}function Cr(e,t){if(e===`input`||e===`change`)return pr(t)}function wr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Tr=typeof Object.is==`function`?Object.is:wr;function Er(e,t){if(Tr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ne.call(t,i)||!Tr(e[i],t[i]))return!1}return!0}function Dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Or(e,t){var n=Dr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Dr(n)}}function I(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?I(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=qt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=qt(e.document)}return t}function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var jr=bn&&`documentMode`in document&&11>=document.documentMode,Mr=null,Nr=null,Pr=null,Fr=!1;function Ir(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fr||Mr==null||Mr!==qt(r)||(r=Mr,`selectionStart`in r&&Ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&Er(Pr,r)||(Pr=r,r=Od(Nr,`onSelect`),0<r.length&&(t=new Mn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Mr)))}function Lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var L={animationend:Lr(`Animation`,`AnimationEnd`),animationiteration:Lr(`Animation`,`AnimationIteration`),animationstart:Lr(`Animation`,`AnimationStart`),transitionrun:Lr(`Transition`,`TransitionRun`),transitionstart:Lr(`Transition`,`TransitionStart`),transitioncancel:Lr(`Transition`,`TransitionCancel`),transitionend:Lr(`Transition`,`TransitionEnd`)},Rr={},zr={};bn&&(zr=document.createElement(`div`).style,`AnimationEvent`in window||(delete L.animationend.animation,delete L.animationiteration.animation,delete L.animationstart.animation),`TransitionEvent`in window||delete L.transitionend.transition);function Br(e){if(Rr[e])return Rr[e];if(!L[e])return e;var t=L[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zr)return Rr[e]=t[n];return e}var Vr=Br(`animationend`),Hr=Br(`animationiteration`),Ur=Br(`animationstart`),Wr=Br(`transitionrun`),Gr=Br(`transitionstart`),Kr=Br(`transitioncancel`),qr=Br(`transitionend`),Jr=new Map,Yr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Yr.push(`scrollEnd`);function Xr(e,t){Jr.set(e,t),Pt(t,[e])}var Zr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},R=[],Qr=0,$r=0;function ei(){for(var e=Qr,t=$r=Qr=0;t<e;){var n=R[t];R[t++]=null;var r=R[t];R[t++]=null;var i=R[t];R[t++]=null;var a=R[t];if(R[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ii(n,i,a)}}function ti(e,t,n,r){R[Qr++]=e,R[Qr++]=t,R[Qr++]=n,R[Qr++]=r,$r|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ni(e,t,n,r){return ti(e,t,n,r),ai(e)}function ri(e,t){return ti(e,null,null,t),ai(e)}function ii(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ye(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ai(e){if(50<fu)throw fu=0,pu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var oi={};function si(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(e,t,n,r){return new si(e,t,n,r)}function li(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ui(e,t){var n=e.alternate;return n===null?(n=ci(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function di(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fi(e,t,n,r,i,a){var o=0;if(r=e,typeof e==`function`)li(e)&&(o=1);else if(typeof e==`string`)o=Gf(e,n,ve.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ae:return e=ci(31,n,t,i),e.elementType=ae,e.lanes=a,e;case y:return pi(n.children,i,a,t);case b:o=8,i|=24;break;case x:return e=ci(12,n,t,i|2),e.elementType=x,e.lanes=a,e;case te:return e=ci(13,n,t,i),e.elementType=te,e.lanes=a,e;case ne:return e=ci(19,n,t,i),e.elementType=ne,e.lanes=a,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case ee:o=10;break a;case S:o=9;break a;case C:o=11;break a;case re:o=14;break a;case ie:o=16,r=null;break a}o=29,n=Error(s(130,e===null?`null`:typeof e,``)),r=null}return t=ci(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function pi(e,t,n,r){return e=ci(7,e,r,t),e.lanes=n,e}function mi(e,t,n){return e=ci(6,e,null,t),e.lanes=n,e}function hi(e){var t=ci(18,null,null,0);return t.stateNode=e,t}function gi(e,t,n){return t=ci(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var _i=new WeakMap;function vi(e,t){if(typeof e==`object`&&e){var n=_i.get(e);return n===void 0?(t={value:e,source:t,stack:Me(t)},_i.set(e,t),t):n}return{value:e,source:t,stack:Me(t)}}var yi=[],bi=0,xi=null,Si=0,Ci=[],wi=0,Ti=null,Ei=1,Di=``;function Oi(e,t){yi[bi++]=Si,yi[bi++]=xi,xi=e,Si=t}function ki(e,t,n){Ci[wi++]=Ei,Ci[wi++]=Di,Ci[wi++]=Ti,Ti=e;var r=Ei;e=Di;var i=32-Ye(r)-1;r&=~(1<<i),n+=1;var a=32-Ye(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ei=1<<32-Ye(t)+i|n<<i|r,Di=a+e}else Ei=1<<a|n<<i|r,Di=e}function Ai(e){e.return!==null&&(Oi(e,1),ki(e,1,0))}function ji(e){for(;e===xi;)xi=yi[--bi],yi[bi]=null,Si=yi[--bi],yi[bi]=null;for(;e===Ti;)Ti=Ci[--wi],Ci[wi]=null,Di=Ci[--wi],Ci[wi]=null,Ei=Ci[--wi],Ci[wi]=null}function Mi(e,t){Ci[wi++]=Ei,Ci[wi++]=Di,Ci[wi++]=Ti,Ei=t.id,Di=t.overflow,Ti=e}var Ni=null,Pi=null,z=!1,Fi=null,Ii=!1,Li=Error(s(519));function Ri(e){throw Wi(vi(Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Li}function zi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[vt]=e,t[yt]=r,n){case`dialog`:X(`cancel`,t),X(`close`,t);break;case`iframe`:case`object`:case`embed`:X(`load`,t);break;case`video`:case`audio`:for(n=0;n<yd.length;n++)X(yd[n],t);break;case`source`:X(`error`,t);break;case`img`:case`image`:case`link`:X(`error`,t),X(`load`,t);break;case`details`:X(`toggle`,t);break;case`input`:X(`invalid`,t),Zt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:X(`invalid`,t);break;case`textarea`:X(`invalid`,t),tn(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Pd(t.textContent,n)?(r.popover!=null&&(X(`beforetoggle`,t),X(`toggle`,t)),r.onScroll!=null&&X(`scroll`,t),r.onScrollEnd!=null&&X(`scrollend`,t),r.onClick!=null&&(t.onclick=dn),t=!0):t=!1,t||Ri(e,!0)}function Bi(e){for(Ni=e.return;Ni;)switch(Ni.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:Ni=Ni.return}}function Vi(e){if(e!==Ni)return!1;if(!z)return Bi(e),z=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Kd(e.type,e.memoizedProps)),n=!n),n&&Pi&&Ri(e),Bi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Pi=ff(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Pi=ff(e)}else t===27?(t=Pi,ef(e.type)?(e=Z,Z=null,Pi=e):Pi=t):Pi=Ni?df(e.stateNode.nextSibling):null;return!0}function Hi(){Pi=Ni=null,z=!1}function Ui(){var e=Fi;return e!==null&&(Ql===null?Ql=e:Ql.push.apply(Ql,e),Fi=null),e}function Wi(e){Fi===null?Fi=[e]:Fi.push(e)}var Gi=he(null),Ki=null,qi=null;function Ji(e,t,n){_e(Gi,t._currentValue),t._currentValue=n}function Yi(e){e._currentValue=Gi.current,ge(Gi)}function Xi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Zi(e,t,n,r){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){var o=i.child;a=a.firstContext;a:for(;a!==null;){var c=a;a=i;for(var l=0;l<t.length;l++)if(c.context===t[l]){a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Xi(a.return,n,e),r||(o=null);break a}a=c.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(s(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xi(o,n,e),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function Qi(e,t,n,r){e=null;for(var i=t,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(s(387));if(o=o.memoizedProps,o!==null){var c=i.type;Tr(i.pendingProps.value,o.value)||(e===null?e=[c]:e.push(c))}}else if(i===xe.current){if(o=i.alternate,o===null)throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e===null?e=[ep]:e.push(ep))}i=i.return}e!==null&&Zi(t,e,n,r),t.flags|=262144}function $i(e){for(e=e.firstContext;e!==null;){if(!Tr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ea(e){Ki=e,qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ta(e){return ra(Ki,e)}function na(e,t){return Ki===null&&ea(e),ra(e,t)}function ra(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},qi===null){if(e===null)throw Error(s(308));qi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else qi=qi.next=t;return n}var ia=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},aa=t.unstable_scheduleCallback,oa=t.unstable_NormalPriority,sa={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ca(){return{controller:new ia,data:new Map,refCount:0}}function la(e){e.refCount--,e.refCount===0&&aa(oa,function(){e.controller.abort()})}var ua=null,da=0,fa=0,pa=null;function ma(e,t){if(ua===null){var n=ua=[];da=0,fa=pd(),pa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return da++,t.then(ha,ha),t}function ha(){if(--da===0&&ua!==null){pa!==null&&(pa.status=`fulfilled`);var e=ua;ua=null,fa=0,pa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ga(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var _a=w.S;w.S=function(e,t){tu=Re(),typeof t==`object`&&t&&typeof t.then==`function`&&ma(e,t),_a!==null&&_a(e,t)};var va=he(null);function ya(){var e=va.current;return e===null?Rl.pooledCache:e}function ba(e,t){t===null?_e(va,va.current):_e(va,t.pool)}function xa(){var e=ya();return e===null?null:{parent:sa._currentValue,pool:e}}var Sa=Error(s(460)),Ca=Error(s(474)),wa=Error(s(542)),Ta={then:function(){}};function Ea(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Da(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(dn,dn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ja(e),e;default:if(typeof t.status==`string`)t.then(dn,dn);else{if(e=Rl,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ja(e),e}throw ka=t,Sa}}function Oa(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(ka=e,Sa):e}}var ka=null;function Aa(){if(ka===null)throw Error(s(459));var e=ka;return ka=null,e}function ja(e){if(e===Sa||e===wa)throw Error(s(483))}var Ma=null,Na=0;function Pa(e){var t=Na;return Na+=1,Ma===null&&(Ma=[]),Da(Ma,e,t)}function Fa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ia(e,t){throw t.$$typeof===g?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function La(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function i(e,t){return e=ui(e,t),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function o(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=mi(n,e.mode,r),t.return=e,t):(t=i(t,n),t.return=e,t)}function l(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===a||typeof a==`object`&&a&&a.$$typeof===ie&&Oa(a)===t.type)?(t=i(t,n.props),Fa(t,n),t.return=e,t):(t=fi(n.type,n.key,n.props,null,e.mode,r),Fa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=gi(n,e.mode,r),t.return=e,t):(t=i(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,a){return t===null||t.tag!==7?(t=pi(n,e.mode,r,a),t.return=e,t):(t=i(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=mi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=fi(t.type,t.key,t.props,null,e.mode,n),Fa(n,t),n.return=e,n;case v:return t=gi(t,e.mode,n),t.return=e,t;case ie:return t=Oa(t),f(e,t,n)}if(de(t)||ce(t))return t=pi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Pa(t),n);if(t.$$typeof===ee)return f(e,na(e,t),n);Ia(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ie:return n=Oa(n),p(e,t,n,r)}if(de(n)||ce(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Pa(n),r);if(n.$$typeof===ee)return p(e,t,na(e,n),r);Ia(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ie:return r=Oa(r),m(e,t,n,r,i)}if(de(r)||ce(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Pa(r),i);if(r.$$typeof===ee)return m(e,t,n,na(t,r),i);Ia(t,r)}return null}function h(i,o,s,c){for(var l=null,u=null,d=o,h=o=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),o=a(_,o,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),z&&Oi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(o=a(d,o,h),u===null?l=d:u.sibling=d,u=d);return z&&Oi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),o=a(g,o,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),z&&Oi(i,h),l}function g(i,o,c,l){if(c==null)throw Error(s(151));for(var u=null,d=null,h=o,g=o=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(i,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(i,h),o=a(y,o,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(i,h),z&&Oi(i,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(i,v.value,l),v!==null&&(o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return z&&Oi(i,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,i,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(i,e)}),z&&Oi(i,g),u}function b(e,r,a,c){if(typeof a==`object`&&a&&a.type===y&&a.key===null&&(a=a.props.children),typeof a==`object`&&a){switch(a.$$typeof){case _:a:{for(var l=a.key;r!==null;){if(r.key===l){if(l=a.type,l===y){if(r.tag===7){n(e,r.sibling),c=i(r,a.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ie&&Oa(l)===r.type){n(e,r.sibling),c=i(r,a.props),Fa(c,a),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}a.type===y?(c=pi(a.props.children,e.mode,c,a.key),c.return=e,e=c):(c=fi(a.type,a.key,a.props,null,e.mode,c),Fa(c,a),c.return=e,e=c)}return o(e);case v:a:{for(l=a.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),c=i(r,a.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=gi(a,e.mode,c),c.return=e,e=c}return o(e);case ie:return a=Oa(a),b(e,r,a,c)}if(de(a))return h(e,r,a,c);if(ce(a)){if(l=ce(a),typeof l!=`function`)throw Error(s(150));return a=l.call(a),g(e,r,a,c)}if(typeof a.then==`function`)return b(e,r,Pa(a),c);if(a.$$typeof===ee)return b(e,r,na(e,a),c);Ia(e,a)}return typeof a==`string`&&a!==``||typeof a==`number`||typeof a==`bigint`?(a=``+a,r!==null&&r.tag===6?(n(e,r.sibling),c=i(r,a),c.return=e,e=c):(n(e,r),c=mi(a,e.mode,c),c.return=e,e=c),o(e)):n(e,r)}return function(e,t,n,r){try{Na=0;var i=b(e,t,n,r);return Ma=null,i}catch(t){if(t===Sa||t===wa)throw t;var a=ci(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ra=La(!0),za=La(!1),Ba=!1;function Va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ha(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ua(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ai(e),ii(e,null,n),t}return ti(e,r,t,n),ai(e)}function Ga(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}function Ka(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var B=!1;function qa(){if(B){var e=pa;if(e!==null)throw e}}function Ja(e,t,n,r){B=!1;var i=e.updateQueue;Ba=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(Y&f)===f:(r&f)===f){f!==0&&f===fa&&(B=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ba=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Kl|=o,e.lanes=o,e.memoizedState=d}}function Ya(e,t){if(typeof e!=`function`)throw Error(s(191,e));e.call(t)}function Xa(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ya(n[e],t)}var Za=he(null),Qa=he(0);function $a(e,t){e=Wl,_e(Qa,e),_e(Za,t),Wl=e|t.baseLanes}function eo(){_e(Qa,Wl),_e(Za,Za.current)}function to(){Wl=Qa.current,ge(Za),ge(Qa)}var no=he(null),ro=null;function io(e){var t=e.alternate;_e(lo,lo.current&1),_e(no,e),ro===null&&(t===null||Za.current!==null||t.memoizedState!==null)&&(ro=e)}function ao(e){_e(lo,lo.current),_e(no,e),ro===null&&(ro=e)}function oo(e){e.tag===22?(_e(lo,lo.current),_e(no,e),ro===null&&(ro=e)):so(e)}function so(){_e(lo,lo.current),_e(no,no.current)}function co(e){ge(no),ro===e&&(ro=null),ge(lo)}var lo=he(0);function uo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||cf(n)||lf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fo=0,V=null,H=null,po=null,mo=!1,ho=!1,go=!1,_o=0,vo=0,yo=null,bo=0;function xo(){throw Error(s(321))}function So(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,a){return fo=a,V=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w.H=e===null||e.memoizedState===null?Rs:zs,go=!1,a=n(r,i),go=!1,ho&&(a=To(t,n,r,i)),wo(e),a}function wo(e){w.H=Ls;var t=H!==null&&H.next!==null;if(fo=0,po=H=V=null,mo=!1,vo=0,yo=null,t)throw Error(s(300));e===null||nc||(e=e.dependencies,e!==null&&$i(e)&&(nc=!0))}function To(e,t,n,r){V=e;var i=0;do{if(ho&&(yo=null),vo=0,ho=!1,25<=i)throw Error(s(301));if(i+=1,po=H=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}w.H=Bs,a=t(n,r)}while(ho);return a}function Eo(){var e=w.H,t=e.useState()[0];return t=typeof t.then==`function`?jo(t):t,e=e.useState()[0],(H===null?null:H.memoizedState)!==e&&(V.flags|=1024),t}function Do(){var e=_o!==0;return _o=0,e}function Oo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ko(e){if(mo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mo=!1}fo=0,po=H=V=null,ho=!1,vo=_o=0,yo=null}function U(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return po===null?V.memoizedState=po=e:po=po.next=e,po}function W(){if(H===null){var e=V.alternate;e=e===null?null:e.memoizedState}else e=H.next;var t=po===null?V.memoizedState:po.next;if(t!==null)po=t,H=e;else{if(e===null)throw V.alternate===null?Error(s(467)):Error(s(310));H=e,e={memoizedState:H.memoizedState,baseState:H.baseState,baseQueue:H.baseQueue,queue:H.queue,next:null},po===null?V.memoizedState=po=e:po=po.next=e}return po}function Ao(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jo(e){var t=vo;return vo+=1,yo===null&&(yo=[]),e=Da(yo,e,t),t=V,(po===null?t.memoizedState:po.next)===null&&(t=t.alternate,w.H=t===null||t.memoizedState===null?Rs:zs),e}function Mo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return jo(e);if(e.$$typeof===ee)return ta(e)}throw Error(s(438,String(e)))}function No(e){var t=null,n=V.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=V.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Ao(),V.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=oe;return t.index++,n}function Po(e,t){return typeof t==`function`?t(e):t}function Fo(e){return Io(W(),H,e)}function Io(e,t,n){var r=e.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,i===null)e.memoizedState=a;else{t=i.next;var c=o=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(fo&f)===f:(Y&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===fa&&(d=!0);else if((fo&p)===p){u=u.next,p===fa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,o=a):l=l.next=f,V.lanes|=p,Kl|=p;f=u.action,go&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,o=a):l=l.next=p,V.lanes|=f,Kl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?o=a:l.next=c,!Tr(a,e.memoizedState)&&(nc=!0,d&&(n=pa,n!==null)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Lo(e){var t=W(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Tr(a,t.memoizedState)||(nc=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ro(e,t,n){var r=V,i=W(),a=z;if(a){if(n===void 0)throw Error(s(407));n=n()}else n=t();var o=!Tr((H||i).memoizedState,n);if(o&&(i.memoizedState=n,nc=!0),i=i.queue,ls(Vo.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||po!==null&&po.memoizedState.tag&1){if(r.flags|=2048,is(9,{destroy:void 0},Bo.bind(null,r,i,n,t),null),Rl===null)throw Error(s(349));a||fo&127||zo(r,t,n)}return n}function zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=V.updateQueue,t===null?(t=Ao(),V.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bo(e,t,n,r){t.value=n,t.getSnapshot=r,Ho(t)&&Uo(e)}function Vo(e,t,n){return n(function(){Ho(t)&&Uo(e)})}function Ho(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tr(e,n)}catch{return!0}}function Uo(e){var t=ri(e,2);t!==null&&gu(t,e,2)}function Wo(e){var t=U();if(typeof e==`function`){var n=e;if(e=n(),go){Je(!0);try{n()}finally{Je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:e},t}function Go(e,t,n,r){return e.baseState=n,Io(e,H,typeof r==`function`?r:Po)}function Ko(e,t,n,r,i){if(Ps(e))throw Error(s(485));if(e=t.action,e!==null){var a={payload:i,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};w.T===null?a.isTransition=!1:n(!0),r(a),n=t.pending,n===null?(a.next=t.pending=a,qo(t,a)):(a.next=n.next,t.pending=n.next=a)}}function qo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=w.T,o={};w.T=o;try{var s=n(i,r),c=w.S;c!==null&&c(o,s),Jo(e,t,s)}catch(n){Xo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),w.T=a}}else try{a=n(i,r),Jo(e,t,a)}catch(n){Xo(e,t,n)}}function Jo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Yo(e,t,n)},function(n){return Xo(e,t,n)}):Yo(e,t,n)}function Yo(e,t,n){t.status=`fulfilled`,t.value=n,Zo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,qo(e,n)))}function Xo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Zo(t),t=t.next;while(t!==r)}e.action=null}function Zo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qo(e,t){return t}function $o(e,t){if(z){var n=Rl.formState;if(n!==null){a:{var r=V;if(z){if(Pi){b:{for(var i=Pi,a=Ii;i.nodeType!==8;){if(!a){i=null;break b}if(i=df(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Pi=df(i.nextSibling),r=i.data===`F!`;break a}}Ri(r)}r=!1}r&&(t=n[0])}}return n=U(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},n.queue=r,n=js.bind(null,V,r),r.dispatch=n,r=Wo(!1),a=Ns.bind(null,V,!1,r.queue),r=U(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Ko.bind(null,V,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function es(e){return ts(W(),H,e)}function ts(e,t,n){if(t=Io(e,t,Qo)[0],e=Fo(Po)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=jo(t)}catch(e){throw e===Sa?wa:e}else r=t;t=W();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(V.flags|=2048,is(9,{destroy:void 0},ns.bind(null,i,n),null)),[r,a,e]}function ns(e,t){e.action=t}function rs(e){var t=W(),n=H;if(n!==null)return ts(t,n,e);W(),t=t.memoizedState,n=W();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function is(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=V.updateQueue,t===null&&(t=Ao(),V.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function as(){return W().memoizedState}function os(e,t,n,r){var i=U();V.flags|=e,i.memoizedState=is(1|t,{destroy:void 0},n,r===void 0?null:r)}function ss(e,t,n,r){var i=W();r=r===void 0?null:r;var a=i.memoizedState.inst;H!==null&&r!==null&&So(r,H.memoizedState.deps)?i.memoizedState=is(t,a,n,r):(V.flags|=e,i.memoizedState=is(1|t,a,n,r))}function cs(e,t){os(8390656,8,e,t)}function ls(e,t){ss(2048,8,e,t)}function us(e){V.flags|=4;var t=V.updateQueue;if(t===null)t=Ao(),V.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ds(e){var t=W().memoizedState;return us({ref:t,nextImpl:e}),function(){if(q&2)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function fs(e,t){return ss(4,2,e,t)}function ps(e,t){return ss(4,4,e,t)}function ms(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hs(e,t,n){n=n==null?null:n.concat([e]),ss(4,4,ms.bind(null,t,e),n)}function gs(){}function _s(e,t){var n=W();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vs(e,t){var n=W();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&So(t,r[1]))return r[0];if(r=e(),go){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r}function ys(e,t,n){return n===void 0||fo&1073741824&&!(Y&261930)?e.memoizedState=t:(e.memoizedState=n,e=hu(),V.lanes|=e,Kl|=e,n)}function bs(e,t,n,r){return Tr(n,t)?n:Za.current===null?!(fo&42)||fo&1073741824&&!(Y&261930)?(nc=!0,e.memoizedState=n):(e=hu(),V.lanes|=e,Kl|=e,t):(e=ys(e,n,r),Tr(e,t)||(nc=!0),e)}function xs(e,t,n,r,i){var a=T.p;T.p=a!==0&&8>a?a:8;var o=w.T,s={};w.T=s,Ns(e,!1,t,n);try{var c=i(),l=w.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Ms(e,t,ga(c,r),mu(e)):Ms(e,t,r,mu(e))}catch(n){Ms(e,t,{then:function(){},status:`rejected`,reason:n},mu())}finally{T.p=a,o!==null&&s.types!==null&&(o.types=s.types),w.T=o}}function Ss(){}function Cs(e,t,n,r){if(e.tag!==5)throw Error(s(476));var i=ws(e).queue;xs(e,i,t,fe,n===null?Ss:function(){return Ts(e),n(r)})}function ws(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ts(e){var t=ws(e);t.next===null&&(t=e.alternate.memoizedState),Ms(e,t.next.queue,{},mu())}function Es(){return ta(ep)}function Ds(){return W().memoizedState}function Os(){return W().memoizedState}function ks(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=mu();e=Ua(n);var r=Wa(t,e,n);r!==null&&(gu(r,t,n),Ga(r,t,n)),t={cache:ca()},e.payload=t;return}t=t.return}}function As(e,t,n){var r=mu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ps(e)?Fs(t,n):(n=ni(e,t,n,r),n!==null&&(gu(n,e,r),Is(n,t,r)))}function js(e,t,n){Ms(e,t,n,mu())}function Ms(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ps(e))Fs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Tr(s,o))return ti(e,t,i,0),Rl===null&&ei(),!1}catch{}if(n=ni(e,t,i,r),n!==null)return gu(n,e,r),Is(n,t,r),!0}return!1}function Ns(e,t,n,r){if(r={lane:2,revertLane:pd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ps(e)){if(t)throw Error(s(479))}else t=ni(e,n,r,2),t!==null&&gu(t,e,2)}function Ps(e){var t=e.alternate;return e===V||t!==null&&t===V}function Fs(e,t){ho=mo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Is(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}var Ls={readContext:ta,use:Mo,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useLayoutEffect:xo,useInsertionEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useSyncExternalStore:xo,useId:xo,useHostTransitionStatus:xo,useFormState:xo,useActionState:xo,useOptimistic:xo,useMemoCache:xo,useCacheRefresh:xo};Ls.useEffectEvent=xo;var Rs={readContext:ta,use:Mo,useCallback:function(e,t){return U().memoizedState=[e,t===void 0?null:t],e},useContext:ta,useEffect:cs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),os(4194308,4,ms.bind(null,t,e),n)},useLayoutEffect:function(e,t){return os(4194308,4,e,t)},useInsertionEffect:function(e,t){os(4,2,e,t)},useMemo:function(e,t){var n=U();t=t===void 0?null:t;var r=e();if(go){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=U();if(n!==void 0){var i=n(t);if(go){Je(!0);try{n(t)}finally{Je(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=As.bind(null,V,e),[r.memoizedState,e]},useRef:function(e){var t=U();return e={current:e},t.memoizedState=e},useState:function(e){e=Wo(e);var t=e.queue,n=js.bind(null,V,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gs,useDeferredValue:function(e,t){return ys(U(),e,t)},useTransition:function(){var e=Wo(!1);return e=xs.bind(null,V,e.queue,!0,!1),U().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=V,i=U();if(z){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Rl===null)throw Error(s(349));Y&127||zo(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,cs(Vo.bind(null,r,a,e),[e]),r.flags|=2048,is(9,{destroy:void 0},Bo.bind(null,r,a,n,t),null),n},useId:function(){var e=U(),t=Rl.identifierPrefix;if(z){var n=Di,r=Ei;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=_o++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=bo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Es,useFormState:$o,useActionState:$o,useOptimistic:function(e){var t=U();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ns.bind(null,V,!0,n),n.dispatch=t,[e,t]},useMemoCache:No,useCacheRefresh:function(){return U().memoizedState=ks.bind(null,V)},useEffectEvent:function(e){var t=U(),n={impl:e};return t.memoizedState=n,function(){if(q&2)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},zs={readContext:ta,use:Mo,useCallback:_s,useContext:ta,useEffect:ls,useImperativeHandle:hs,useInsertionEffect:fs,useLayoutEffect:ps,useMemo:vs,useReducer:Fo,useRef:as,useState:function(){return Fo(Po)},useDebugValue:gs,useDeferredValue:function(e,t){return bs(W(),H.memoizedState,e,t)},useTransition:function(){var e=Fo(Po)[0],t=W().memoizedState;return[typeof e==`boolean`?e:jo(e),t]},useSyncExternalStore:Ro,useId:Ds,useHostTransitionStatus:Es,useFormState:es,useActionState:es,useOptimistic:function(e,t){return Go(W(),H,e,t)},useMemoCache:No,useCacheRefresh:Os};zs.useEffectEvent=ds;var Bs={readContext:ta,use:Mo,useCallback:_s,useContext:ta,useEffect:ls,useImperativeHandle:hs,useInsertionEffect:fs,useLayoutEffect:ps,useMemo:vs,useReducer:Lo,useRef:as,useState:function(){return Lo(Po)},useDebugValue:gs,useDeferredValue:function(e,t){var n=W();return H===null?ys(n,e,t):bs(n,H.memoizedState,e,t)},useTransition:function(){var e=Lo(Po)[0],t=W().memoizedState;return[typeof e==`boolean`?e:jo(e),t]},useSyncExternalStore:Ro,useId:Ds,useHostTransitionStatus:Es,useFormState:rs,useActionState:rs,useOptimistic:function(e,t){var n=W();return H===null?(n.baseState=e,[e,n.queue.dispatch]):Go(n,H,e,t)},useMemoCache:No,useCacheRefresh:Os};Bs.useEffectEvent=ds;function Vs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mu(),i=Ua(r);i.payload=t,n!=null&&(i.callback=n),t=Wa(e,i,r),t!==null&&(gu(t,e,r),Ga(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mu(),i=Ua(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Wa(e,i,r),t!==null&&(gu(t,e,r),Ga(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mu(),r=Ua(n);r.tag=2,t!=null&&(r.callback=t),t=Wa(e,r,n),t!==null&&(gu(t,e,n),Ga(t,e,n))}};function Us(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Er(n,r)||!Er(i,a):!0}function Ws(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hs.enqueueReplaceState(t,t.state,null)}function Gs(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Ks(e){Zr(e)}function qs(e){console.error(e)}function Js(e){Zr(e)}function Ys(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Xs(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Zs(e,t,n){return n=Ua(n),n.tag=3,n.payload={element:null},n.callback=function(){Ys(e,t)},n}function Qs(e){return e=Ua(e),e.tag=3,e}function $s(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Xs(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Xs(t,n,r),typeof i!=`function`&&(iu===null?iu=new Set([this]):iu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function ec(e,t,n,r,i){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&Qi(t,n,i,!0),n=no.current,n!==null){switch(n.tag){case 31:case 13:return ro===null?Ou():n.alternate===null&&Gl===0&&(Gl=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Ta?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),qu(e,r,i)),!1;case 22:return n.flags|=65536,r===Ta?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),qu(e,r,i)),!1}throw Error(s(435,n.tag))}return qu(e,r,i),Ou(),!1}if(z)return t=no.current,t===null?(r!==Li&&(t=Error(s(423),{cause:r}),Wi(vi(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=vi(r,n),i=Zs(e.stateNode,r,i),Ka(e,i),Gl!==4&&(Gl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Li&&(e=Error(s(422),{cause:r}),Wi(vi(e,n)))),!1;var a=Error(s(520),{cause:r});if(a=vi(a,n),Zl===null?Zl=[a]:Zl.push(a),Gl!==4&&(Gl=2),t===null)return!0;r=vi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=Zs(n.stateNode,r,e),Ka(n,e),!1;case 1:if(t=n.type,a=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||a!==null&&typeof a.componentDidCatch==`function`&&(iu===null||!iu.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Qs(i),$s(i,e,n,r),Ka(n,i),!1}n=n.return}while(n!==null);return!1}var tc=Error(s(461)),nc=!1;function rc(e,t,n,r){t.child=e===null?za(t,null,n,r):Ra(t,e.child,n,r)}function ic(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ea(t),r=Co(e,t,n,o,a,i),s=Do(),e!==null&&!nc?(Oo(e,t,i),Oc(e,t,i)):(z&&s&&Ai(t),t.flags|=1,rc(e,t,r,i),t.child)}function ac(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!li(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,oc(e,t,a,r,i)):(e=fi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!kc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Er:n,n(o,r)&&e.ref===t.ref)return Oc(e,t,i)}return t.flags|=1,e=ui(a,r),e.ref=t.ref,e.return=t,t.child=e}function oc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Er(a,r)&&e.ref===t.ref)if(nc=!1,t.pendingProps=r=a,kc(e,i))e.flags&131072&&(nc=!0);else return t.lanes=e.lanes,Oc(e,t,i)}return mc(e,t,n,r,i)}function sc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return lc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ba(t,a===null?null:a.cachePool),a===null?eo():$a(t,a),oo(t);else return r=t.lanes=536870912,lc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ba(t,null),eo(),so(t)):(ba(t,a.cachePool),$a(t,a),so(t),t.memoizedState=null);return rc(e,t,i,n),t.child}function cc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function lc(e,t,n,r,i){var a=ya();return a=a===null?null:{parent:sa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ba(t,null),eo(),oo(t),e!==null&&Qi(e,t,r,!0),t.childLanes=i,null}function uc(e,t){return t=Cc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function dc(e,t,n){return Ra(t,e.child,null,n),e=uc(t,t.pendingProps),e.flags|=2,co(t),t.memoizedState=null,e}function fc(e,t,n){var r=t.pendingProps,i=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(z){if(r.mode===`hidden`)return e=uc(t,r),t.lanes=536870912,cc(null,e);if(ao(t),(e=Pi)?(e=sf(e,Ii),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ti===null?null:{id:Ei,overflow:Di},retryLane:536870912,hydrationErrors:null},n=hi(e),n.return=t,t.child=n,Ni=t,Pi=null)):e=null,e===null)throw Ri(t);return t.lanes=536870912,null}return uc(t,r)}var a=e.memoizedState;if(a!==null){var o=a.dehydrated;if(ao(t),i)if(t.flags&256)t.flags&=-257,t=dc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(nc||Qi(e,t,n,!1),i=(n&e.childLanes)!==0,nc||i){if(r=Rl,r!==null&&(o=ft(r,n),o!==0&&o!==a.retryLane))throw a.retryLane=o,ri(e,o),gu(r,e,o),tc;Ou(),t=dc(e,t,n)}else e=a.treeContext,Pi=df(o.nextSibling),Ni=t,z=!0,Fi=null,Ii=!1,e!==null&&Mi(t,e),t=uc(t,r),t.flags|=4096;return t}return e=ui(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function pc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function mc(e,t,n,r,i){return ea(t),n=Co(e,t,n,r,void 0,i),r=Do(),e!==null&&!nc?(Oo(e,t,i),Oc(e,t,i)):(z&&r&&Ai(t),t.flags|=1,rc(e,t,n,i),t.child)}function hc(e,t,n,r,i,a){return ea(t),t.updateQueue=null,n=To(t,r,n,i),wo(e),r=Do(),e!==null&&!nc?(Oo(e,t,a),Oc(e,t,a)):(z&&r&&Ai(t),t.flags|=1,rc(e,t,n,a),t.child)}function gc(e,t,n,r,i){if(ea(t),t.stateNode===null){var a=oi,o=n.contextType;typeof o==`object`&&o&&(a=ta(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Hs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Va(t),o=n.contextType,a.context=typeof o==`object`&&o?ta(o):oi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Vs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Hs.enqueueReplaceState(a,a.state,null),Ja(t,r,a,i),qa(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Gs(n,s);a.props=c;var l=a.context,u=n.contextType;o=oi,typeof u==`object`&&u&&(o=ta(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Ws(t,a,r,o),Ba=!1;var f=t.memoizedState;a.state=f,Ja(t,r,a,i),qa(),l=t.memoizedState,s||f!==l||Ba?(typeof d==`function`&&(Vs(t,n,d,r),l=t.memoizedState),(c=Ba||Us(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ha(e,t),o=t.memoizedProps,u=Gs(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=oi,typeof l==`object`&&l&&(c=ta(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Ws(t,a,r,c),Ba=!1,f=t.memoizedState,a.state=f,Ja(t,r,a,i),qa();var p=t.memoizedState;o!==d||f!==p||Ba||e!==null&&e.dependencies!==null&&$i(e.dependencies)?(typeof s==`function`&&(Vs(t,n,s,r),p=t.memoizedState),(u=Ba||Us(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&$i(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,pc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ra(t,e.child,null,i),t.child=Ra(t,null,n,i)):rc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Oc(e,t,i),e}function _c(e,t,n,r){return Hi(),t.flags|=256,rc(e,t,n,r),t.child}var vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yc(e){return{baseLanes:e,cachePool:xa()}}function bc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Yl),e}function xc(e,t,n){var r=t.pendingProps,i=!1,a=(t.flags&128)!=0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(lo.current&2)!=0),o&&(i=!0,t.flags&=-129),o=(t.flags&32)!=0,t.flags&=-33,e===null){if(z){if(i?io(t):so(t),(e=Pi)?(e=sf(e,Ii),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ti===null?null:{id:Ei,overflow:Di},retryLane:536870912,hydrationErrors:null},n=hi(e),n.return=t,t.child=n,Ni=t,Pi=null)):e=null,e===null)throw Ri(t);return lf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,i?(so(t),i=t.mode,c=Cc({mode:`hidden`,children:c},i),r=pi(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=yc(n),r.childLanes=bc(e,o,n),t.memoizedState=vc,cc(null,r)):(io(t),Sc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(a)t.flags&256?(io(t),t.flags&=-257,t=wc(e,t,n)):t.memoizedState===null?(so(t),c=r.fallback,i=t.mode,r=Cc({mode:`visible`,children:r.children},i),c=pi(c,i,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ra(t,e.child,null,n),r=t.child,r.memoizedState=yc(n),r.childLanes=bc(e,o,n),t.memoizedState=vc,t=cc(null,r)):(so(t),t.child=e.child,t.flags|=128,t=null);else if(io(t),lf(c)){if(o=c.nextSibling&&c.nextSibling.dataset,o)var u=o.dgst;o=u,r=Error(s(419)),r.stack=``,r.digest=o,Wi({value:r,source:null,stack:null}),t=wc(e,t,n)}else if(nc||Qi(e,t,n,!1),o=(n&e.childLanes)!==0,nc||o){if(o=Rl,o!==null&&(r=ft(o,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ri(e,r),gu(o,e,r),tc;cf(c)||Ou(),t=wc(e,t,n)}else cf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Pi=df(c.nextSibling),Ni=t,z=!0,Fi=null,Ii=!1,e!==null&&Mi(t,e),t=Sc(t,r.children),t.flags|=4096);return t}return i?(so(t),c=r.fallback,i=t.mode,l=e.child,u=l.sibling,r=ui(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=pi(c,i,n,null),c.flags|=2):c=ui(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,cc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=yc(n):(i=c.cachePool,i===null?i=xa():(l=sa._currentValue,i=i.parent===l?i:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:i}),r.memoizedState=c,r.childLanes=bc(e,o,n),t.memoizedState=vc,cc(e.child,r)):(io(t),n=e.child,e=n.sibling,n=ui(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function Sc(e,t){return t=Cc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Cc(e,t){return e=ci(22,e,null,t),e.lanes=0,e}function wc(e,t,n){return Ra(t,e.child,null,n),e=Sc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xi(e.return,t,n)}function Ec(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Dc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=lo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,_e(lo,o),rc(e,t,r,n),r=z?Si:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tc(e,n,t);else if(e.tag===19)Tc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&uo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ec(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&uo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ec(t,!0,n,null,a,r);break;case`together`:Ec(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Oc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Qi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&$i(e))):!0}function Ac(e,t,n){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),Ji(t,sa,e.memoizedState.cache),Hi();break;case 27:case 5:we(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:Ji(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ao(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(io(t),e=Oc(e,t,n),e===null?null:e.sibling):xc(e,t,n):(io(t),t.flags|=128,null);io(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Qi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Dc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(lo,lo.current),r)break;return null;case 22:return t.lanes=0,sc(e,t,n,t.pendingProps);case 24:Ji(t,sa,e.memoizedState.cache)}return Oc(e,t,n)}function jc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)nc=!0;else{if(!kc(e,n)&&!(t.flags&128))return nc=!1,Ac(e,t,n);nc=!!(e.flags&131072)}else nc=!1,z&&t.flags&1048576&&ki(t,Si,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Oa(t.elementType),t.type=e,typeof e==`function`)li(e)?(r=Gs(e,r),t.tag=1,t=gc(null,t,e,r,n)):(t.tag=0,t=mc(null,t,e,r,n));else{if(e!=null){var i=e.$$typeof;if(i===C){t.tag=11,t=ic(null,t,e,r,n);break a}else if(i===re){t.tag=14,t=ac(null,t,e,r,n);break a}}throw t=ue(e)||e,Error(s(306,t,``))}}return t;case 0:return mc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,i=Gs(r,t.pendingProps),gc(e,t,r,i,n);case 3:a:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,Ha(e,t),Ja(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ji(t,sa,r),r!==a.cache&&Zi(t,[sa],n,!0),qa(),r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=_c(e,t,r,n);break a}else if(r!==i){i=vi(Error(s(424)),t),Wi(i),t=_c(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Pi=df(e.firstChild),Ni=t,z=!0,Fi=null,Ii=!0,n=za(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Hi(),r===i){t=Oc(e,t,n);break a}rc(e,t,r,n)}t=t.child}return t;case 26:return pc(e,t),e===null?(n=jf(t.type,null,t.pendingProps,null))?t.memoizedState=n:z||(n=t.type,e=t.pendingProps,r=Ud(be.current).createElement(n),r[vt]=t,r[yt]=e,Ld(r,n,e),jt(r),t.stateNode=r):t.memoizedState=jf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&z&&(r=t.stateNode=mf(t.type,t.pendingProps,be.current),Ni=t,Ii=!0,i=Pi,ef(t.type)?(Z=i,Pi=df(r.firstChild)):Pi=i),rc(e,t,t.pendingProps.children,n),pc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&z&&((i=r=Pi)&&(r=af(r,t.type,t.pendingProps,Ii),r===null?i=!1:(t.stateNode=r,Ni=t,Pi=df(r.firstChild),Ii=!1,i=!0)),i||Ri(t)),we(t),i=t.type,a=t.pendingProps,o=e===null?null:e.memoizedProps,r=a.children,Kd(i,a)?r=null:o!==null&&Kd(i,o)&&(t.flags|=32),t.memoizedState!==null&&(i=Co(e,t,Eo,null,null,n),ep._currentValue=i),pc(e,t),rc(e,t,r,n),t.child;case 6:return e===null&&z&&((e=n=Pi)&&(n=of(n,t.pendingProps,Ii),n===null?e=!1:(t.stateNode=n,Ni=t,Pi=null,e=!0)),e||Ri(t)),null;case 13:return xc(e,t,n);case 4:return Se(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ra(t,null,r,n):rc(e,t,r,n),t.child;case 11:return ic(e,t,t.type,t.pendingProps,n);case 7:return rc(e,t,t.pendingProps,n),t.child;case 8:return rc(e,t,t.pendingProps.children,n),t.child;case 12:return rc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ji(t,t.type,r.value),rc(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,ea(t),i=ta(i),r=r(i),t.flags|=1,rc(e,t,r,n),t.child;case 14:return ac(e,t,t.type,t.pendingProps,n);case 15:return oc(e,t,t.type,t.pendingProps,n);case 19:return Dc(e,t,n);case 31:return fc(e,t,n);case 22:return sc(e,t,n,t.pendingProps);case 24:return ea(t),r=ta(sa),e===null?(i=ya(),i===null&&(i=Rl,a=ca(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},Va(t),Ji(t,sa,i)):((e.lanes&n)!==0&&(Ha(e,t),Ja(t,null,null,n),qa()),i=e.memoizedState,a=t.memoizedState,i.parent===r?(r=a.cache,Ji(t,sa,r),r!==i.cache&&Zi(t,[sa],n,!0)):(i={parent:r,cache:r},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Ji(t,sa,r))),rc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Mc(e){e.flags|=4}function Nc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Tu())e.flags|=8192;else throw ka=Ta,Ca}else e.flags&=-16777217}function Pc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Kf(t))if(Tu())e.flags|=8192;else throw ka=Ta,Ca}function Fc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:ot(),e.lanes|=t,Xl|=t)}function Ic(e,t){if(!z)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function G(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lc(e,t,n){var r=t.pendingProps;switch(ji(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return G(t),null;case 1:return G(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Yi(sa),Ce(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Vi(t)?Mc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ui())),G(t),null;case 26:var i=t.type,a=t.memoizedState;return e===null?(Mc(t),a===null?(G(t),Nc(t,i,null,r,n)):(G(t),Pc(t,a))):a?a===e.memoizedState?(G(t),t.flags&=-16777217):(Mc(t),G(t),Pc(t,a)):(e=e.memoizedProps,e!==r&&Mc(t),G(t),Nc(t,i,e,r,n)),null;case 27:if(Te(t),n=be.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Mc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return G(t),null}e=ve.current,Vi(t)?zi(t,e):(e=mf(i,r,n),t.stateNode=e,Mc(t))}return G(t),null;case 5:if(Te(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Mc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return G(t),null}if(a=ve.current,Vi(t))zi(t,a);else{var o=Ud(be.current);switch(a){case 1:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case 2:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;default:switch(i){case`svg`:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case`math`:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;case`script`:a=o.createElement(`div`),a.innerHTML=`<script><\/script>`,a=a.removeChild(a.firstChild);break;case`select`:a=typeof r.is==`string`?o.createElement(`select`,{is:r.is}):o.createElement(`select`),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is==`string`?o.createElement(i,{is:r.is}):o.createElement(i)}}a[vt]=t,a[yt]=r;a:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break a;for(;o.sibling===null;){if(o.return===null||o.return===t)break a;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;a:switch(Ld(a,i,r),i){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Mc(t)}}return G(t),Nc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Mc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(s(166));if(e=be.current,Vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,i=Ni,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Pd(e.nodeValue,n)),e||Ri(t,!0)}else e=Ud(e).createTextNode(r),e[vt]=t,t.stateNode=e}return G(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Vi(t),n!==null){if(e===null){if(!r)throw Error(s(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(557));e[vt]=t}else Hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;G(t),e=!1}else n=Ui(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(co(t),t):(co(t),null);if(t.flags&128)throw Error(s(558))}return G(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Vi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i===null?null:i.dehydrated,!i)throw Error(s(317));i[vt]=t}else Hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;G(t),i=!1}else i=Ui(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(co(t),t):(co(t),null)}return co(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Fc(t,t.updateQueue),G(t),null);case 4:return Ce(),e===null&&wd(t.stateNode.containerInfo),G(t),null;case 10:return Yi(t.type),G(t),null;case 19:if(ge(lo),r=t.memoizedState,r===null)return G(t),null;if(i=(t.flags&128)!=0,a=r.rendering,a===null)if(i)Ic(r,!1);else{if(Gl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=uo(e),a!==null){for(t.flags|=128,Ic(r,!1),e=a.updateQueue,t.updateQueue=e,Fc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)di(n,e),n=n.sibling;return _e(lo,lo.current&1|2),z&&Oi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Re()>nu&&(t.flags|=128,i=!0,Ic(r,!1),t.lanes=4194304)}else{if(!i)if(e=uo(a),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Fc(t,e),Ic(r,!0),r.tail===null&&r.tailMode===`hidden`&&!a.alternate&&!z)return G(t),null}else 2*Re()-r.renderingStartTime>nu&&n!==536870912&&(t.flags|=128,i=!0,Ic(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e===null?t.child=a:e.sibling=a,r.last=a)}return r.tail===null?(G(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Re(),e.sibling=null,n=lo.current,_e(lo,i?n&1|2:n&1),z&&Oi(t,r.treeForkCount),e);case 22:case 23:return co(t),to(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(G(t),t.subtreeFlags&6&&(t.flags|=8192)):G(t),n=t.updateQueue,n!==null&&Fc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ge(va),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Yi(sa),G(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Rc(e,t){switch(ji(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yi(sa),Ce(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Te(t),null;case 31:if(t.memoizedState!==null){if(co(t),t.alternate===null)throw Error(s(340));Hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(co(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(lo),null;case 4:return Ce(),null;case 10:return Yi(t.type),null;case 22:case 23:return co(t),to(),e!==null&&ge(va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yi(sa),null;case 25:return null;default:return null}}function zc(e,t){switch(ji(t),t.tag){case 3:Yi(sa),Ce();break;case 26:case 27:case 5:Te(t);break;case 4:Ce();break;case 31:t.memoizedState!==null&&co(t);break;case 13:co(t);break;case 19:ge(lo);break;case 10:Yi(t.type);break;case 22:case 23:co(t),to(),e!==null&&ge(va);break;case 24:Yi(sa)}}function Bc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Ku(t,t.return,e)}}function Vc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Ku(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Ku(t,t.return,e)}}function Hc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Xa(t,n)}catch(t){Ku(e,e.return,t)}}}function Uc(e,t,n){n.props=Gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Ku(e,t,n)}}function Wc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Ku(e,t,n)}}function Gc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Ku(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Ku(e,t,n)}else n.current=null}function Kc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Ku(e,e.return,t)}}function qc(e,t,n){try{var r=e.stateNode;Rd(r,e.type,n,t),r[yt]=t}catch(t){Ku(e,e.return,t)}}function Jc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ef(e.type)||e.tag===4}function Yc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Jc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ef(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dn));else if(r!==4&&(r===27&&ef(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&ef(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function Qc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ld(t,r,n),t[vt]=e,t[yt]=n}catch(t){Ku(e,e.return,t)}}var $c=!1,el=!1,tl=!1,nl=typeof WeakSet==`function`?WeakSet:Set,rl=null;function il(e,t){if(e=e.containerInfo,Vd=lp,e=kr(e),Ar(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break a}var o=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(c=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===i&&(c=o),p===a&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Hd={focusedElem:e,selectionRange:n},lp=!1,rl=t;rl!==null;)if(t=rl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,rl=e;else for(;rl!==null;){switch(t=rl,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var h=Gs(n.type,i);e=r.getSnapshotBeforeUpdate(h,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Ku(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)rf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:rf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,rl=e;break}rl=t.return}}function al(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),r&4&&Bc(5,n);break;case 1:if(yl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Ku(n,n.return,e)}else{var i=Gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Ku(n,n.return,e)}}r&64&&Hc(n),r&512&&Wc(n,n.return);break;case 3:if(yl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Xa(e,t)}catch(e){Ku(n,n.return,e)}}break;case 27:t===null&&r&4&&Qc(n);case 26:case 5:yl(e,n),t===null&&r&4&&Kc(n),r&512&&Wc(n,n.return);break;case 12:yl(e,n);break;case 31:yl(e,n),r&4&&ul(e,n);break;case 13:yl(e,n),r&4&&dl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Xu.bind(null,n),uf(e,n))));break;case 22:if(r=n.memoizedState!==null||$c,!r){t=t!==null&&t.memoizedState!==null||el,i=$c;var a=el;$c=r,(el=t)&&!a?xl(e,n,(n.subtreeFlags&8772)!=0):yl(e,n),$c=i,el=a}break;case 30:break;default:yl(e,n)}}function ol(e){var t=e.alternate;t!==null&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Et(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var K=null,sl=!1;function cl(e,t,n){for(n=n.child;n!==null;)ll(e,t,n),n=n.sibling}function ll(e,t,n){if(qe&&typeof qe.onCommitFiberUnmount==`function`)try{qe.onCommitFiberUnmount(Ke,n)}catch{}switch(n.tag){case 26:el||Gc(n,t),cl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:el||Gc(n,t);var r=K,i=sl;ef(n.type)&&(K=n.stateNode,sl=!1),cl(e,t,n),hf(n.stateNode),K=r,sl=i;break;case 5:el||Gc(n,t);case 6:if(r=K,i=sl,K=null,cl(e,t,n),K=r,sl=i,K!==null)if(sl)try{(K.nodeType===9?K.body:K.nodeName===`HTML`?K.ownerDocument.body:K).removeChild(n.stateNode)}catch(e){Ku(n,t,e)}else try{K.removeChild(n.stateNode)}catch(e){Ku(n,t,e)}break;case 18:K!==null&&(sl?(e=K,tf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Fp(e)):tf(K,n.stateNode));break;case 4:r=K,i=sl,K=n.stateNode.containerInfo,sl=!0,cl(e,t,n),K=r,sl=i;break;case 0:case 11:case 14:case 15:Vc(2,n,t),el||Vc(4,n,t),cl(e,t,n);break;case 1:el||(Gc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Uc(n,t,r)),cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:el=(r=el)||n.memoizedState!==null,cl(e,t,n),el=r;break;default:cl(e,t,n)}}function ul(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Fp(e)}catch(e){Ku(t,t.return,e)}}}function dl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fp(e)}catch(e){Ku(t,t.return,e)}}function fl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nl),t;default:throw Error(s(435,e.tag))}}function pl(e,t){var n=fl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Zu.bind(null,e,t);t.then(r,r)}})}function ml(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,c=o;a:for(;c!==null;){switch(c.tag){case 27:if(ef(c.type)){K=c.stateNode,sl=!1;break a}break;case 5:K=c.stateNode,sl=!1;break a;case 3:case 4:K=c.stateNode.containerInfo,sl=!0;break a}c=c.return}if(K===null)throw Error(s(160));ll(a,o,i),K=null,sl=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)gl(t,e),t=t.sibling}var hl=null;function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ml(t,e),_l(e),r&4&&(Vc(3,e,e.return),Bc(3,e),Vc(5,e,e.return));break;case 1:ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),r&64&&$c&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=hl;if(ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),r&4){var a=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;b:switch(r){case`title`:a=i.getElementsByTagName(`title`)[0],(!a||a[Tt]||a[vt]||a.namespaceURI===`http://www.w3.org/2000/svg`||a.hasAttribute(`itemprop`))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector(`head > title`))),Ld(a,r,n),a[vt]=e,jt(a),r=a;break a;case`link`:var o=Uf(`link`,`href`,i).get(r+(n.href||``));if(o){for(var c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&a.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&a.getAttribute(`title`)===(n.title==null?null:n.title)&&a.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(c,1);break b}}a=i.createElement(r),Ld(a,r,n),i.head.appendChild(a);break;case`meta`:if(o=Uf(`meta`,`content`,i).get(r+(n.content||``))){for(c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`content`)===(n.content==null?null:``+n.content)&&a.getAttribute(`name`)===(n.name==null?null:n.name)&&a.getAttribute(`property`)===(n.property==null?null:n.property)&&a.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){o.splice(c,1);break b}}a=i.createElement(r),Ld(a,r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[vt]=e,jt(a),r=a}e.stateNode=r}else Wf(i,e.type,e.stateNode);else e.stateNode=Rf(i,r,e.memoizedProps);else a===r?r===null&&e.stateNode!==null&&qc(e,e.memoizedProps,n.memoizedProps):(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?Wf(i,e.type,e.stateNode):Rf(i,r,e.memoizedProps))}break;case 27:ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),n!==null&&r&4&&qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),e.flags&32){i=e.stateNode;try{nn(i,``)}catch(t){Ku(e,e.return,t)}}r&4&&e.stateNode!=null&&(i=e.memoizedProps,qc(e,i,n===null?i:n.memoizedProps)),r&1024&&(tl=!0);break;case 6:if(ml(t,e),_l(e),r&4){if(e.stateNode===null)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Ku(e,e.return,t)}}break;case 3:if(Hf=null,i=hl,hl=vf(t.containerInfo),ml(t,e),hl=i,_l(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fp(t.containerInfo)}catch(t){Ku(e,e.return,t)}tl&&(tl=!1,vl(e));break;case 4:r=hl,hl=vf(e.stateNode.containerInfo),ml(t,e),_l(e),hl=r;break;case 12:ml(t,e),_l(e);break;case 31:ml(t,e),_l(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 13:ml(t,e),_l(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(eu=Re()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 22:i=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=$c,d=el;if($c=u||i,el=d||l,ml(t,e),el=d,$c=u,_l(e),r&8192)a:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||l||$c||el||bl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(a=l.stateNode,i)o=a.style,typeof o.setProperty==`function`?o.setProperty(`display`,`none`,`important`):o.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Ku(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=i?``:l.memoizedProps}catch(e){Ku(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;i?nf(m,!0):nf(l.stateNode,!1)}catch(e){Ku(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,pl(e,n))));break;case 19:ml(t,e),_l(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 30:break;case 21:break;default:ml(t,e),_l(e)}}function _l(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Jc(r)){n=r;break}r=r.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;Zc(e,Yc(e),i);break;case 5:var a=n.stateNode;n.flags&32&&(nn(a,``),n.flags&=-33),Zc(e,Yc(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Xc(e,Yc(e),o);break;default:throw Error(s(161))}}catch(t){Ku(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)al(e,t.alternate,t),t=t.sibling}function bl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Vc(4,t,t.return),bl(t);break;case 1:Gc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Uc(t,t.return,n),bl(t);break;case 27:hf(t.stateNode);case 26:case 5:Gc(t,t.return),bl(t);break;case 22:t.memoizedState===null&&bl(t);break;case 30:bl(t);break;default:bl(t)}e=e.sibling}}function xl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:xl(i,a,n),Bc(4,a);break;case 1:if(xl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Ku(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Ya(c[i],s)}catch(e){Ku(r,r.return,e)}}n&&o&64&&Hc(a),Wc(a,a.return);break;case 27:Qc(a);case 26:case 5:xl(i,a,n),n&&r===null&&o&4&&Kc(a),Wc(a,a.return);break;case 12:xl(i,a,n);break;case 31:xl(i,a,n),n&&o&4&&ul(i,a);break;case 13:xl(i,a,n),n&&o&4&&dl(i,a);break;case 22:a.memoizedState===null&&xl(i,a,n),Wc(a,a.return);break;case 30:break;default:xl(i,a,n)}t=t.sibling}}function Sl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&la(n))}function Cl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&la(e))}function wl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tl(e,t,n,r),t=t.sibling}function Tl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:wl(e,t,n,r),i&2048&&Bc(9,t);break;case 1:wl(e,t,n,r);break;case 3:wl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&la(e)));break;case 12:if(i&2048){wl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Ku(t,t.return,e)}}else wl(e,t,n,r);break;case 31:wl(e,t,n,r);break;case 13:wl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?wl(e,t,n,r):(a._visibility|=2,El(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?wl(e,t,n,r):Dl(e,t),i&2048&&Sl(o,t);break;case 24:wl(e,t,n,r),i&2048&&Cl(t.alternate,t);break;default:wl(e,t,n,r)}}function El(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:El(a,o,s,c,i),Bc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,El(a,o,s,c,i)):u._visibility&2?El(a,o,s,c,i):Dl(a,o),i&&l&2048&&Sl(o.alternate,o);break;case 24:El(a,o,s,c,i),i&&l&2048&&Cl(o.alternate,o);break;default:El(a,o,s,c,i)}t=t.sibling}}function Dl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Dl(n,r),i&2048&&Sl(r.alternate,r);break;case 24:Dl(n,r),i&2048&&Cl(r.alternate,r);break;default:Dl(n,r)}t=t.sibling}}var Ol=8192;function kl(e,t,n){if(e.subtreeFlags&Ol)for(e=e.child;e!==null;)Al(e,t,n),e=e.sibling}function Al(e,t,n){switch(e.tag){case 26:kl(e,t,n),e.flags&Ol&&e.memoizedState!==null&&qf(n,hl,e.memoizedState,e.memoizedProps);break;case 5:kl(e,t,n);break;case 3:case 4:var r=hl;hl=vf(e.stateNode.containerInfo),kl(e,t,n),hl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,kl(e,t,n),Ol=r):kl(e,t,n));break;default:kl(e,t,n)}}function jl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ml(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rl=r,Fl(r,e)}jl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nl(e),e=e.sibling}function Nl(e){switch(e.tag){case 0:case 11:case 15:Ml(e),e.flags&2048&&Vc(9,e,e.return);break;case 3:Ml(e);break;case 12:Ml(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Pl(e)):Ml(e);break;default:Ml(e)}}function Pl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rl=r,Fl(r,e)}jl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Vc(8,t,t.return),Pl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Pl(t));break;default:Pl(t)}e=e.sibling}}function Fl(e,t){for(;rl!==null;){var n=rl;switch(n.tag){case 0:case 11:case 15:Vc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:la(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,rl=r;else a:for(n=e;rl!==null;){r=rl;var i=r.sibling,a=r.return;if(ol(r),r===n){rl=null;break a}if(i!==null){i.return=a,rl=i;break a}rl=a}}}var Il={getCacheForType:function(e){var t=ta(sa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ta(sa).controller.signal}},Ll=typeof WeakMap==`function`?WeakMap:Map,q=0,Rl=null,J=null,Y=0,zl=0,Bl=null,Vl=!1,Hl=!1,Ul=!1,Wl=0,Gl=0,Kl=0,ql=0,Jl=0,Yl=0,Xl=0,Zl=null,Ql=null,$l=!1,eu=0,tu=0,nu=1/0,ru=null,iu=null,au=0,ou=null,su=null,cu=0,lu=0,uu=null,du=null,fu=0,pu=null;function mu(){return q&2&&Y!==0?Y&-Y:w.T===null?ht():pd()}function hu(){if(Yl===0)if(!(Y&536870912)||z){var e=et;et<<=1,!(et&3932160)&&(et=262144),Yl=e}else Yl=536870912;return e=no.current,e!==null&&(e.flags|=32),Yl}function gu(e,t,n){(e===Rl&&(zl===2||zl===9)||e.cancelPendingCommit!==null)&&(Cu(e,0),bu(e,Y,Yl,!1)),ct(e,n),(!(q&2)||e!==Rl)&&(e===Rl&&(!(q&2)&&(ql|=n),Gl===4&&bu(e,Y,Yl,!1)),ad(e))}function _u(e,t,n){if(q&6)throw Error(s(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||it(e,t),i=r?ju(e,t):ku(e,t,!0),a=r;do{if(i===0){Hl&&!r&&bu(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!yu(n)){i=ku(e,t,!1),a=!1;continue}if(i===2){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=e.pendingLanes&-536870913,o=o===0?o&536870912?536870912:0:o;if(o!==0){t=o;a:{var c=e;i=Zl;var l=c.current.memoizedState.isDehydrated;if(l&&(Cu(c,o).flags|=256),o=ku(c,o,!1),o!==2){if(Ul&&!l){c.errorRecoveryDisabledLanes|=a,ql|=a,i=4;break a}a=Ql,Ql=i,a!==null&&(Ql===null?Ql=a:Ql.push.apply(Ql,a))}i=o}if(a=!1,i!==2)continue}}if(i===1){Cu(e,0),bu(e,t,0,!0);break}a:{switch(r=e,a=i,a){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:bu(r,t,Yl,!Vl);break a;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(i=eu+300-Re(),10<i)){if(bu(r,t,Yl,!Vl),rt(r,0,!0)!==0)break a;cu=t,r.timeoutHandle=Yd(vu.bind(null,r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,a,`Throttled`,-0,0),i);break a}vu(r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,a,null,-0,0)}}break}while(1);ad(e)}function vu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},Al(t,a,d);var m=(a&62914560)===a?eu-Re():(a&4194048)===a?tu-Re():0;if(m=Yf(d,m),m!==null){cu=a,e.cancelPendingCommit=m(Ru.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),bu(e,a,o,!l);return}}Ru(e,t,a,n,r,i,o,s,c)}function yu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Tr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bu(e,t,n,r){t&=~Jl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ye(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ut(e,n,t)}function xu(){return q&6?!0:(od(0,!1),!1)}function Su(){if(J!==null){if(zl===0)var e=J.return;else e=J,qi=Ki=null,ko(e),Ma=null,Na=0,e=J;for(;e!==null;)zc(e.alternate,e),e=e.return;J=null}}function Cu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Xd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),cu=0,Su(),Rl=e,J=n=ui(e.current,null),Y=t,zl=0,Bl=null,Vl=!1,Hl=it(e,t),Ul=!1,Xl=Yl=Jl=ql=Kl=Gl=0,Ql=Zl=null,$l=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ye(r),a=1<<i;t|=e[i],r&=~a}return Wl=t,ei(),n}function wu(e,t){V=null,w.H=Ls,t===Sa||t===wa?(t=Aa(),zl=3):t===Ca?(t=Aa(),zl=4):zl=t===tc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Bl=t,J===null&&(Gl=1,Ys(e,vi(t,e.current)))}function Tu(){var e=no.current;return e===null?!0:(Y&4194048)===Y?ro===null:(Y&62914560)===Y||Y&536870912?e===ro:!1}function Eu(){var e=w.H;return w.H=Ls,e===null?Ls:e}function Du(){var e=w.A;return w.A=Il,e}function Ou(){Gl=4,Vl||(Y&4194048)!==Y&&no.current!==null||(Hl=!0),!(Kl&134217727)&&!(ql&134217727)||Rl===null||bu(Rl,Y,Yl,!1)}function ku(e,t,n){var r=q;q|=2;var i=Eu(),a=Du();(Rl!==e||Y!==t)&&(ru=null,Cu(e,t)),t=!1;var o=Gl;a:do try{if(zl!==0&&J!==null){var s=J,c=Bl;switch(zl){case 8:Su(),o=6;break a;case 3:case 2:case 9:case 6:no.current===null&&(t=!0);var l=zl;if(zl=0,Bl=null,Fu(e,s,c,l),n&&Hl){o=0;break a}break;default:l=zl,zl=0,Bl=null,Fu(e,s,c,l)}}Au(),o=Gl;break}catch(t){wu(e,t)}while(1);return t&&e.shellSuspendCounter++,qi=Ki=null,q=r,w.H=i,w.A=a,J===null&&(Rl=null,Y=0,ei()),o}function Au(){for(;J!==null;)Nu(J)}function ju(e,t){var n=q;q|=2;var r=Eu(),i=Du();Rl!==e||Y!==t?(ru=null,nu=Re()+500,Cu(e,t)):Hl=it(e,t);a:do try{if(zl!==0&&J!==null){t=J;var a=Bl;b:switch(zl){case 1:zl=0,Bl=null,Fu(e,t,a,1);break;case 2:case 9:if(Ea(a)){zl=0,Bl=null,Pu(t);break}t=function(){zl!==2&&zl!==9||Rl!==e||(zl=7),ad(e)},a.then(t,t);break a;case 3:zl=7;break a;case 4:zl=5;break a;case 7:Ea(a)?(zl=0,Bl=null,Pu(t)):(zl=0,Bl=null,Fu(e,t,a,7));break;case 5:var o=null;switch(J.tag){case 26:o=J.memoizedState;case 5:case 27:var c=J;if(o?Kf(o):c.stateNode.complete){zl=0,Bl=null;var l=c.sibling;if(l!==null)J=l;else{var u=c.return;u===null?J=null:(J=u,Iu(u))}break b}}zl=0,Bl=null,Fu(e,t,a,5);break;case 6:zl=0,Bl=null,Fu(e,t,a,6);break;case 8:Su(),Gl=6;break a;default:throw Error(s(462))}}Mu();break}catch(t){wu(e,t)}while(1);return qi=Ki=null,w.H=r,w.A=i,q=n,J===null?(Rl=null,Y=0,ei(),Gl):0}function Mu(){for(;J!==null&&!Ie();)Nu(J)}function Nu(e){var t=jc(e.alternate,e,Wl);e.memoizedProps=e.pendingProps,t===null?Iu(e):J=t}function Pu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=hc(n,t,t.pendingProps,t.type,void 0,Y);break;case 11:t=hc(n,t,t.pendingProps,t.type.render,t.ref,Y);break;case 5:ko(t);default:zc(n,t),t=J=di(t,Wl),t=jc(n,t,Wl)}e.memoizedProps=e.pendingProps,t===null?Iu(e):J=t}function Fu(e,t,n,r){qi=Ki=null,ko(t),Ma=null,Na=0;var i=t.return;try{if(ec(e,i,t,n,Y)){Gl=1,Ys(e,vi(n,e.current)),J=null;return}}catch(t){if(i!==null)throw J=i,t;Gl=1,Ys(e,vi(n,e.current)),J=null;return}t.flags&32768?(z||r===1?e=!0:Hl||Y&536870912?e=!1:(Vl=e=!0,(r===2||r===9||r===3||r===6)&&(r=no.current,r!==null&&r.tag===13&&(r.flags|=16384))),Lu(t,e)):Iu(t)}function Iu(e){var t=e;do{if(t.flags&32768){Lu(t,Vl);return}e=t.return;var n=Lc(t.alternate,t,Wl);if(n!==null){J=n;return}if(t=t.sibling,t!==null){J=t;return}J=t=e}while(t!==null);Gl===0&&(Gl=5)}function Lu(e,t){do{var n=Rc(e.alternate,e);if(n!==null){n.flags&=32767,J=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){J=e;return}J=e=n}while(e!==null);Gl=6,J=null}function Ru(e,t,n,r,i,a,o,c,l){e.cancelPendingCommit=null;do Uu();while(au!==0);if(q&6)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,a|=$r,lt(e,n,a,o,c,l),e===Rl&&(J=Rl=null,Y=0),su=t,ou=e,cu=n,lu=a,uu=i,du=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Qu(He,function(){return Wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=w.T,w.T=null,i=T.p,T.p=2,o=q,q|=4;try{il(e,t,n)}finally{q=o,T.p=i,w.T=r}}au=1,zu(),Bu(),Vu()}}function zu(){if(au===1){au=0;var e=ou,t=su,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=q;q|=4;try{gl(t,e);var a=Hd,o=kr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&I(s.ownerDocument.documentElement,s)){if(c!==null&&Ar(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Or(s,h),v=Or(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}lp=!!Vd,Hd=Vd=null}finally{q=i,T.p=r,w.T=n}}e.current=t,au=2}}function Bu(){if(au===2){au=0;var e=ou,t=su,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=q;q|=4;try{al(e,t.alternate,t)}finally{q=i,T.p=r,w.T=n}}au=3}}function Vu(){if(au===4||au===3){au=0,Le();var e=ou,t=su,n=cu,r=du;t.subtreeFlags&10256||t.flags&10256?au=5:(au=0,su=ou=null,Hu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(iu=null),mt(n),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot==`function`)try{qe.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=w.T,i=T.p,T.p=2,w.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{w.T=t,T.p=i}}cu&3&&Uu(),ad(e),i=e.pendingLanes,n&261930&&i&42?e===pu?fu++:(fu=0,pu=e):fu=0,od(0,!1)}}function Hu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,la(t)))}function Uu(){return zu(),Bu(),Vu(),Wu()}function Wu(){if(au!==5)return!1;var e=ou,t=lu;lu=0;var n=mt(cu),r=w.T,i=T.p;try{T.p=32>n?32:n,w.T=null,n=uu,uu=null;var a=ou,o=cu;if(au=0,su=ou=null,cu=0,q&6)throw Error(s(331));var c=q;if(q|=4,Nl(a.current),Tl(a,a.current,o,n),q=c,od(0,!1),qe&&typeof qe.onPostCommitFiberRoot==`function`)try{qe.onPostCommitFiberRoot(Ke,a)}catch{}return!0}finally{T.p=i,w.T=r,Hu(e,t)}}function Gu(e,t,n){t=vi(n,t),t=Zs(e.stateNode,t,2),e=Wa(e,t,2),e!==null&&(ct(e,2),ad(e))}function Ku(e,t,n){if(e.tag===3)Gu(e,e,n);else for(;t!==null;){if(t.tag===3){Gu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(iu===null||!iu.has(r))){e=vi(n,e),n=Qs(2),r=Wa(t,n,2),r!==null&&($s(n,r,t,e),ct(r,2),ad(r));break}}t=t.return}}function qu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ll;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Ul=!0,i.add(n),e=Ju.bind(null,e,t,n),t.then(e,e))}function Ju(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rl===e&&(Y&n)===n&&(Gl===4||Gl===3&&(Y&62914560)===Y&&300>Re()-eu?!(q&2)&&Cu(e,0):Jl|=n,Xl===Y&&(Xl=0)),ad(e)}function Yu(e,t){t===0&&(t=ot()),e=ri(e,t),e!==null&&(ct(e,t),ad(e))}function Xu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yu(e,n)}function Zu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(t),Yu(e,n)}function Qu(e,t){return Pe(e,t)}var $u=null,ed=null,td=!1,nd=!1,rd=!1,id=0;function ad(e){e!==ed&&e.next===null&&(ed===null?$u=ed=e:ed=ed.next=e),nd=!0,td||(td=!0,fd())}function od(e,t){if(!rd&&nd){rd=!0;do for(var n=!1,r=$u;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ye(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,dd(r,a))}else a=Y,a=rt(r,r===Rl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||it(r,a)||(n=!0,dd(r,a));r=r.next}while(n);rd=!1}}function sd(){cd()}function cd(){nd=td=!1;var e=0;id!==0&&Jd()&&(e=id);for(var t=Re(),n=null,r=$u;r!==null;){var i=r.next,a=ld(r,t);a===0?(r.next=null,n===null?$u=i:n.next=i,i===null&&(ed=n)):(n=r,(e!==0||a&3)&&(nd=!0)),r=i}au!==0&&au!==5||od(e,!1),id!==0&&(id=0)}function ld(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ye(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=at(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Rl,n=Y,n=rt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(zl===2||zl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Fe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||it(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Fe(r),mt(n)){case 2:case 8:n=Ve;break;case 32:n=He;break;case 268435456:n=Ue;break;default:n=He}return r=ud.bind(null,e),n=Pe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Fe(r),e.callbackPriority=2,e.callbackNode=null,2}function ud(e,t){if(au!==0&&au!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Uu()&&e.callbackNode!==n)return null;var r=Y;return r=rt(e,e===Rl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(_u(e,r,t),ld(e,Re()),e.callbackNode!=null&&e.callbackNode===n?ud.bind(null,e):null)}function dd(e,t){if(Uu())return null;_u(e,t,!0)}function fd(){Qd(function(){q&6?Pe(Be,sd):cd()})}function pd(){if(id===0){var e=fa;e===0&&(e=$e,$e<<=1,!($e&261888)&&($e=256)),id=e}return id}function md(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:un(``+e)}function hd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function gd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=md((i[yt]||null).action),o=r.submitter;o&&(t=(t=o[yt]||null)?md(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new Mn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(id!==0){var e=o?hd(i,o):new FormData(i);Cs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?hd(i,o):new FormData(i),Cs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var _d=0;_d<Yr.length;_d++){var vd=Yr[_d];Xr(vd.toLowerCase(),`on`+(vd[0].toUpperCase()+vd.slice(1)))}Xr(Vr,`onAnimationEnd`),Xr(Hr,`onAnimationIteration`),Xr(Ur,`onAnimationStart`),Xr(`dblclick`,`onDoubleClick`),Xr(`focusin`,`onFocus`),Xr(`focusout`,`onBlur`),Xr(Wr,`onTransitionRun`),Xr(Gr,`onTransitionStart`),Xr(Kr,`onTransitionCancel`),Xr(qr,`onTransitionEnd`),Ft(`onMouseEnter`,[`mouseout`,`mouseover`]),Ft(`onMouseLeave`,[`mouseout`,`mouseover`]),Ft(`onPointerEnter`,[`pointerout`,`pointerover`]),Ft(`onPointerLeave`,[`pointerout`,`pointerover`]),Pt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Pt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Pt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Pt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Pt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Pt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var yd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),bd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(yd));function xd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Zr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Zr(e)}i.currentTarget=null,a=c}}}}function X(e,t){var n=t[xt];n===void 0&&(n=t[xt]=new Set);var r=e+`__bubble`;n.has(r)||(Td(t,e,2,!1),n.add(r))}function Sd(e,t,n){var r=0;t&&(r|=4),Td(n,e,r,t)}var Cd=`_reactListening`+Math.random().toString(36).slice(2);function wd(e){if(!e[Cd]){e[Cd]=!0,Mt.forEach(function(t){t!==`selectionchange`&&(bd.has(t)||Sd(t,!1,e),Sd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cd]||(t[Cd]=!0,Sd(`selectionchange`,!1,t))}}function Td(e,t,n,r){switch(gp(t)){case 2:var i=up;break;case 8:i=dp;break;default:i=fp}n=i.bind(null,t,n,e),i=void 0,!xn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Ed(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;s!==null;){if(o=Dt(s),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){r=a=o;continue a}s=s.parentNode}}r=r.return}vn(function(){var r=a,i=pn(n),o=[];a:{var s=Jr.get(e);if(s!==void 0){var c=Mn,u=e;switch(e){case`keypress`:if(Dn(n)===0)break a;case`keydown`:case`keyup`:c=k;break;case`focusin`:u=`focus`,c=Vn;break;case`focusout`:u=`blur`,c=Vn;break;case`beforeblur`:case`afterblur`:c=Vn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:c=zn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:c=Bn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:c=A;break;case Vr:case Hr:case Ur:c=Hn;break;case qr:c=j;break;case`scroll`:case`scrollend`:c=Pn;break;case`wheel`:c=M;break;case`copy`:case`cut`:case`paste`:c=Un;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:c=Yn;break;case`toggle`:case`beforetoggle`:c=N}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?s===null?null:s+`Capture`:s;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=yn(m,p),g!=null&&d.push(Dd(m,g,h))),f)break;m=m.return}0<d.length&&(s=new c(s,u,null,n,i),o.push({event:s,listeners:d}))}}if(!(t&7)){a:{if(s=e===`mouseover`||e===`pointerover`,c=e===`mouseout`||e===`pointerout`,s&&n!==fn&&(u=n.relatedTarget||n.fromElement)&&(Dt(u)||u[bt]))break a;if((c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(u=n.relatedTarget||n.toElement,c=r,u=u?Dt(u):null,u!==null&&(f=l(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(c=null,u=r),c!==u)){if(d=zn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Yn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=c==null?s:kt(c),h=u==null?s:kt(u),s=new d(g,m+`leave`,c,n,i),s.target=f,s.relatedTarget=h,g=null,Dt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,c&&u)b:{for(d=kd,p=c,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;c!==null&&Ad(o,s,c,d,!1),u!==null&&f!==null&&Ad(o,f,u,d,!0)}}a:{if(s=r?kt(r):window,c=s.nodeName&&s.nodeName.toLowerCase(),c===`select`||c===`input`&&s.type===`file`)var v=mr;else if(cr(s))if(hr)v=Cr;else{v=xr;var y=br}else c=s.nodeName,!c||c.toLowerCase()!==`input`||s.type!==`checkbox`&&s.type!==`radio`?r&&sn(r.elementType)&&(v=mr):v=Sr;if(v&&=v(e,r)){lr(o,v,n,i);break a}y&&y(e,s,r),e===`focusout`&&r&&s.type===`number`&&r.memoizedProps.value!=null&&Qt(s,`number`,s.value)}switch(y=r?kt(r):window,e){case`focusin`:(cr(y)||y.contentEditable===`true`)&&(Mr=y,Nr=r,Pr=null);break;case`focusout`:Pr=Nr=Mr=null;break;case`mousedown`:Fr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Fr=!1,Ir(o,n,i);break;case`selectionchange`:if(jr)break;case`keydown`:case`keyup`:Ir(o,n,i)}var b;if(Zn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else ar?rr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(er&&n.locale!==`ko`&&(ar||x!==`onCompositionStart`?x===`onCompositionEnd`&&ar&&(b=En()):(Cn=i,wn=`value`in Cn?Cn.value:Cn.textContent,ar=!0)),y=Od(r,x),0<y.length&&(x=new Wn(x,e,null,n,i),o.push({event:x,listeners:y}),b?x.data=b:(b=ir(n),b!==null&&(x.data=b)))),(b=$n?or(e,n):P(e,n))&&(x=Od(r,`onBeforeInput`),0<x.length&&(y=new Wn(`onBeforeInput`,`beforeinput`,null,n,i),o.push({event:y,listeners:x}),y.data=b)),gd(o,e,r,n,i)}xd(o,t)})}function Dd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Od(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=yn(e,n),i!=null&&r.unshift(Dd(e,i,a)),i=yn(e,t),i!=null&&r.push(Dd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function kd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ad(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=yn(n,a),l!=null&&o.unshift(Dd(n,l,c))):i||(l=yn(n,a),l!=null&&o.push(Dd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var jd=/\r\n?/g,Md=/\u0000|\uFFFD/g;function Nd(e){return(typeof e==`string`?e:``+e).replace(jd,`
`).replace(Md,``)}function Pd(e,t){return t=Nd(t),Nd(e)===t}function Fd(e,t,n,r,i,a){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||nn(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&nn(e,``+r);break;case`className`:Vt(e,`class`,r);break;case`tabIndex`:Vt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Vt(e,n,r);break;case`style`:on(e,r,a);break;case`data`:if(t!==`object`){Vt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=un(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof a==`function`&&(n===`formAction`?(t!==`input`&&Fd(e,t,`name`,i.name,i,null),Fd(e,t,`formEncType`,i.formEncType,i,null),Fd(e,t,`formMethod`,i.formMethod,i,null),Fd(e,t,`formTarget`,i.formTarget,i,null)):(Fd(e,t,`encType`,i.encType,i,null),Fd(e,t,`method`,i.method,i,null),Fd(e,t,`target`,i.target,i,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=un(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=dn);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=un(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:X(`beforetoggle`,e),X(`toggle`,e),Bt(e,`popover`,r);break;case`xlinkActuate`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Bt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=cn.get(n)||n,Bt(e,n,r))}}function Id(e,t,n,r,i,a){switch(n){case`style`:on(e,r,a);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?nn(e,r):(typeof r==`number`||typeof r==`bigint`)&&nn(e,``+r);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=dn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Nt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(i=n.endsWith(`Capture`),t=n.slice(2,i?n.length-7:void 0),a=e[yt]||null,a=a==null?null:a[n],typeof a==`function`&&e.removeEventListener(t,a,i),typeof r==`function`)){typeof a!=`function`&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Bt(e,n,r)}}}function Ld(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:X(`error`,e),X(`load`,e);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o!=null)switch(a){case`src`:r=!0;break;case`srcSet`:i=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:Fd(e,t,a,o,n,null)}}i&&Fd(e,t,`srcSet`,n.srcSet,n,null),r&&Fd(e,t,`src`,n.src,n,null);return;case`input`:X(`invalid`,e);var c=a=o=i=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:i=d;break;case`type`:o=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:a=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(s(137,t));break;default:Fd(e,t,r,d,n,null)}}Zt(e,a,c,l,u,o,i,!1);return;case`select`:for(i in X(`invalid`,e),r=o=a=null,n)if(n.hasOwnProperty(i)&&(c=n[i],c!=null))switch(i){case`value`:a=c;break;case`defaultValue`:o=c;break;case`multiple`:r=c;default:Fd(e,t,i,c,n,null)}t=a,n=o,e.multiple=!!r,t==null?n!=null&&$t(e,!!r,n,!0):$t(e,!!r,t,!1);return;case`textarea`:for(o in X(`invalid`,e),a=i=r=null,n)if(n.hasOwnProperty(o)&&(c=n[o],c!=null))switch(o){case`value`:r=c;break;case`defaultValue`:i=c;break;case`children`:a=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(s(91));break;default:Fd(e,t,o,c,n,null)}tn(e,r,i,a);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Fd(e,t,l,r,n,null)}return;case`dialog`:X(`beforetoggle`,e),X(`toggle`,e),X(`cancel`,e),X(`close`,e);break;case`iframe`:case`object`:X(`load`,e);break;case`video`:case`audio`:for(r=0;r<yd.length;r++)X(yd[r],e);break;case`image`:X(`error`,e),X(`load`,e);break;case`details`:X(`toggle`,e);break;case`embed`:case`source`:case`link`:X(`error`,e),X(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:Fd(e,t,u,r,n,null)}return;default:if(sn(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Id(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Fd(e,t,c,r,n,null))}function Rd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var i=null,a=null,o=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Fd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:a=m;break;case`name`:i=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:o=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(s(137,t));break;default:m!==f&&Fd(e,t,p,m,r,f)}}Xt(e,o,c,l,u,d,a,i);return;case`select`:for(a in m=o=c=p=null,n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(a)||Fd(e,t,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case`value`:p=a;break;case`defaultValue`:c=a;break;case`multiple`:o=a;default:a!==l&&Fd(e,t,i,a,r,l)}t=c,n=o,r=m,p==null?!!r!=!!n&&(t==null?$t(e,!!n,n?[]:``,!1):$t(e,!!n,t,!0)):$t(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(i=n[c],n.hasOwnProperty(c)&&i!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Fd(e,t,c,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(i!=null||a!=null))switch(o){case`value`:p=i;break;case`defaultValue`:m=i;break;case`children`:break;case`dangerouslySetInnerHTML`:if(i!=null)throw Error(s(91));break;default:i!==a&&Fd(e,t,o,i,r,a)}en(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Fd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Fd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Fd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(s(137,t));break;default:Fd(e,t,u,p,r,m)}return;default:if(sn(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Id(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Id(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Fd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Fd(e,t,f,p,r,m)}function zd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Bd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&zd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&zd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Vd=null,Hd=null;function Ud(e){return e.nodeType===9?e:e.ownerDocument}function Wd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Gd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Kd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qd=null;function Jd(){var e=window.event;return e&&e.type===`popstate`?e===qd?!1:(qd=e,!0):(qd=null,!1)}var Yd=typeof setTimeout==`function`?setTimeout:void 0,Xd=typeof clearTimeout==`function`?clearTimeout:void 0,Zd=typeof Promise==`function`?Promise:void 0,Qd=typeof queueMicrotask==`function`?queueMicrotask:Zd===void 0?Yd:function(e){return Zd.resolve(null).then(e).catch($d)};function $d(e){setTimeout(function(){throw e})}function ef(e){return e===`head`}function tf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Fp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)hf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,hf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Tt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&hf(e.ownerDocument.body);n=i}while(n);Fp(t)}function nf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function rf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:rf(n),Et(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function af(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[Tt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=df(e.nextSibling),e===null)break}return null}function of(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=df(e.nextSibling),e===null))return null;return e}function sf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=df(e.nextSibling),e===null))return null;return e}function cf(e){return e.data===`$?`||e.data===`$~`}function lf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function uf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function df(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var Z=null;function ff(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return df(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function pf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function mf(e,t,n){switch(t=Ud(n),e){case`html`:if(e=t.documentElement,!e)throw Error(s(452));return e;case`head`:if(e=t.head,!e)throw Error(s(453));return e;case`body`:if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Et(e)}var gf=new Map,_f=new Set;function vf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yf=T.d;T.d={f:bf,r:xf,D:wf,C:Tf,L:Ef,m:Df,X:kf,S:Of,M:Af};function bf(){var e=yf.f(),t=xu();return e||t}function xf(e){var t=Ot(e);t!==null&&t.tag===5&&t.type===`form`?Ts(t):yf.r(e)}var Sf=typeof document>`u`?null:document;function Cf(e,t,n){var r=Sf;if(r&&typeof t==`string`&&t){var i=Yt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),_f.has(i)||(_f.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Ld(t,`link`,e),jt(t),r.head.appendChild(t)))}}function wf(e){yf.D(e),Cf(`dns-prefetch`,e,null)}function Tf(e,t){yf.C(e,t),Cf(`preconnect`,e,t)}function Ef(e,t,n){yf.L(e,t,n);var r=Sf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Yt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Yt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Yt(n.imageSizes)+`"]`)):i+=`[href="`+Yt(e)+`"]`;var a=i;switch(t){case`style`:a=Mf(e);break;case`script`:a=If(e)}gf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),gf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Nf(a))||t===`script`&&r.querySelector(Lf(a))||(t=r.createElement(`link`),Ld(t,`link`,e),jt(t),r.head.appendChild(t)))}}function Df(e,t){yf.m(e,t);var n=Sf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Yt(r)+`"][href="`+Yt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=If(e)}if(!gf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),gf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Lf(a)))return}r=n.createElement(`link`),Ld(r,`link`,e),jt(r),n.head.appendChild(r)}}}function Of(e,t,n){yf.S(e,t,n);var r=Sf;if(r&&e){var i=At(r).hoistableStyles,a=Mf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Nf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=gf.get(a))&&Bf(e,n);var c=o=r.createElement(`link`);jt(c),Ld(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,zf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function kf(e,t){yf.X(e,t);var n=Sf;if(n&&e){var r=At(n).hoistableScripts,i=If(e),a=r.get(i);a||(a=n.querySelector(Lf(i)),a||(e=h({src:e,async:!0},t),(t=gf.get(i))&&Vf(e,t),a=n.createElement(`script`),jt(a),Ld(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Af(e,t){yf.M(e,t);var n=Sf;if(n&&e){var r=At(n).hoistableScripts,i=If(e),a=r.get(i);a||(a=n.querySelector(Lf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=gf.get(i))&&Vf(e,t),a=n.createElement(`script`),jt(a),Ld(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function jf(e,t,n,r){var i=(i=be.current)?vf(i):null;if(!i)throw Error(s(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Mf(n.href),n=At(i).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Mf(n.href);var a=At(i).hoistableStyles,o=a.get(e);if(o||(i=i.ownerDocument||i,o={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},a.set(e,o),(a=i.querySelector(Nf(e)))&&!a._p&&(o.instance=a,o.state.loading=5),gf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gf.set(e,n),a||Ff(i,e,n,o.state))),t&&r===null)throw Error(s(528,``));return o}if(t&&r!==null)throw Error(s(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=If(n),n=At(i).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Mf(e){return`href="`+Yt(e)+`"`}function Nf(e){return`link[rel="stylesheet"][`+e+`]`}function Pf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Ff(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Ld(t,`link`,n),jt(t),e.head.appendChild(t))}function If(e){return`[src="`+Yt(e)+`"]`}function Lf(e){return`script[async]`+e}function Rf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Yt(n.href)+`"]`);if(r)return t.instance=r,jt(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),jt(r),Ld(r,`style`,i),zf(r,n.precedence,e),t.instance=r;case`stylesheet`:i=Mf(n.href);var a=e.querySelector(Nf(i));if(a)return t.state.loading|=4,t.instance=a,jt(a),a;r=Pf(n),(i=gf.get(i))&&Bf(r,i),a=(e.ownerDocument||e).createElement(`link`),jt(a);var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Ld(a,`link`,r),t.state.loading|=4,zf(a,n.precedence,e),t.instance=a;case`script`:return a=If(n.src),(i=e.querySelector(Lf(a)))?(t.instance=i,jt(i),i):(r=n,(i=gf.get(a))&&(r=h({},n),Vf(r,i)),e=e.ownerDocument||e,i=e.createElement(`script`),jt(i),Ld(i,`link`,r),e.head.appendChild(i),t.instance=i);case`void`:return null;default:throw Error(s(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,zf(r,n.precedence,e));return t.instance}function zf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Bf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Vf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Hf=null;function Uf(e,t,n){if(Hf===null){var r=new Map,i=Hf=new Map;i.set(n,r)}else i=Hf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Tt]||a[vt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Wf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Gf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Kf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function qf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Mf(r.href),a=t.querySelector(Nf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Xf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,jt(a);return}a=t.ownerDocument||t,r=Pf(r),(i=gf.get(i))&&Bf(r,i),a=a.createElement(`link`),jt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Ld(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Xf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Jf=0;function Yf(e,t){return e.stylesheets&&e.count===0&&Qf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Qf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Jf===0&&(Jf=62500*Bd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Jf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Xf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zf=null;function Qf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zf=new Map,t.forEach($f,e),Zf=null,Xf.call(e))}function $f(e,t){if(!(t.state.loading&4)){var n=Zf.get(e);if(n)var r=n.get(null);else{n=new Map,Zf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Xf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var ep={$$typeof:ee,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function tp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=st(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.hiddenUpdates=st(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function np(e,t,n,r,i,a,o,s,c,l,u,d){return e=new tp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=ci(3,null,null,t),e.current=a,a.stateNode=e,t=ca(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Va(a),e}function rp(e){return e?(e=oi,e):oi}function ip(e,t,n,r,i,a){i=rp(i),r.context===null?r.context=i:r.pendingContext=i,r=Ua(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Wa(e,r,t),n!==null&&(gu(n,e,t),Ga(n,e,t))}function ap(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function op(e,t){ap(e,t),(e=e.alternate)&&ap(e,t)}function sp(e){if(e.tag===13||e.tag===31){var t=ri(e,67108864);t!==null&&gu(t,e,67108864),op(e,67108864)}}function cp(e){if(e.tag===13||e.tag===31){var t=mu();t=pt(t);var n=ri(e,t);n!==null&&gu(n,e,t),op(e,t)}}var lp=!0;function up(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=2,fp(e,t,n,r)}finally{T.p=a,w.T=i}}function dp(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=8,fp(e,t,n,r)}finally{T.p=a,w.T=i}}function fp(e,t,n,r){if(lp){var i=pp(r);if(i===null)Ed(e,t,r,mp,n),Tp(e,r);else if(Dp(i,e,t,n,r))r.stopPropagation();else if(Tp(e,r),t&4&&-1<wp.indexOf(e)){for(;i!==null;){var a=Ot(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=nt(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ye(o);s.entanglements[1]|=c,o&=~c}ad(a),!(q&6)&&(nu=Re()+500,od(0,!1))}}break;case 31:case 13:s=ri(a,2),s!==null&&gu(s,a,2),xu(),op(a,2)}if(a=pp(r),a===null&&Ed(e,t,r,mp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Ed(e,t,r,null,n)}}function pp(e){return e=pn(e),hp(e)}var mp=null;function hp(e){if(mp=null,e=Dt(e),e!==null){var t=l(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=u(t),e!==null)return e;e=null}else if(n===31){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return mp=e,null}function gp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(ze()){case Be:return 2;case Ve:return 8;case He:case E:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var _p=!1,vp=null,yp=null,bp=null,xp=new Map,Sp=new Map,Cp=[],wp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Tp(e,t){switch(e){case`focusin`:case`focusout`:vp=null;break;case`dragenter`:case`dragleave`:yp=null;break;case`mouseover`:case`mouseout`:bp=null;break;case`pointerover`:case`pointerout`:xp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Sp.delete(t.pointerId)}}function Ep(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ot(t),t!==null&&sp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Dp(e,t,n,r,i){switch(t){case`focusin`:return vp=Ep(vp,e,t,n,r,i),!0;case`dragenter`:return yp=Ep(yp,e,t,n,r,i),!0;case`mouseover`:return bp=Ep(bp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return xp.set(a,Ep(xp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Sp.set(a,Ep(Sp.get(a)||null,e,t,n,r,i)),!0}return!1}function Op(e){var t=Dt(e.target);if(t!==null){var n=l(t);if(n!==null){if(t=n.tag,t===13){if(t=u(n),t!==null){e.blockedOn=t,gt(e.priority,function(){cp(n)});return}}else if(t===31){if(t=d(n),t!==null){e.blockedOn=t,gt(e.priority,function(){cp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fn=r,n.target.dispatchEvent(r),fn=null}else return t=Ot(n),t!==null&&sp(t),e.blockedOn=n,!1;t.shift()}return!0}function Ap(e,t,n){kp(e)&&n.delete(t)}function jp(){_p=!1,vp!==null&&kp(vp)&&(vp=null),yp!==null&&kp(yp)&&(yp=null),bp!==null&&kp(bp)&&(bp=null),xp.forEach(Ap),Sp.forEach(Ap)}function Mp(e,n){e.blockedOn===n&&(e.blockedOn=null,_p||(_p=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jp)))}var Np=null;function Pp(e){Np!==e&&(Np=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Np===e&&(Np=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(hp(r||n)===null)continue;break}var a=Ot(n);a!==null&&(e.splice(t,3),t-=3,Cs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Fp(e){function t(t){return Mp(t,e)}vp!==null&&Mp(vp,e),yp!==null&&Mp(yp,e),bp!==null&&Mp(bp,e),xp.forEach(t),Sp.forEach(t);for(var n=0;n<Cp.length;n++){var r=Cp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Cp.length&&(n=Cp[0],n.blockedOn===null);)Op(n),n.blockedOn===null&&Cp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[yt]||null;if(typeof a==`function`)o||Pp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[yt]||null)s=o.formAction;else if(hp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Pp(n)}}}function Ip(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Lp(e){this._internalRoot=e}Rp.prototype.render=Lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current;ip(n,mu(),e,t,null,null)},Rp.prototype.unmount=Lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ip(e.current,2,null,e,null,null),xu(),t[bt]=null}};function Rp(e){this._internalRoot=e}Rp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ht();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cp.length&&t!==0&&t<Cp[n].priority;n++);Cp.splice(n,0,e),n===0&&Op(e)}};var zp=r.version;if(zp!==`19.2.3`)throw Error(s(527,zp,`19.2.3`));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(s(188)):(e=Object.keys(e).join(`,`),Error(s(268,e)));return e=p(t),e=e===null?null:m(e),e=e===null?null:e.stateNode,e};var Bp={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:w,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{Ke=Vp.inject(Bp),qe=Vp}catch{}}e.createRoot=function(e,t){if(!c(e))throw Error(s(299));var n=!1,r=``,i=Ks,a=qs,o=Js;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=np(e,1,!1,null,null,n,r,null,i,a,o,Ip),e[bt]=t.current,wd(e),new Lp(t)}})),c=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=s()}))(),l=n(),u=()=>void 0,d=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},f=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):f(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new m;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},m=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},h=function(e){let t=d(e);return p.encodeByteArray(t,!0)},g=function(e){return h(e).replace(/\./g,``)},_=function(e){try{return p.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function v(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var y=()=>v().__FIREBASE_DEFAULTS__,b=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},x=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&_(e[1]);return t&&JSON.parse(t)},S=()=>{try{return u()||y()||b()||x()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ee=e=>S()?.emulatorHosts?.[e],C=e=>{let t=ee(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},te=()=>S()?.config,ne=e=>S()?.[`_${e}`],re=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function ie(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function ae(e){return(await fetch(e,{credentials:`include`})).ok}function oe(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[g(JSON.stringify(n)),g(JSON.stringify(o)),``].join(`.`)}var se={};function ce(){let e={prod:[],emulator:[]};for(let t of Object.keys(se))se[t]?e.emulator.push(t):e.prod.push(t);return e}function le(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var ue=!1;function de(e,t){if(typeof window>`u`||typeof document>`u`||!ie(window.location.host)||se[e]===t||se[e]||ue)return;se[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=ce().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{ue=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=le(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function w(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function T(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function fe(){let e=S()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function pe(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function me(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function he(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function ge(){let e=w();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function _e(){return!fe()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function ve(){try{return typeof indexedDB==`object`}catch{return!1}}function ye(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var be=`FirebaseError`,xe=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=be,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}},Se=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Ce(i,n):`Error`;return new xe(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Ce(e,t){return e.replace(we,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var we=/\{\$([^}]+)}/g;function Te(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ee(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(De(n)&&De(a)){if(!Ee(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function De(e){return typeof e==`object`&&!!e}function Oe(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function ke(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ae(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function je(e,t){let n=new Me(e,t);return n.subscribe.bind(n)}var Me=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=Ne(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Pe),r.error===void 0&&(r.error=Pe),r.complete===void 0&&(r.complete=Pe);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ne(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Pe(){}function Fe(e){return e&&e._delegate?e._delegate:e}var Ie=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Le=`[DEFAULT]`,Re=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new re;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Be(e))try{this.getOrInitializeService({instanceIdentifier:Le})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Le){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Le){return this.instances.has(e)}getOptions(e=Le){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ze(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Le){return this.component?this.component.multipleInstances?e:Le:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function ze(e){return e===Le?void 0:e}function Be(e){return e.instantiationMode===`EAGER`}var Ve=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Re(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},He=[],E;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(E||={});var Ue={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},We=E.INFO,Ge={[E.DEBUG]:`log`,[E.VERBOSE]:`log`,[E.INFO]:`info`,[E.WARN]:`warn`,[E.ERROR]:`error`},Ke=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Ge[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},qe=class{constructor(e){this.name=e,this._logLevel=We,this._logHandler=Ke,this._userLogHandler=null,He.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in E))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Ue[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...e),this._logHandler(this,E.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...e),this._logHandler(this,E.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,E.INFO,...e),this._logHandler(this,E.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,E.WARN,...e),this._logHandler(this,E.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...e),this._logHandler(this,E.ERROR,...e)}},Je=(e,t)=>t.some(t=>e instanceof t),Ye,Xe;function Ze(){return Ye||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Qe(){return Xe||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var $e=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap;function it(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(ut(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&$e.set(t,e)}).catch(()=>{}),rt.set(t,e),t}function at(e){if(et.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});et.set(e,t)}var ot={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return et.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||tt.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ut(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function st(e){ot=e(ot)}function ct(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(dt(this),t,...n);return tt.set(r,t.sort?t.sort():[t]),ut(r)}:Qe().includes(e)?function(...t){return e.apply(dt(this),t),ut($e.get(this))}:function(...t){return ut(e.apply(dt(this),t))}}function lt(e){return typeof e==`function`?ct(e):(e instanceof IDBTransaction&&at(e),Je(e,Ze())?new Proxy(e,ot):e)}function ut(e){if(e instanceof IDBRequest)return it(e);if(nt.has(e))return nt.get(e);let t=lt(e);return t!==e&&(nt.set(e,t),rt.set(t,e)),t}var dt=e=>rt.get(e);function ft(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=ut(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(ut(o.result),e.oldVersion,e.newVersion,ut(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var pt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],mt=[`put`,`add`,`delete`,`clear`],ht=new Map;function gt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(ht.get(t))return ht.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=mt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return ht.set(t,a),a}st(e=>({...e,get:(t,n,r)=>gt(t,n)||e.get(t,n,r),has:(t,n)=>!!gt(t,n)||e.has(t,n)}));var _t=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(vt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function vt(e){return e.getComponent()?.type===`VERSION`}var yt=`@firebase/app`,bt=`0.14.7`,xt=new qe(`@firebase/app`),St=`@firebase/app-compat`,Ct=`@firebase/analytics-compat`,wt=`@firebase/analytics`,Tt=`@firebase/app-check-compat`,Et=`@firebase/app-check`,Dt=`@firebase/auth`,Ot=`@firebase/auth-compat`,kt=`@firebase/database`,At=`@firebase/data-connect`,jt=`@firebase/database-compat`,Mt=`@firebase/functions`,Nt=`@firebase/functions-compat`,Pt=`@firebase/installations`,Ft=`@firebase/installations-compat`,It=`@firebase/messaging`,Lt=`@firebase/messaging-compat`,Rt=`@firebase/performance`,zt=`@firebase/performance-compat`,Bt=`@firebase/remote-config`,Vt=`@firebase/remote-config-compat`,Ht=`@firebase/storage`,D=`@firebase/storage-compat`,Ut=`@firebase/firestore`,Wt=`@firebase/ai`,Gt=`@firebase/firestore-compat`,Kt=`firebase`,qt=`12.8.0`,Jt=`[DEFAULT]`,Yt={[yt]:`fire-core`,[St]:`fire-core-compat`,[wt]:`fire-analytics`,[Ct]:`fire-analytics-compat`,[Et]:`fire-app-check`,[Tt]:`fire-app-check-compat`,[Dt]:`fire-auth`,[Ot]:`fire-auth-compat`,[kt]:`fire-rtdb`,[At]:`fire-data-connect`,[jt]:`fire-rtdb-compat`,[Mt]:`fire-fn`,[Nt]:`fire-fn-compat`,[Pt]:`fire-iid`,[Ft]:`fire-iid-compat`,[It]:`fire-fcm`,[Lt]:`fire-fcm-compat`,[Rt]:`fire-perf`,[zt]:`fire-perf-compat`,[Bt]:`fire-rc`,[Vt]:`fire-rc-compat`,[Ht]:`fire-gcs`,[D]:`fire-gcs-compat`,[Ut]:`fire-fst`,[Gt]:`fire-fst-compat`,[Wt]:`fire-vertex`,"fire-js":`fire-js`,[Kt]:`fire-js-all`},Xt=new Map,Zt=new Map,Qt=new Map;function $t(e,t){try{e.container.addComponent(t)}catch(n){xt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function en(e){let t=e.name;if(Qt.has(t))return xt.debug(`There were multiple attempts to register component ${t}.`),!1;Qt.set(t,e);for(let t of Xt.values())$t(t,e);for(let t of Zt.values())$t(t,e);return!0}function tn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function nn(e){return e==null?!1:e.settings!==void 0}var rn=new Se(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),an=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ie(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rn.create(`app-deleted`,{appName:this._name})}},on=qt;function sn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:Jt,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw rn.create(`bad-app-name`,{appName:String(i)});if(n||=te(),!n)throw rn.create(`no-options`);let a=Xt.get(i);if(a){if(Ee(n,a.options)&&Ee(r,a.config))return a;throw rn.create(`duplicate-app`,{appName:i})}let o=new Ve(i);for(let e of Qt.values())o.addComponent(e);let s=new an(n,r,o);return Xt.set(i,s),s}function cn(e=Jt){let t=Xt.get(e);if(!t&&e===`[DEFAULT]`&&te())return sn();if(!t)throw rn.create(`no-app`,{appName:e});return t}function ln(e,t,n){let r=Yt[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xt.warn(e.join(` `));return}en(new Ie(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var un=`firebase-heartbeat-database`,dn=1,fn=`firebase-heartbeat-store`,pn=null;function mn(){return pn||=ft(un,dn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(fn)}catch(e){console.warn(e)}}}}).catch(e=>{throw rn.create(`idb-open`,{originalErrorMessage:e.message})}),pn}async function hn(e){try{let t=(await mn()).transaction(fn),n=await t.objectStore(fn).get(_n(e));return await t.done,n}catch(e){if(e instanceof xe)xt.warn(e.message);else{let t=rn.create(`idb-get`,{originalErrorMessage:e?.message});xt.warn(t.message)}}}async function gn(e,t){try{let n=(await mn()).transaction(fn,`readwrite`);await n.objectStore(fn).put(t,_n(e)),await n.done}catch(e){if(e instanceof xe)xt.warn(e.message);else{let t=rn.create(`idb-set`,{originalErrorMessage:e?.message});xt.warn(t.message)}}}function _n(e){return`${e.name}!${e.options.appId}`}var vn=1024,yn=30,bn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new Cn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=xn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>yn){let e=Tn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=xn(),{heartbeatsToSend:t,unsentEntries:n}=Sn(this._heartbeatsCache.heartbeats),r=g(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return xt.warn(e),``}}};function xn(){return new Date().toISOString().substring(0,10)}function Sn(e,t=vn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),wn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Cn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ve()?ye().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await hn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return gn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return gn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function wn(e){return g(JSON.stringify({version:2,heartbeats:e})).length}function Tn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function En(e){en(new Ie(`platform-logger`,e=>new _t(e),`PRIVATE`)),en(new Ie(`heartbeat`,e=>new bn(e),`PRIVATE`)),ln(yt,bt,e),ln(yt,bt,`esm2020`),ln(`fire-js`,``)}En(``),ln(`firebase`,`12.8.0`,`app`);var Dn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},On={},kn,An;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,An=On.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,kn=On.Integer=o}).apply(Dn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Dn);var jn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Mn={},Nn,Pn,Fn,In,Ln,Rn,zn,Bn;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof jn==`object`&&jn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=ee;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,ee=new v,C=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(te)}};function te(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ae(e){return/^[\s\xa0]*$/.test(e)}function oe(e,t){re.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(oe,re),oe.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var se=`closure_listenable_`+(Math.random()*1e6|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ce,this.da=this.fa=!1}function ue(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function de(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function w(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function T(e){let t={};for(let n in e)t[n]=e[n];return t}let fe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function pe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<fe.length;t++)n=fe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e){this.src=e,this.g={},this.h=0}me.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=ge(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new le(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function he(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(ue(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function ge(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var _e=`closure_lm_`+(Math.random()*1e6|0),ve={};function ye(e,t,n,r,i){if(r&&r.once)return Se(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ye(e,t[a],n,r,i);return null}return n=ke(n),e&&e[se]?e.J(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!1,r,i)}function be(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=De(e);if(c||(e[_e]=c=new me(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=xe(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Te(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function xe(){function e(n){return t.call(e.src,e.listener,n)}let t=Ee;return e}function Se(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)Se(e,t[a],n,r,i);return null}return n=ke(n),e&&e[se]?e.K(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!0,r,i)}function Ce(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ce(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ke(n),e&&e[se]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=ge(t,n,r,i),n>-1&&(ue(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=De(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ge(t,n,r,i)),(n=e>-1?t[e]:null)&&we(n))}function we(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[se])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Te(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=De(t))?(he(n,e),n.h==0&&(n.src=null,t[_e]=null)):ue(e)}}}function Te(e){return e in ve?ve[e]:ve[e]=`on`+e}function Ee(e,t){if(e.da)e=!0;else{t=new oe(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function De(e){return e=e[_e],e instanceof me?e:null}var Oe=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ke(e){return typeof e==`function`?e:(e[Oe]||(e[Oe]=function(t){return e.handleEvent(t)}),e[Oe])}function Ae(){ne.call(this),this.i=new me(this),this.M=this,this.G=null}d(Ae,ne),Ae.prototype[se]=!0,Ae.prototype.removeEventListener=function(e,t,n,r){Ce(this,e,t,n,r)};function je(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new re(t,e);else if(t instanceof re)t.target=t.target||e;else{var i=t;t=new re(r,e),pe(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Me(a,r,!0,t)&&i;if(a=t.g=e,i=Me(a,r,!0,t)&&i,i=Me(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Me(a,r,!1,t)&&i}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)ue(n[e]);delete e.g[t],e.h--}}this.G=null},Ae.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ae.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Me(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&he(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Ne(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Pe(e){e.g=Ne(()=>{e.g=null,e.i&&(e.i=!1,Pe(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Fe extends ne{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(e){ne.call(this),this.h=e,this.g={}}d(Ie,ne);var Le=[];function Re(e){de(e.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},e),e.g={}}Ie.prototype.N=function(){Ie.Z.N.call(this),Re(this)},Ie.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var ze=o.JSON.stringify,Be=o.JSON.parse,Ve=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function He(){}function E(){}var Ue={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function We(){re.call(this,`d`)}d(We,re);function Ge(){re.call(this,`c`)}d(Ge,re);var Ke={},qe=null;function Je(){return qe||=new Ae}Ke.Ia=`serverreachability`;function Ye(e){re.call(this,Ke.Ia,e)}d(Ye,re);function Xe(e){let t=Je();je(t,new Ye(t))}Ke.STAT_EVENT=`statevent`;function Ze(e,t){re.call(this,Ke.STAT_EVENT,e),this.stat=t}d(Ze,re);function Qe(e){let t=Je();je(t,new Ze(t,e))}Ke.Ja=`timingevent`;function $e(e,t){re.call(this,Ke.Ja,e),this.size=t}d($e,re);function et(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function nt(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function rt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function it(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+ot(e,n)+(r?` `+r:``)})}function at(e,t){e.info(function(){return`TIMEOUT: `+t})}tt.prototype.info=function(){};function ot(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return ze(a)}catch{return t}}var st={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ct={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},lt;function ut(){}d(ut,He),ut.prototype.g=function(){return new XMLHttpRequest},lt=new ut;function dt(e){return encodeURIComponent(String(e))}function ft(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function pt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mt}function mt(){this.i=null,this.g=``,this.h=!1}var ht={},gt={};function _t(e,t,n){e.M=1,e.A=Ut(zt(t)),e.u=n,e.R=!0,vt(e,null)}function vt(e,t){e.F=Date.now(),St(e),e.B=zt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),rn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new mt,e.g=$n(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Fe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Le[0]=i.toString()),i=Le);for(let e=0;e<i.length;e++){let a=ye(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?T(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Xe(),nt(e.i,e.v,e.B,e.l,e.S,e.u)}pt.prototype.ba=function(e){e=e.target;let t=this.O;t&&En(e)==3?t.j():this.Y(e)},pt.prototype.Y=function(e){try{if(e==this.g)a:{let s=En(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Dn(this.g)))){this.K||s!=4||c==7||Xe(c==8||l<=0?3:2),wt(this);var t=this.g.ca();this.X=t;var n=yt(this);if(this.o=t==200,rt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ae(r)){var a=r;break b}}a=null}if(e=a)it(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Dt(this,e);else{this.o=!1,this.m=3,Qe(12),Et(this),Tt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=xt(this,n),t==gt){s==4&&(this.m=4,Qe(14),e=!1),it(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ht){this.m=4,Qe(15),it(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else it(this.i,this.l,t,null),Dt(this,t);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Qe(16),e=!1),this.o=this.o&&e,!e)it(this.i,this.l,n,`[Invalid Chunked Response]`),Et(this),Tt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Yn(o),o.P=!0,Qe(11))}}else it(this.i,this.l,n,null),Dt(this,n);s==4&&Et(this),this.o&&!this.K&&(s==4?M(this.j,this):(this.o=!1,St(this)))}else On(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),Et(this),Tt(this)}}}catch{}};function yt(e){if(!bt(e))return e.g.la();let t=Dn(e.g);if(t===``)return``;let n=``,r=t.length,i=En(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Et(e),Tt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function bt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function xt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?gt:(n=Number(t.substring(n,r)),isNaN(n)?ht:(r+=1,r+n>t.length?gt:(t=t.slice(r,r+n),e.C=r+n,t)))}pt.prototype.cancel=function(){this.K=!0,Et(this)};function St(e){e.T=Date.now()+e.H,Ct(e,e.H)}function Ct(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=et(l(e.aa,e),t)}function wt(e){e.D&&=(o.clearTimeout(e.D),null)}pt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(at(this.i,this.B),this.M!=2&&(Xe(),Qe(17)),Et(this),this.m=2,Tt(this)):Ct(this,this.T-e)};function Tt(e){e.j.I==0||e.K||M(e.j,e)}function Et(e){wt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Re(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Dt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||Mt(n.h,e))){if(!e.L&&Mt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)j(n),Hn(n);else break a;k(n),Qe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=et(l(n.Va,n),6e3));jt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Xn(n,11)}else if((e.L||n.g==e)&&j(n),!ae(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Nt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,D(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=Qn(r,r.L?r.ba:null,r.W),o.L){Pt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(wt(s),St(s)),r.g=o}else Jn(r);n.i.length>0&&Wn(n)}else l[0]!=`stop`&&l[0]!=`close`||Xn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Xn(n,7):Vn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Xe(4)}catch{}}var Ot=class{constructor(e,t){this.g=e,this.map=t}};function kt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function At(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function jt(e){return e.h?1:e.g?e.g.size:0}function Mt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Nt(e,t){e.g?e.g.add(t):e.h=t}function Pt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}kt.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Ft(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var It=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Lt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Rt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Rt?(this.l=e.l,Bt(this,e.j),this.o=e.o,this.g=e.g,Vt(this,e.u),this.h=e.h,Ht(this,an(e.i)),this.m=e.m):e&&(t=String(e).match(It))?(this.l=!1,Bt(this,t[1]||``,!0),this.o=Wt(t[2]||``),this.g=Wt(t[3]||``,!0),Vt(this,t[4]),this.h=Wt(t[5]||``,!0),Ht(this,t[6]||``,!0),this.m=Wt(t[7]||``)):(this.l=!1,this.i=new Qt(null,this.l))}Rt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Gt(t,qt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Gt(t,qt,!0),`@`),e.push(dt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Gt(n,n.charAt(0)==`/`?Yt:Jt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Gt(n,Zt)),e.join(``)},Rt.prototype.resolve=function(e){let t=zt(this),n=!!e.j;n?Bt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Vt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Ht(t,an(e.i)):n=!!e.m,n&&(t.m=e.m),t};function zt(e){return new Rt(e)}function Bt(e,t,n){e.j=n?Wt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Vt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Ht(e,t,n){t instanceof Qt?(e.i=t,sn(e.i,e.l)):(n||(t=Gt(t,Xt)),e.i=new Qt(t,e.l))}function D(e,t,n){e.i.set(t,n)}function Ut(e){return D(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Gt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Kt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var qt=/[#\/\?@]/g,Jt=/[#\?:]/g,Yt=/[#\?]/g,Xt=/[#\?@]/g,Zt=/#/g;function Qt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $t(e){e.g||(e.g=new Map,e.h=0,e.i&&Lt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Qt.prototype,e.add=function(e,t){$t(this),this.i=null,e=on(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function en(e,t){$t(e),t=on(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tn(e,t){return $t(e),t=on(e,t),e.g.has(t)}e.forEach=function(e,t){$t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function nn(e,t){$t(e);let n=[];if(typeof t==`string`)tn(e,t)&&(n=n.concat(e.g.get(on(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return $t(this),this.i=null,e=on(this,e),tn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=nn(this,e),e.length>0?String(e[0]):t):t};function rn(e,t,n){en(e,t),n.length>0&&(e.i=null,e.g.set(on(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=dt(n);n=nn(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+dt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function an(e){let t=new Qt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function on(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function sn(e,t){t&&!e.j&&($t(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(en(this,t),rn(this,n,e))},e)),e.j=t}function cn(e,t){let n=new tt;if(o.Image){let r=new Image;r.onload=u(un,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(un,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(un,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(un,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function ln(e,t){let n=new tt,r=new AbortController,i=setTimeout(()=>{r.abort(),un(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?un(n,`TestPingServer: ok`,!0,t):un(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),un(n,`TestPingServer: error`,!1,t)})}function un(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function dn(){this.g=new Ve}function fn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(fn,He),fn.prototype.g=function(){return new pn(this.i,this.h)};function pn(e,t){Ae.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(pn,Ae),e=pn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,gn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;mn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function mn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hn(this):gn(this),this.readyState==3&&mn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,hn(this))},e.Na=function(e){this.g&&(this.response=e,hn(this))},e.ga=function(){this.g&&hn(this)};function hn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,gn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function gn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(pn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function _n(e){let t=``;return de(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function vn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=_n(n),typeof e==`string`||D(e,t,n))}function yn(e){Ae.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(yn,Ae);var bn=/^https?$/i,xn=[`POST`,`PUT`];e=yn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lt.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){Sn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(xn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){Sn(this,e)}};function Sn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Cn(e),Tn(e)}function Cn(e){e.A||(e.A=!0,je(e,`complete`),je(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,je(this,`complete`),je(this,`abort`),Tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),yn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?wn(this):this.Xa())},e.Xa=function(){wn(this)};function wn(e){if(e.h&&a!==void 0){if(e.v&&En(e)==4)setTimeout(e.Ca.bind(e),0);else if(je(e,`readystatechange`),En(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(It)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!bn.test(t?t.toLowerCase():``)}n=r}if(n)je(e,`complete`),je(e,`success`);else{e.o=6;try{var i=En(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,Cn(e)}}finally{Tn(e)}}}}function Tn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||je(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function En(e){return e.g?e.g.readyState:0}e.ca=function(){try{return En(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Be(t)}};function Dn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function On(e){let t={};e=(e.g&&En(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ae(e[r]))continue;var n=ft(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}w(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function kn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function An(e){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kn(`baseRetryDelayMs`,5e3,e),this.Za=kn(`retryDelaySeedMs`,1e4,e),this.Ta=kn(`forwardChannelMaxRetries`,2,e),this.va=kn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new kt(e&&e.concurrentRequestLimit),this.Ba=new dn,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=An.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Qe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=Qn(this,null,this.W),Wn(this)};function Vn(e){if(Un(e),e.I==3){var t=e.V++,n=zt(e.J);if(D(n,`SID`,e.M),D(n,`RID`,t),D(n,`TYPE`,`terminate`),Kn(e,n),t=new pt(e,e.j,t),t.M=2,t.A=Ut(zt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=$n(t.j,null),t.g.ea(t.A)),t.F=Date.now(),St(t)}Zn(e)}function Hn(e){e.g&&=(Yn(e),e.g.cancel(),null)}function Un(e){Hn(e),e.v&&=(o.clearTimeout(e.v),null),j(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Wn(e){if(!At(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||C(),S||=(x(),!0),ee.add(t,e),e.D=0}}function Gn(e,t){return jt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=et(l(e.Ea,e,t),N(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new pt(this,this.j,e),a=this.o;if(this.U&&(a?(a=T(a),pe(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=qn(this,i,t),n=zt(this.J),D(n,`RID`,e),D(n,`CVER`,22),this.G&&D(n,`X-HTTP-Session-Id`,this.G),Kn(this,n),a&&(this.R?t=`headers=`+dt(_n(a))+`&`+t:this.u&&vn(n,this.u,a)),Nt(this.h,i),this.Ra&&D(n,`TYPE`,`init`),this.S?(D(n,`$req`,t),D(n,`SID`,`null`),i.U=!0,_t(i,n,null)):_t(i,n,t),this.I=2}}else this.I==3&&(e?O(this,e):this.i.length==0||At(this.h)||O(this))};function O(e,t){var n=t?t.l:e.V++;let r=zt(e.J);D(r,`SID`,e.M),D(r,`RID`,n),D(r,`AID`,e.K),Kn(e,r),e.u&&e.o&&vn(r,e.u,e.o),n=new pt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=qn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Nt(e.h,n),_t(n,r,t)}function Kn(e,t){e.H&&de(e.H,function(e,n){D(t,n,e)}),e.l&&de({},function(e,n){D(t,n,e)})}function qn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=ze(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Jn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||C(),S||=(x(),!0),ee.add(t,e),e.A=0}}function k(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=et(l(e.Da,e),N(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=et(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Qe(10),Hn(this),A(this))};function Yn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function A(e){e.g=new pt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=zt(e.na);D(t,`RID`,`rpc`),D(t,`SID`,e.M),D(t,`AID`,e.K),D(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&D(t,`TO`,e.ia),D(t,`TYPE`,`xmlhttp`),Kn(e,t),e.u&&e.o&&vn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Ut(zt(t)),n.u=null,n.R=!0,vt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,Hn(this),k(this),Qe(19))};function j(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function M(e,t){var n=null;if(e.g==t){j(e),Yn(e),e.g=null;var r=2}else if(Mt(e.h,t))n=t.G,Pt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Je(),je(r,new $e(r,n)),Wn(e)}else Jn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Gn(e,t)||r==2&&k(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Xn(e,5);break;case 4:Xn(e,10);break;case 3:Xn(e,6);break;default:Xn(e,2)}}}function N(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Xn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Rt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Bt(r,`https`),Ut(r),t?cn(r.toString(),n):ln(r.toString(),n)}else Qe(2);e.I=0,e.l&&e.l.pa(t),Zn(e),Un(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Qe(2)):(this.j.info(`Failed to ping google.com`),Qe(1))};function Zn(e){if(e.I=0,e.ja=[],e.l){let t=Ft(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function Qn(e,t,n){var r=n instanceof Rt?zt(n):new Rt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Vt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Rt(null);r&&Bt(e,r),t&&(e.g=t),i&&Vt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&D(r,n,t),D(r,`VER`,e.ka),Kn(e,r),r}function $n(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new yn(new fn({ab:n})):new yn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function er(){}e=er.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function tr(){}tr.prototype.g=function(e,t){return new nr(e,t)};function nr(e,t){Ae.call(this),this.g=new An(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ae(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ae(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new ar(this)}d(nr,Ae),nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){Vn(this.g)},nr.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=ze(e),e=n);t.i.push(new Ot(t.Ya++,e)),t.I==3&&Wn(t)},nr.prototype.N=function(){this.g.l=null,delete this.j,Vn(this.g),delete this.g,nr.Z.N.call(this)};function rr(e){We.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(rr,We);function ir(){Ge.call(this),this.status=1}d(ir,Ge);function ar(e){this.g=e}d(ar,er),ar.prototype.ra=function(){je(this.g,`a`)},ar.prototype.qa=function(e){je(this.g,new rr(e))},ar.prototype.pa=function(e){je(this.g,new ir)},ar.prototype.oa=function(){je(this.g,`b`)},tr.prototype.createWebChannel=tr.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,Bn=Mn.createWebChannelTransport=function(){return new tr},zn=Mn.getStatEventTarget=function(){return Je()},Rn=Mn.Event=Ke,Ln=Mn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,In=Mn.ErrorCode=st,ct.COMPLETE=`complete`,Fn=Mn.EventType=ct,E.EventType=Ue,Ue.OPEN=`a`,Ue.CLOSE=`b`,Ue.ERROR=`c`,Ue.MESSAGE=`d`,Ae.prototype.listen=Ae.prototype.J,Pn=Mn.WebChannel=E,Mn.FetchXmlHttpFactory=fn,yn.prototype.listenOnce=yn.prototype.K,yn.prototype.getLastError=yn.prototype.Ha,yn.prototype.getLastErrorCode=yn.prototype.ya,yn.prototype.getStatus=yn.prototype.ca,yn.prototype.getResponseJson=yn.prototype.La,yn.prototype.getResponseText=yn.prototype.la,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Fa,Nn=Mn.XhrIo=yn}).apply(jn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:jn);var Vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn(`google-credentials-uid`),Vn.FIRST_PARTY=new Vn(`first-party-uid`),Vn.MOCK_USER=new Vn(`mock-user`);var Hn=`12.8.0`;function Un(e){Hn=e}var Wn=new qe(`@firebase/firestore`);function Gn(){return Wn.logLevel}function O(e,...t){if(Wn.logLevel<=E.DEBUG){let n=t.map(Jn);Wn.debug(`Firestore (${Hn}): ${e}`,...n)}}function Kn(e,...t){if(Wn.logLevel<=E.ERROR){let n=t.map(Jn);Wn.error(`Firestore (${Hn}): ${e}`,...n)}}function qn(e,...t){if(Wn.logLevel<=E.WARN){let n=t.map(Jn);Wn.warn(`Firestore (${Hn}): ${e}`,...n)}}function Jn(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function k(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Yn(e,r,n)}function Yn(e,t,n){let r=`FIRESTORE (${Hn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Kn(r),Error(r)}function A(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Yn(t,i,r)}function j(e,t){return e}var M={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},N=class extends xe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Xn=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Zn=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Qn=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vn.UNAUTHENTICATED)))}shutdown(){}},$n=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},er=class{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){A(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xn,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{O(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(O(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Xn)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(A(typeof t.accessToken==`string`,31837,{l:t}),new Zn(t.accessToken,this.currentUser)):null:(O(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return A(e===null||typeof e==`string`,2055,{h:e}),new Vn(e)}},tr=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Vn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},nr=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new tr(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},rr=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},ir=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){A(this.o===void 0,3512);let n=e=>{e.error!=null&&O(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,O(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{O(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):O(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new rr(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(A(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new rr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ar(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var or=class{static newId(){let e=``;for(;e.length<20;){let t=ar(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function P(e,t){return e<t?-1:e>t?1:0}function sr(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return ur(n)===ur(i)?P(n,i):ur(n)?1:-1}return P(e.length,t.length)}var cr=55296,lr=57343;function ur(e){let t=e.charCodeAt(0);return t>=cr&&t<=lr}function dr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var fr=`__name__`,pr=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&k(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&k(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return P(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):sr(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return kn.fromString(e.substring(4,e.length-2))}},mr=class e extends pr{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new N(M.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},hr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gr=class e extends pr{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return hr.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([fr])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new N(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new N(M.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new N(M.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new N(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},F=class e{constructor(e){this.path=e}static fromPath(t){return new e(mr.fromString(t))}static fromName(t){return new e(mr.fromString(t).popFirst(5))}static empty(){return new e(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new mr(t.slice()))}};function _r(e,t,n){if(!n)throw new N(M.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function vr(e,t,n,r){if(!0===t&&!0===r)throw new N(M.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function yr(e){if(!F.isDocumentKey(e))throw new N(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function br(e){if(F.isDocumentKey(e))throw new N(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function xr(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Sr(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:k(12329,{type:typeof e})}function Cr(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new N(M.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Sr(e);throw new N(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function wr(e,t){let n={typeString:e};return t&&(n.value=t),n}function Tr(e,t){if(!xr(e))throw new N(M.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new N(M.INVALID_ARGUMENT,n);return!0}var Er=-62135596800,Dr=1e6,Or=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Dr))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new N(M.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Er||e>=253402300800)throw new N(M.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dr}_compareTo(e){return this.seconds===e.seconds?P(this.nanoseconds,e.nanoseconds):P(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Tr(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Er;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Or._jsonSchemaVersion=`firestore/timestamp/1.0`,Or._jsonSchema={type:wr(`string`,Or._jsonSchemaVersion),seconds:wr(`number`),nanoseconds:wr(`number`)};var I=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Or(0,0))}static max(){return new e(new Or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},kr=-1,Ar=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Ar.UNKNOWN_ID=-1;function jr(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Nr(I.fromTimestamp(r===1e9?new Or(n+1,0):new Or(n,r)),F.empty(),t)}function Mr(e){return new Nr(e.readTime,e.key,kr)}var Nr=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(I.min(),F.empty(),kr)}static max(){return new e(I.max(),F.empty(),kr)}};function Pr(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=F.comparator(e.documentKey,t.documentKey),n===0?P(e.largestBatchId,t.largestBatchId):n):n}var Fr=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Ir=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function Lr(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==Fr)throw e;O(`LocalStore`,`Unexpectedly lost primary lease`)}var L=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&k(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Rr(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function zr(e){return e.name===`IndexedDbTransactionError`}var Br=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Br.ce=-1;var Vr=-1;function Hr(e){return e==null}function Ur(e){return e===0&&1/e==-1/0}function Wr(e){return typeof e==`number`&&Number.isInteger(e)&&!Ur(e)&&e<=2**53-1&&e>=-(2**53-1)}var Gr=``;function Kr(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Jr(t)),t=qr(e.get(n),t);return Jr(t)}function qr(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Gr:n+=``;break;default:n+=r}}return n}function Jr(e){return e+Gr+``}function Yr(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xr(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Zr(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var R=class e{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qr(this.root,e,this.comparator,!0)}},Qr=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$r=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw k(43730,{key:this.key,value:this.value});if(this.right.isRed())throw k(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw k(27949);return e+(this.isRed()?0:1)}};$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw k(57766)}get value(){throw k(16141)}get color(){throw k(16727)}get left(){throw k(29726)}get right(){throw k(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ei=class e{constructor(e){this.comparator=e,this.data=new R(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ti(this.data.getIterator())}getIteratorFrom(e){return new ti(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},ti=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},ni=class e{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new e([])}unionWith(t){let n=new ei(gr.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},ri=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},ii=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new ri(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return P(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ii.EMPTY_BYTE_STRING=new ii(``);var ai=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(e){if(A(!!e,39018),typeof e==`string`){let t=0,n=ai.exec(e);if(A(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:si(e.seconds),nanos:si(e.nanos)}}function si(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function ci(e){return typeof e==`string`?ii.fromBase64String(e):ii.fromUint8Array(e)}var li=`server_timestamp`,ui=`__type__`,di=`__previous_value__`,fi=`__local_write_time__`;function pi(e){return(e?.mapValue?.fields||{})[ui]?.stringValue===li}function mi(e){let t=e.mapValue.fields[di];return pi(t)?mi(t):t}function hi(e){let t=oi(e.mapValue.fields[fi].timestampValue);return new Or(t.seconds,t.nanos)}var gi=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}},_i=`(default)`,vi=class e{constructor(e,t){this.projectId=e,this.database=t||_i}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===_i}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function yi(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new N(M.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new vi(e.options.projectId,t)}var bi=`__type__`,xi=`__max__`,Si={mapValue:{fields:{__type__:{stringValue:xi}}}},Ci=`__vector__`,wi=`value`;function Ti(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?pi(e)?4:Vi(e)?9007199254740991:zi(e)?10:11:k(28295,{value:e})}function Ei(e,t){if(e===t)return!0;let n=Ti(e);if(n!==Ti(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hi(e).isEqual(hi(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=oi(e.timestampValue),r=oi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ci(e.bytesValue).isEqual(ci(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return si(e.geoPointValue.latitude)===si(t.geoPointValue.latitude)&&si(e.geoPointValue.longitude)===si(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return si(e.integerValue)===si(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=si(e.doubleValue),r=si(t.doubleValue);return n===r?Ur(n)===Ur(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dr(e.arrayValue.values||[],t.arrayValue.values||[],Ei);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yr(n)!==Yr(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Ei(n[e],r[e])))return!1;return!0}(e,t);default:return k(52216,{left:e})}}function Di(e,t){return(e.values||[]).find((e=>Ei(e,t)))!==void 0}function Oi(e,t){if(e===t)return 0;let n=Ti(e),r=Ti(t);if(n!==r)return P(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return P(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=si(e.integerValue||e.doubleValue),r=si(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ki(e.timestampValue,t.timestampValue);case 4:return ki(hi(e),hi(t));case 5:return sr(e.stringValue,t.stringValue);case 6:return function(e,t){let n=ci(e),r=ci(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=P(n[e],r[e]);if(t!==0)return t}return P(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=P(si(e.latitude),si(t.latitude));return n===0?P(si(e.longitude),si(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Ai(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[wi]?.arrayValue,a=r[wi]?.arrayValue,o=P(i?.values?.length||0,a?.values?.length||0);return o===0?Ai(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Si.mapValue&&t===Si.mapValue)return 0;if(e===Si.mapValue)return 1;if(t===Si.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=sr(r[e],a[e]);if(t!==0)return t;let o=Oi(n[r[e]],i[a[e]]);if(o!==0)return o}return P(r.length,a.length)}(e.mapValue,t.mapValue);default:throw k(23264,{he:n})}}function ki(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return P(e,t);let n=oi(e),r=oi(t),i=P(n.seconds,r.seconds);return i===0?P(n.nanos,r.nanos):i}function Ai(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Oi(n[e],r[e]);if(t)return t}return P(n.length,r.length)}function ji(e){return Mi(e)}function Mi(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=oi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return ci(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return F.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Mi(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Mi(e.fields[i])}`;return n+`}`}(e.mapValue):k(61005,{value:e})}function Ni(e){switch(Ti(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=mi(e);return t?16+Ni(t):16;case 5:return 2*e.stringValue.length;case 6:return ci(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ni(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Xr(e.fields,((e,n)=>{t+=e.length+Ni(n)})),t}(e.mapValue);default:throw k(13486,{value:e})}}function Pi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function z(e){return!!e&&`integerValue`in e}function Fi(e){return!!e&&`arrayValue`in e}function Ii(e){return!!e&&`nullValue`in e}function Li(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Ri(e){return!!e&&`mapValue`in e}function zi(e){return(e?.mapValue?.fields||{})[bi]?.stringValue===Ci}function Bi(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Xr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Bi(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bi(e.arrayValue.values[n]);return t}return{...e}}function Vi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===xi}var Hi=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ri(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(t)}setAll(e){let t=gr.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Bi(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Ri(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ri(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xr(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Bi(this.value))}};function Ui(e){let t=[];return Xr(e.fields,((e,n)=>{let r=new gr([e]);if(Ri(n)){let e=Ui(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new ni(t)}var Wi=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,I.min(),I.min(),I.min(),Hi.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,I.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,I.min(),I.min(),Hi.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,I.min(),I.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(I.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=I.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Gi=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ki(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?F.comparator(F.fromName(o.referenceValue),n.key):Oi(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function qi(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ei(e.position[n],t.position[n]))return!1;return!0}var Ji=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Yi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Xi=class{},Zi=class e extends Xi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new aa(t,n,r):n===`array-contains`?new la(t,r):n===`in`?new ua(t,r):n===`not-in`?new da(t,r):n===`array-contains-any`?new fa(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new oa(e,n):new sa(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oi(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(Oi(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return k(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qi=class e extends Xi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return $i(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function $i(e){return e.op===`and`}function ea(e){return ta(e)&&$i(e)}function ta(e){for(let t of e.filters)if(t instanceof Qi)return!1;return!0}function na(e){if(e instanceof Zi)return e.field.canonicalString()+e.op.toString()+ji(e.value);if(ea(e))return e.filters.map((e=>na(e))).join(`,`);{let t=e.filters.map((e=>na(e))).join(`,`);return`${e.op}(${t})`}}function ra(e,t){return e instanceof Zi?function(e,t){return t instanceof Zi&&e.op===t.op&&e.field.isEqual(t.field)&&Ei(e.value,t.value)}(e,t):e instanceof Qi?function(e,t){return t instanceof Qi&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&ra(n,t.filters[r])),!0):!1}(e,t):void k(19439)}function ia(e){return e instanceof Zi?function(e){return`${e.field.canonicalString()} ${e.op} ${ji(e.value)}`}(e):e instanceof Qi?function(e){return e.op.toString()+` {`+e.getFilters().map(ia).join(` ,`)+`}`}(e):`Filter`}var aa=class extends Zi{constructor(e,t,n){super(e,t,n),this.key=F.fromName(n.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},oa=class extends Zi{constructor(e,t){super(e,`in`,t),this.keys=ca(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},sa=class extends Zi{constructor(e,t){super(e,`not-in`,t),this.keys=ca(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function ca(e,t){return(t.arrayValue?.values||[]).map((e=>F.fromName(e.referenceValue)))}var la=class extends Zi{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Fi(t)&&Di(t.arrayValue,this.value)}},ua=class extends Zi{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Di(this.value.arrayValue,t)}},da=class extends Zi{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Di(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Di(this.value.arrayValue,t)}},fa=class extends Zi{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Fi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Di(this.value.arrayValue,e)))}},pa=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function ma(e,t=null,n=[],r=[],i=null,a=null,o=null){return new pa(e,t,n,r,i,a,o)}function ha(e){let t=j(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>na(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Hr(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>ji(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>ji(e))).join(`,`)),t.Te=e}return t.Te}function ga(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ra(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qi(e.startAt,t.startAt)&&qi(e.endAt,t.endAt)}function _a(e){return F.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var va=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function ya(e,t,n,r,i,a,o,s){return new va(e,t,n,r,i,a,o,s)}function ba(e){return new va(e)}function xa(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Sa(e){return F.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Ca(e){return e.collectionGroup!==null}function wa(e){let t=j(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new ei(gr.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ji(r,n))})),e.has(gr.keyField().canonicalString())||t.Ie.push(new Ji(gr.keyField(),n))}return t.Ie}function Ta(e){let t=j(e);return t.Ee||=Ea(t,wa(e)),t.Ee}function Ea(e,t){if(e.limitType===`F`)return ma(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Ji(e.field,t)}));let n=e.endAt?new Gi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gi(e.startAt.position,e.startAt.inclusive):null;return ma(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Da(e,t){let n=e.filters.concat([t]);return new va(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Oa(e,t,n){return new va(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ka(e,t){return ga(Ta(e),Ta(t))&&e.limitType===t.limitType}function Aa(e){return`${ha(Ta(e))}|lt:${e.limitType}`}function ja(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ia(e))).join(`, `)}]`),Hr(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>ji(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>ji(e))).join(`,`)),`Target(${t})`}(Ta(e))}; limitType=${e.limitType})`}function Ma(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?F.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of wa(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Ki(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wa(e),t)||e.endAt&&!function(e,t,n){let r=Ki(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wa(e),t))}(e,t)}function Na(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pa(e){return(t,n)=>{let r=!1;for(let i of wa(e)){let e=Fa(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Fa(e,t,n){let r=e.field.isKeyField()?F.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Oi(r,i):k(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return k(19790,{direction:e.dir})}}var Ia=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return Zr(this.inner)}size(){return this.innerSize}},La=new R(F.comparator);function Ra(){return La}var za=new R(F.comparator);function Ba(...e){let t=za;for(let n of e)t=t.insert(n.key,n);return t}function Va(e){let t=za;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ha(){return Wa()}function Ua(){return Wa()}function Wa(){return new Ia((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Ga=new R(F.comparator),Ka=new ei(F.comparator);function B(...e){let t=Ka;for(let n of e)t=t.add(n);return t}var qa=new ei(P);function Ja(){return qa}function Ya(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Ur(t)?`-0`:t}}function Xa(e){return{integerValue:``+e}}function Za(e,t){return Wr(t)?Xa(t):Ya(e,t)}var Qa=class{constructor(){this._=void 0}};function $a(e,t,n){return e instanceof no?function(e,t){let n={fields:{[ui]:{stringValue:li},[fi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&pi(t)&&(t=mi(t)),t&&(n.fields[di]=t),{mapValue:n}}(n,t):e instanceof ro?io(e,t):e instanceof ao?oo(e,t):function(e,t){let n=to(e,t),r=co(n)+co(e.Ae);return z(n)&&z(e.Ae)?Xa(r):Ya(e.serializer,r)}(e,t)}function eo(e,t,n){return e instanceof ro?io(e,t):e instanceof ao?oo(e,t):n}function to(e,t){return e instanceof so?function(e){return z(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var no=class extends Qa{},ro=class extends Qa{constructor(e){super(),this.elements=e}};function io(e,t){let n=lo(t);for(let t of e.elements)n.some((e=>Ei(e,t)))||n.push(t);return{arrayValue:{values:n}}}var ao=class extends Qa{constructor(e){super(),this.elements=e}};function oo(e,t){let n=lo(t);for(let t of e.elements)n=n.filter((e=>!Ei(e,t)));return{arrayValue:{values:n}}}var so=class extends Qa{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function co(e){return si(e.integerValue||e.doubleValue)}function lo(e){return Fi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function uo(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ro&&t instanceof ro||e instanceof ao&&t instanceof ao?dr(e.elements,t.elements,Ei):e instanceof so&&t instanceof so?Ei(e.Ae,t.Ae):e instanceof no&&t instanceof no}(e.transform,t.transform)}var fo=class{constructor(e,t){this.version=e,this.transformResults=t}},V=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function H(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var po=class{};function mo(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new wo(e.key,V.none()):new yo(e.key,e.data,V.none());{let n=e.data,r=Hi.empty(),i=new ei(gr.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new bo(e.key,r,new ni(i.toArray()),V.none())}}function ho(e,t,n){e instanceof yo?function(e,t,n){let r=e.value.clone(),i=So(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bo?function(e,t,n){if(!H(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=So(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function go(e,t,n,r){return e instanceof yo?function(e,t,n,r){if(!H(e.precondition,t))return n;let i=e.value.clone(),a=Co(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bo?function(e,t,n,r){if(!H(e.precondition,t))return n;let i=Co(e.fieldTransforms,r,t),a=t.data;return a.setAll(xo(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return H(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _o(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=to(r.transform,e||null);i!=null&&(n===null&&(n=Hi.empty()),n.set(r.field,i))}return n||null}function vo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&dr(e,t,((e,t)=>uo(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var yo=class extends po{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},bo=class extends po{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function xo(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function So(e,t,n){let r=new Map;A(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,eo(o,s,n[i]))}return r}function Co(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,$a(e,a,t))}return r}var wo=class extends po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},To=class extends po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},Eo=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&ho(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=go(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=go(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Ua();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=mo(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(I.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),B())}isEqual(e){return this.batchId===e.batchId&&dr(this.mutations,e.mutations,((e,t)=>vo(e,t)))&&dr(this.baseMutations,e.baseMutations,((e,t)=>vo(e,t)))}},Do=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){A(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Ga}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Oo=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},ko=class{constructor(e,t){this.count=e,this.unchangedNames=t}},U,W;function Ao(e){switch(e){case M.OK:return k(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return k(15467,{code:e})}}function jo(e){if(e===void 0)return Kn(`GRPC error has no .code`),M.UNKNOWN;switch(e){case U.OK:return M.OK;case U.CANCELLED:return M.CANCELLED;case U.UNKNOWN:return M.UNKNOWN;case U.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case U.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case U.INTERNAL:return M.INTERNAL;case U.UNAVAILABLE:return M.UNAVAILABLE;case U.UNAUTHENTICATED:return M.UNAUTHENTICATED;case U.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case U.NOT_FOUND:return M.NOT_FOUND;case U.ALREADY_EXISTS:return M.ALREADY_EXISTS;case U.PERMISSION_DENIED:return M.PERMISSION_DENIED;case U.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case U.ABORTED:return M.ABORTED;case U.OUT_OF_RANGE:return M.OUT_OF_RANGE;case U.UNIMPLEMENTED:return M.UNIMPLEMENTED;case U.DATA_LOSS:return M.DATA_LOSS;default:return k(39323,{code:e})}}(W=U||={})[W.OK=0]=`OK`,W[W.CANCELLED=1]=`CANCELLED`,W[W.UNKNOWN=2]=`UNKNOWN`,W[W.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,W[W.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,W[W.NOT_FOUND=5]=`NOT_FOUND`,W[W.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,W[W.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,W[W.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,W[W.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,W[W.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,W[W.ABORTED=10]=`ABORTED`,W[W.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,W[W.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,W[W.INTERNAL=13]=`INTERNAL`,W[W.UNAVAILABLE=14]=`UNAVAILABLE`,W[W.DATA_LOSS=15]=`DATA_LOSS`;var Mo=null;function No(){return new TextEncoder}var Po=new kn([4294967295,4294967295],0);function Fo(e){let t=No().encode(e),n=new An;return n.update(t),new Uint8Array(n.digest())}function Io(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new kn([n,r],0),new kn([i,a],0)]}var Lo=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ro(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=kn.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(kn.fromNumber(n)));return r.compare(Po)===1&&(r=new kn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=Io(Fo(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=Io(Fo(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.be(r)}}be(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Ro=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},zo=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Bo.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(I.min(),i,new R(P),Ra(),B())}},Bo=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,B(),B(),B())}},Vo=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}},Ho=class{constructor(e,t){this.targetId=e,this.Ce=t}},Uo=class{constructor(e,t,n=ii.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Wo=class{constructor(){this.ve=0,this.Fe=qo(),this.Me=ii.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=B(),t=B(),n=B();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:k(38017,{changeType:i})}})),new Bo(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=qo()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){--this.ve,A(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Go=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ra(),this.He=Ko(),this.Je=Ko(),this.Ze=new R(P)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:k(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(_a(i))if(n===0){let e=new F(i.path);this.et(t,e,Wi.newNoDocument(e,I.min()))}else A(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ze=this.Ze.insert(t,e)}Mo?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=ci(n).toUint8Array()}catch(e){if(e instanceof ri)return qn(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new Lo(a,r,i)}catch(e){return qn(e instanceof Ro?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&_a(i.target)){let t=new F(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wi.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}}));let n=B();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new zo(e,t,this.Ze,this.je,n);return this.je=Ra(),this.He=Ko(),this.Je=Ko(),this.Ze=new R(P),r}Ye(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Wo,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ei(P),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ei(P),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||O(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wo),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ko(){return new R(F.comparator)}function qo(){return new R(F.comparator)}var Jo=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Yo=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Xo=(()=>({and:`AND`,or:`OR`}))(),Zo=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Qo(e,t){return e.useProto3Json||Hr(t)?t:{value:t}}function $o(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function es(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ts(e,t){return $o(e,t.toTimestamp())}function ns(e){return A(!!e,49232),I.fromTimestamp(function(e){let t=oi(e);return new Or(t.seconds,t.nanos)}(e))}function rs(e,t){return is(e,t).canonicalString()}function is(e,t){let n=function(e){return new mr([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function as(e){let t=mr.fromString(e);return A(Os(t),10190,{key:t.toString()}),t}function os(e,t){return rs(e.databaseId,t.path)}function ss(e,t){let n=as(t);if(n.get(1)!==e.databaseId.projectId)throw new N(M.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new N(M.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new F(ds(n))}function cs(e,t){return rs(e.databaseId,t)}function ls(e){let t=as(e);return t.length===4?mr.emptyPath():ds(t)}function us(e){return new mr([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function ds(e){return A(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function fs(e,t,n){return{name:os(e,t),fields:n.value.mapValue.fields}}function ps(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:k(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(A(t===void 0||typeof t==`string`,58123),ii.fromBase64String(t||``)):(A(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),ii.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Uo(r,i,a,o&&function(e){return new N(e.code===void 0?M.UNKNOWN:jo(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=ss(e,r.document.name),a=ns(r.document.updateTime),o=r.document.createTime?ns(r.document.createTime):I.min(),s=new Hi({mapValue:{fields:r.document.fields}}),c=Wi.newFoundDocument(i,a,o,s);n=new Vo(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=ss(e,r.document),a=r.readTime?ns(r.readTime):I.min(),o=Wi.newNoDocument(i,a);n=new Vo([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=ss(e,r.document);n=new Vo([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return k(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new ko(r,i),o=e.targetId;n=new Ho(o,a)}}return n}function ms(e,t){let n;if(t instanceof yo)n={update:fs(e,t.key,t.value)};else if(t instanceof wo)n={delete:os(e,t.key)};else if(t instanceof bo)n={update:fs(e,t.key,t.data),updateMask:Ds(t.fieldMask)};else{if(!(t instanceof To))return k(16599,{dt:t.type});n={verify:os(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof no)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof ro)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ao)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof so)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw k(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?k(27497):{exists:t.exists}:{updateTime:ts(e,t.updateTime)}}(e,t.precondition)),n}function hs(e,t){return e&&e.length>0?(A(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?ns(e.updateTime):ns(t);return n.isEqual(I.min())&&(n=ns(t)),new fo(n,e.transformResults||[])}(e,t)))):[]}function gs(e,t){return{documents:[cs(e,t.path)]}}function _s(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=cs(e,i);let a=function(e){if(e.length!==0)return Es(Qi.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:ws(e.field),direction:xs(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Qo(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function vs(e){let t=ls(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){A(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=bs(e);return t instanceof Qi&&ea(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ji(Ts(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Hr(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Gi(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Gi(e.values||[],t)}(n.endAt)),ya(t,i,o,a,s,`F`,c,l)}function ys(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return k(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function bs(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?k(30097,{filter:e}):function(e){return Qi.create(e.compositeFilter.filters.map((e=>bs(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return k(1026)}}(e.compositeFilter.op))}(e):function(e){return Zi.create(Ts(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return k(58110);default:return k(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Ts(e.unaryFilter.field);return Zi.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Ts(e.unaryFilter.field);return Zi.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Ts(e.unaryFilter.field);return Zi.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Ts(e.unaryFilter.field);return Zi.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return k(61313);default:return k(60726)}}(e)}function xs(e){return Jo[e]}function Ss(e){return Yo[e]}function Cs(e){return Xo[e]}function ws(e){return{fieldPath:e.canonicalString()}}function Ts(e){return gr.fromServerFormat(e.fieldPath)}function Es(e){return e instanceof Zi?function(e){if(e.op===`==`){if(Li(e.value))return{unaryFilter:{field:ws(e.field),op:`IS_NAN`}};if(Ii(e.value))return{unaryFilter:{field:ws(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Li(e.value))return{unaryFilter:{field:ws(e.field),op:`IS_NOT_NAN`}};if(Ii(e.value))return{unaryFilter:{field:ws(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:ws(e.field),op:Ss(e.op),value:e.value}}}(e):e instanceof Qi?function(e){let t=e.getFilters().map((e=>Es(e)));return t.length===1?t[0]:{compositeFilter:{op:Cs(e.op),filters:t}}}(e):k(54877,{filter:e})}function Ds(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Os(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}function ks(e){return!!e&&typeof e._toProto==`function`&&e._protoValueType===`ProtoValue`}var As=class e{constructor(e,t,n,r,i=I.min(),a=I.min(),o=ii.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},js=class{constructor(e){this.yt=e}};function Ms(e){let t=vs({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Oa(t,t.limit,`L`):t}var Ns=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(si(e.integerValue));else if(`doubleValue`in e){let n=si(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ur(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=oi(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(ci(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Vi(e)?this.Ft(t,2**53-1):zi(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):k(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=wi,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(si(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),F.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Ns.Wt=new Ns;var Ps=class{constructor(){this.Sn=new Fs}addToCollectionParentIndex(e,t){return this.Sn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Nr.min())}updateCollectionGroup(e,t,n){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},Fs=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ei(mr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ei(mr.comparator)).toArray()}};new Uint8Array;var Is={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ls=41943040,Rs=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(Ls,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);var zs=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},Bs=`LruGarbageCollector`,Vs=1048576;function Hs([e,t],[n,r]){let i=P(e,n);return i===0?P(t,r):i}var Us=class{constructor(e){this.Pr=e,this.buffer=new ei(Hs),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Hs(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ws=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Ar(e){O(Bs,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zr(e)?O(Bs,`Ignoring IndexedDB error during garbage collection: `,e):await Lr(e)}await this.Ar(3e5)}))}},Gs=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Br.ce);let n=new Us(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.mr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O(`LruGarbageCollector`,`Garbage collection skipped; disabled`),L.resolve(Is)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(O(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Is):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(O(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Gn()<=E.DEBUG&&O(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Ks(e,t){return new Gs(e,t)}var qs=class{constructor(){this.changes=new Ia((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):L.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Js=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Ys=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&go(n.mutation,e,ni.empty(),Or.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,B()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=B()){let r=Ha();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ba();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Ha();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,B())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ra(),a=Wa(),o=function(){return Wa()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof bo)?i=i.insert(t.key,t):o===void 0?a.set(t.key,ni.empty()):(a.set(t.key,o.mutation.getFieldMask()),go(o.mutation,t,o.mutation.getFieldMask(),Or.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Js(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Wa(),r=new R(((e,t)=>e-t)),i=B();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||ni.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||B()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Ua();c.forEach((e=>{if(!i.has(e)){let r=mo(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return L.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return Sa(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ca(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):L.resolve(Ha()),o=kr,s=i;return a.next((t=>L.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?L.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,B()))).next((e=>({batchId:o,changes:Va(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next((e=>{let t=Ba();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Ba();return this.indexManager.getCollectionParents(e,i).next((o=>L.forEach(o,(o=>{let s=function(e,t){return new va(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Wi.newInvalidDocument(r)))}));let n=Ba();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&go(a.mutation,r,ni.empty(),Or.now()),Ma(t,r)&&(n=n.insert(e,r))})),n}))}},Xs=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return L.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ns(e.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Ms(e.bundledQuery),readTime:ns(e.readTime)}}(t)),L.resolve()}},Zs=class{constructor(){this.overlays=new R(F.comparator),this.Lr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Ha();return L.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),L.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),L.resolve()}getOverlaysForCollection(e,t,n){let r=Ha(),i=t.length+1,a=new F(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return L.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new R(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Ha(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Ha(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return L.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Oo(t,n));let i=this.Lr.get(t);i===void 0&&(i=B(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},Qs=class{constructor(){this.sessionToken=ii.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}},$s=class{constructor(){this.kr=new ei(ec.Kr),this.qr=new ei(ec.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new ec(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new ec(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new F(new mr([])),n=new ec(t,e),r=new ec(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new F(new mr([])),n=new ec(t,e),r=new ec(t,e+1),i=B();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new ec(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},ec=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return F.comparator(e.key,t.key)||P(e.Hr,t.Hr)}static Ur(e,t){return P(e.Hr,t.Hr)||F.comparator(e.key,t.key)}},tc=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ei(ec.Kr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Eo(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new ec(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Vr:this.Yn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new ec(t,0),r=new ec(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ei(P);return t.forEach((e=>{let t=new ec(e,0),r=new ec(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),L.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;F.isDocumentKey(i)||(i=i.child(``));let a=new ec(new F(i),0),o=new ei(P);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),L.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){A(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return L.forEach(t.mutations,(r=>{let i=new ec(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new ec(t,0),r=this.Jr.firstAfterOrEqual(n);return L.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},nc=class{constructor(e){this.ti=e,this.docs=function(){return new R(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return L.resolve(n?n.document.mutableCopy():Wi.newInvalidDocument(t))}getEntries(e,t){let n=Ra();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wi.newInvalidDocument(e))})),L.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ra(),a=t.path,o=new F(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Pr(Mr(o),n)<=0||(r.has(o.key)||Ma(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,t,n,r){k(9500)}ni(e,t){return L.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new rc(this)}getSize(e){return L.resolve(this.size)}},rc=class extends qs{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),L.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},ic=class{constructor(e){this.persistence=e,this.ri=new Ia((e=>ha(e)),ga),this.lastRemoteSnapshotVersion=I.min(),this.highestTargetId=0,this.ii=0,this.si=new $s,this.targetCount=0,this.oi=zs._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),L.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new zs(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.lr(t),L.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,L.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),L.waitFor(i).next((()=>r))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return L.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),L.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),L.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return L.resolve(n)}containsKey(e,t){return L.resolve(this.si.containsKey(t))}},ac=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Br(0),this.ui=!1,this.ui=!0,this.ci=new Qs,this.referenceDelegate=e(this),this.li=new ic(this),this.indexManager=new Ps,this.remoteDocumentCache=function(e){return new nc(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new js(t),this.Pi=new Xs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zs,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new tc(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){O(`MemoryPersistence`,`Starting transaction:`,e);let r=new oc(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return L.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},oc=class extends Ir{constructor(e){super(),this.currentSequenceNumber=e}},sc=class e{constructor(e){this.persistence=e,this.Ri=new $s,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw k(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),L.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,(n=>{let r=F.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,I.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},cc=class e{constructor(e,t){this.persistence=e,this.fi=new Ia((e=>Kr(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Ks(this,t)}static Vi(t,n){return new e(t,n)}Ti(){}Ii(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}pr(e){let t=0;return this.mr(e,(e=>{t++})).next((()=>t))}mr(e,t){return L.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((e=>e?L.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(r=>this.wr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,I.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),L.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ni(e.data.value)),t}wr(e,t,n){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return L.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},lc=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=B(),i=B();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},uc=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},dc=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return _e()?8:Rr(w())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new uc;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Gn()<=E.DEBUG&&O(`QueryEngine`,`SDK will not create cache indexes for query:`,ja(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),L.resolve()):(Gn()<=E.DEBUG&&O(`QueryEngine`,`Query:`,ja(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(Gn()<=E.DEBUG&&O(`QueryEngine`,`The SDK decides to create cache indexes for query:`,ja(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Ta(t))):L.resolve())}gs(e,t){if(xa(t))return L.resolve(null);let n=Ta(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Oa(t,null,`F`),n=Ta(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=B(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,Oa(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return xa(t)||r.isEqual(I.min())?L.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?L.resolve(null):(Gn()<=E.DEBUG&&O(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),ja(t)),this.Ds(e,a,t,jr(r,kr)).next((e=>e)))}))}bs(e,t){let n=new ei(Pa(e));return t.forEach(((t,r)=>{Ma(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Gn()<=E.DEBUG&&O(`QueryEngine`,`Using full collection scan to execute query:`,ja(t)),this.fs.getDocumentsMatchingQuery(e,t,Nr.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},fc=`LocalStore`,pc=3e8,mc=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new R(P),this.Fs=new Ia((e=>ha(e)),ga),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ys(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function hc(e,t,n,r){return new mc(e,t,n,r)}async function gc(e,t){let n=j(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=B();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function _c(e,t){let n=j(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=L.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);A(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=B();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function vc(e){let t=j(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.li.getLastRemoteSnapshotVersion(e)))}function yc(e,t){let n=j(e),r=t.snapshotVersion,i=n.vs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.li.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.li.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(ii.EMPTY_BYTE_STRING,I.min()).withLastLimboFreeSnapshotVersion(I.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=pc?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.li.updateTargetData(e,l))}));let s=Ra(),c=B();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bc(e,a,t.documentUpdates).next((e=>{s=e.Bs,c=e.Ls}))),!r.isEqual(I.min())){let t=n.li.getLastRemoteSnapshotVersion(e).next((t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return L.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.vs=i,e)))}function bc(e,t,n){let r=B(),i=B();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ra();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(I.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):O(fc,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Bs:r,Ls:i}}))}function xc(e,t){let n=j(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Vr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Sc(e,t){let n=j(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.li.getTargetData(e,t).next((i=>i?(r=i,L.resolve(r)):n.li.allocateTargetId(e).next((i=>(r=new As(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.li.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.vs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e}))}async function Cc(e,t,n){let r=j(e),i=r.vs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zr(e))throw e;O(fc,`Failed to update sequence numbers for target ${t}: ${e}`)}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function wc(e,t,n){let r=j(e),i=I.min(),a=B();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=j(e),i=r.Fs.get(n);return i===void 0?r.li.getTargetData(t,n):L.resolve(r.vs.get(i))}(r,e,Ta(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:I.min(),n?a:B()))).next((e=>(Tc(r,Na(t),e),{documents:e,ks:a})))))}function Tc(e,t,n){let r=e.Ms.get(t)||I.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ms.set(t,r)}var Ec=class{constructor(){this.activeTargetIds=Ja()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Dc=class{constructor(){this.vo=new Ec,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ec,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Oc=class{Mo(e){}shutdown(){}},kc=`ConnectivityMonitor`,Ac=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){O(kc,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){O(kc,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},jc=null;function Mc(){return jc===null?jc=function(){return 268435456+Math.round(2147483648*Math.random())}():jc++,`0x`+jc.toString(16)}var Nc=`RestConnection`,Pc={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},Fc=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===_i?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=Mc(),o=this.Qo(e,t.toUriEncodedString());O(Nc,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=ie(c);return this.zo(e,o,s,n,l).then((t=>(O(Nc,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw qn(Nc,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Hn}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=Pc[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},Ic=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},G=`WebChannelConnection`,Lc=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},Rc=class e extends Fc{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){e.c_||=(Lc(zn(),Rn.STAT_EVENT,(e=>{e.stat===Ln.PROXY?O(G,`STAT_EVENT: detected buffering proxy`):e.stat===Ln.NOPROXY&&O(G,`STAT_EVENT: detected no buffering proxy`)})),!0)}zo(e,t,n,r,i){let a=Mc();return new Promise(((i,o)=>{let s=new Nn;s.setWithCredentials(!0),s.listenOnce(Fn.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case In.NO_ERROR:let t=s.getResponseJson();O(G,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case In.TIMEOUT:O(G,`RPC '${e}' ${a} timed out`),o(new N(M.DEADLINE_EXCEEDED,`Request time out`));break;case In.HTTP_ERROR:let n=s.getStatus();if(O(G,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new N(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(M).indexOf(t)>=0?t:M.UNKNOWN}(t.status),t.message)):o(new N(M.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new N(M.UNAVAILABLE,`Connection failed.`));break;default:k(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{O(G,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);O(G,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=Mc(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);O(G,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Ic({Ho:e=>{f?O(G,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(O(G,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),O(G,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return Lc(u,Pn.EventType.OPEN,(()=>{f||(O(G,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),Lc(u,Pn.EventType.CLOSE,(()=>{f||(f=!0,O(G,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),Lc(u,Pn.EventType.ERROR,(e=>{f||(f=!0,qn(G,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new N(M.UNAVAILABLE,`The operation could not be completed`)))})),Lc(u,Pn.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];A(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){O(G,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=U[e];if(t!==void 0)return jo(t)}(e),r=a.message;n===void 0&&(n=M.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new N(n,r)),u.close()}else O(G,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Bn()}};function zc(e){return new Rc(e)}function Bc(){return typeof document<`u`?document:null}function Vc(e){return new Zo(e,!0)}Rc.c_=!1;var Hc=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&O(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},Uc=`PersistentStream`,Wc=class{constructor(e,t,n,r,i,a,o,s){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hc(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===M.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new N(M.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.H_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return O(Uc,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(O(Uc,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Gc=class extends Wc{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=ps(this.serializer,e),n=function(e){if(!(`targetChange`in e))return I.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?I.min():t.readTime?ns(t.readTime):I.min()}(e);return this.listener.J_(t,n)}Z_(e){let t={};t.database=us(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=_a(r)?{documents:gs(e,r)}:{query:_s(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=es(e,t.resumeToken);let r=Qo(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(I.min())>0){n.readTime=$o(e,t.snapshotVersion.toTimestamp());let r=Qo(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=ys(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){let t={};t.database=us(this.serializer),t.removeTarget=e,this.K_(t)}},Kc=class extends Wc{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}H_(e){return A(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,A(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){A(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=hs(e.writeResults,e.commitTime),n=ns(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=us(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>ms(this.serializer,e)))};this.K_(t)}},qc=class{},Jc=class extends qc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new N(M.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,is(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(M.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,is(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(M.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function Yc(e,t,n,r){return new Jc(e,t,n,r)}var Xc=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(t),this.aa=!1):O(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},Zc=`RemoteStore`,Qc=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{K(this)&&(O(Zc,`Restarting streams for network reachability change.`),await async function(e){let t=j(e);t.Ea.add(4),await el(t),t.Va.set(`Unknown`),t.Ea.delete(4),await $c(t)}(this))}))})),this.Va=new Xc(n,r)}};async function $c(e){if(K(e))for(let t of e.Ra)await t(!0)}async function el(e){for(let t of e.Ra)await t(!1)}function tl(e,t){let n=j(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ol(n)?al(n):Tl(n).O_()&&rl(n,t))}function nl(e,t){let n=j(e),r=Tl(n);n.Ia.delete(t),r.O_()&&il(n,t),n.Ia.size===0&&(r.O_()?r.L_():K(n)&&n.Va.set(`Unknown`))}function rl(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(I.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tl(e).Z_(t)}function il(e,t){e.da.$e(t),Tl(e).X_(t)}function al(e){e.da=new Go({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Tl(e).start(),e.Va.ua()}function ol(e){return K(e)&&!Tl(e).x_()&&e.Ia.size>0}function K(e){return j(e).Ea.size===0}function sl(e){e.da=void 0}async function cl(e){e.Va.set(`Online`)}async function ll(e){e.Ia.forEach(((t,n)=>{rl(e,t)}))}async function ul(e,t){sl(e),ol(e)?(e.Va.ha(t),al(e)):e.Va.set(`Unknown`)}async function dl(e,t,n){if(e.Va.set(`Online`),t instanceof Uo&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){O(Zc,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await fl(e,n)}else if(t instanceof Vo?e.da.Xe(t):t instanceof Ho?e.da.st(t):e.da.tt(t),!n.isEqual(I.min()))try{let t=await vc(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.da.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(ii.EMPTY_BYTE_STRING,r.snapshotVersion)),il(e,t),rl(e,new As(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){O(Zc,`Failed to raise snapshot:`,t),await fl(e,t)}}async function fl(e,t,n){if(!zr(t))throw t;e.Ea.add(1),await el(e),e.Va.set(`Offline`),n||=()=>vc(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{O(Zc,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await $c(e)}))}function pl(e,t){return t().catch((n=>fl(e,n,t)))}async function ml(e){let t=j(e),n=El(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vr;for(;hl(t);)try{let e=await xc(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,gl(t,e)}catch(e){await fl(t,e)}_l(t)&&vl(t)}function hl(e){return K(e)&&e.Ta.length<10}function gl(e,t){e.Ta.push(t);let n=El(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function _l(e){return K(e)&&!El(e).x_()&&e.Ta.length>0}function vl(e){El(e).start()}async function yl(e){El(e).ra()}async function bl(e){let t=El(e);for(let n of e.Ta)t.ea(n.mutations)}async function xl(e,t,n){let r=e.Ta.shift(),i=Do.from(r,t,n);await pl(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ml(e)}async function Sl(e,t){t&&El(e).Y_&&await async function(e,t){if(function(e){return Ao(e)&&e!==M.ABORTED}(t.code)){let n=e.Ta.shift();El(e).B_(),await pl(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ml(e)}}(e,t),_l(e)&&vl(e)}async function Cl(e,t){let n=j(e);n.asyncQueue.verifyOperationInProgress(),O(Zc,`RemoteStore received new credentials`);let r=K(n);n.Ea.add(3),await el(n),r&&n.Va.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await $c(n)}async function wl(e,t){let n=j(e);t?(n.Ea.delete(2),await $c(n)):t||(n.Ea.add(2),await el(n),n.Va.set(`Unknown`))}function Tl(e){return e.ma||(e.ma=function(e,t,n){let r=j(e);return r.sa(),new Gc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:cl.bind(null,e),Yo:ll.bind(null,e),t_:ul.bind(null,e),J_:dl.bind(null,e)}),e.Ra.push((async t=>{t?(e.ma.B_(),ol(e)?al(e):e.Va.set(`Unknown`)):(await e.ma.stop(),sl(e))}))),e.ma}function El(e){return e.fa||(e.fa=function(e,t,n){let r=j(e);return r.sa(),new Kc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:yl.bind(null,e),t_:Sl.bind(null,e),ta:bl.bind(null,e),na:xl.bind(null,e)}),e.Ra.push((async t=>{t?(e.fa.B_(),await ml(e)):(await e.fa.stop(),e.Ta.length>0&&(O(Zc,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var Dl=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(M.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ol(e,t){if(Kn(`AsyncQueue`,`${t}: ${e}`),zr(e))return new N(M.UNAVAILABLE,`${t}: ${e}`);throw e}var kl=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||F.comparator(t.key,n.key):(e,t)=>F.comparator(e.key,t.key),this.keyedMap=Ba(),this.sortedSet=new R(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},Al=class{constructor(){this.ga=new R(F.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):k(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},jl=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,kl.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ka(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},Ml=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},Nl=class{constructor(){this.queries=Pl(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=j(e),r=n.queries;n.queries=Pl(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new N(M.ABORTED,`Firestore shutting down`))}};function Pl(){return new Ia((e=>Aa(e)),ka)}async function Fl(e,t){let n=j(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new Ml,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Ol(e,`Initialization of query '${ja(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&Rl(n)}async function Il(e,t){let n=j(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),a.ba.length===0?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ll(e,t){let n=j(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.ba)t.Fa(e)&&(r=!0);i.wa=e}}r&&Rl(n)}function q(e,t,n){let r=j(e),i=r.queries.get(t);if(i)for(let e of i.ba)e.onError(n);r.queries.delete(t)}function Rl(e){e.Ca.forEach((e=>{e.next()}))}var J,Y;(Y=J||={}).Ma=`default`,Y.Cache=`cache`;var zl=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new jl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==J.Cache}},Bl=class{constructor(e){this.key=e}},Vl=class{constructor(e){this.key=e}},Hl=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=B(),this.mutatedKeys=B(),this.eu=Pa(e),this.tu=new kl(this.eu)}get nu(){return this.Za}ru(e,t){let n=t?t.iu:new Al,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Ma(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Ya.size===0&&this.current&&!r?1:0,c=s!==this.Xa;return this.Xa=s,a.length!==0||c?{snapshot:new jl(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Al,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=B(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))}));let t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new Vl(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new Bl(n))})),t}cu(e){this.Za=e.ks,this.Ya=B();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Ul=`SyncEngine`,Wl=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Gl=class{constructor(e){this.key=e,this.hu=!1}},Kl=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ia((e=>Aa(e)),ka),this.Iu=new Map,this.Eu=new Set,this.Ru=new R(F.comparator),this.Au=new Map,this.Vu=new $s,this.du={},this.mu=new Map,this.fu=zs.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function ql(e,t,n=!0){let r=hu(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Yl(r,t,n,!0),i}async function Jl(e,t){await Yl(hu(e),t,!0,!1)}async function Yl(e,t,n,r){let i=await Sc(e.localStore,Ta(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await Xl(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&tl(e.remoteStore,i),s}async function Xl(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await wc(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return lu(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await wc(e.localStore,t,!0),o=new Hl(t,a.ks),s=o.ru(a.documents),c=Bo.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);lu(e,n,l.au);let u=new Wl(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Zl(e,t,n){let r=j(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!ka(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nl(r.remoteStore,i.targetId),su(r,i.targetId)})).catch(Lr)):(su(r,i.targetId),await Cc(r.localStore,i.targetId,!0))}async function Ql(e,t){let n=j(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nl(n.remoteStore,r.targetId))}async function $l(e,t,n){let r=gu(e);try{let e=await function(e,t){let n=j(e),r=Or.now(),i=t.reduce(((e,t)=>e.add(t.key)),B()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=Ra(),c=B();return n.xs.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=_o(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new bo(e.key,t,Ui(t.value.mapValue),V.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Va(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||=new R(P),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await fu(r,e.changes),await ml(r.remoteStore)}catch(e){let t=Ol(e,`Failed to persist write`);n.reject(t)}}async function eu(e,t){let n=j(e);try{let e=await yc(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(A(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?A(r.hu,14607):e.removedDocuments.size>0&&(A(r.hu,42227),r.hu=!1))})),await fu(n,e,t)}catch(e){await Lr(e)}}function tu(e,t,n){let r=j(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=j(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&Rl(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function nu(e,t,n){let r=j(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new R(F.comparator);e=e.insert(a,Wi.newNoDocument(a,I.min()));let n=B().add(a);await eu(r,new zo(I.min(),new Map,new R(P),e,n)),r.Ru=r.Ru.remove(a),r.Au.delete(t),du(r)}else await Cc(r.localStore,t,!1).then((()=>su(r,t,n))).catch(Lr)}async function ru(e,t){let n=j(e),r=t.batch.batchId;try{let e=await _c(n.localStore,t);ou(n,r,null),au(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await fu(n,e)}catch(e){await Lr(e)}}async function iu(e,t,n){let r=j(e);try{let e=await function(e,t){let n=j(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(A(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ou(r,t,n),au(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await fu(r,e)}catch(e){await Lr(e)}}function au(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function ou(e,t,n){let r=j(e),i=r.du[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function su(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach((t=>{e.Vu.containsKey(t)||cu(e,t)}))}function cu(e,t){e.Eu.delete(t.path.canonicalString());let n=e.Ru.get(t);n!==null&&(nl(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),du(e))}function lu(e,t,n){for(let r of n)r instanceof Bl?(e.Vu.addReference(r.key,t),uu(e,r)):r instanceof Vl?(O(Ul,`Document no longer in limbo: `+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||cu(e,r.key)):k(19791,{wu:r})}function uu(e,t){let n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(O(Ul,`New document in limbo: `+n),e.Eu.add(r),du(e))}function du(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new F(mr.fromString(t)),r=e.fu.next();e.Au.set(r,new Gl(n)),e.Ru=e.Ru.insert(n,r),tl(e.remoteStore,new As(Ta(ba(n.path)),r,`TargetPurposeLimboResolution`,Br.ce))}}async function fu(e,t,n){let r=j(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=lc.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=j(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>L.forEach(t,(t=>L.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>L.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zr(e))throw e;O(fc,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function pu(e,t){let n=j(e);if(!n.currentUser.isEqual(t)){O(Ul,`User change. New user:`,t.toKey());let e=await gc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new N(M.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fu(n,e.Ns)}}function mu(e,t){let n=j(e),r=n.Au.get(t);if(r&&r.hu)return B().add(r.key);{let e=B(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function hu(e){let t=j(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=eu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nu.bind(null,t),t.Pu.J_=Ll.bind(null,t.eventManager),t.Pu.yu=q.bind(null,t.eventManager),t}function gu(e){let t=j(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ru.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iu.bind(null,t),t}var _u=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Vc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hc(this.persistence,new dc,e.initialUser,this.serializer)}Cu(e){return new ac(sc.Vi,this.serializer)}Du(e){return new Dc}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};_u.provider={build:()=>new _u};var vu=class extends _u{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){A(this.persistence.referenceDelegate instanceof cc,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Ws(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?Rs.DEFAULT:Rs.withCacheSize(this.cacheSizeBytes);return new ac((e=>cc.Vi(e,t)),this.serializer)}},yu=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>tu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pu.bind(null,this.syncEngine),await wl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Nl}()}createDatastore(e){let t=Vc(e.databaseInfo.databaseId),n=zc(e.databaseInfo);return Yc(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Qc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>tu(this.syncEngine,e,0)),function(){return Ac.v()?new Ac:new Oc}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Kl(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=j(e);O(Zc,`RemoteStore shutting down.`),t.Ea.add(5),await el(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};yu.provider={build:()=>new yu};var bu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},xu=`FirestoreClient`,Su=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Vn.UNAUTHENTICATED,this.clientId=or.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{O(xu,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(O(xu,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Ol(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Cu(e,t){e.asyncQueue.verifyOperationInProgress(),O(xu,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await gc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function wu(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Tu(e);O(xu,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Cl(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Cl(t.remoteStore,n))),e._onlineComponents=t}async function Tu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){O(xu,`Using user provided OfflineComponentProvider`);try{await Cu(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===M.FAILED_PRECONDITION||e.code===M.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;qn(`Error using user provided cache. Falling back to memory cache: `+n),await Cu(e,new _u)}}else O(xu,`Using default OfflineComponentProvider`),await Cu(e,new vu(void 0));return e._offlineComponents}async function Eu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(O(xu,`Using user provided OnlineComponentProvider`),await wu(e,e._uninitializedComponentsProvider._online)):(O(xu,`Using default OnlineComponentProvider`),await wu(e,new yu))),e._onlineComponents}function Du(e){return Eu(e).then((e=>e.syncEngine))}async function Ou(e){let t=await Eu(e),n=t.eventManager;return n.onListen=ql.bind(null,t.syncEngine),n.onUnlisten=Zl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Jl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ql.bind(null,t.syncEngine),n}function ku(e,t,n,r){let i=new bu(r),a=new zl(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Fl(await Ou(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>Il(await Ou(e),a)))}}function Au(e,t){let n=new Xn;return e.asyncQueue.enqueueAndForget((async()=>$l(await Du(e),t,n))),n.promise}function ju(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Mu=`ComponentProvider`,Nu=new Map;function Pu(e,t,n,r,i){return new gi(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ju(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var Fu=`firestore.googleapis.com`,Iu=!0,Lu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new N(M.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=Fu,this.ssl=Iu}else this.host=e.host,this.ssl=e.ssl??Iu;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ls;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vs)throw new N(M.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}vr(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ju(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new N(M.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new N(M.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new N(M.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ru=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new Lu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new N(M.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new N(M.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new Lu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Qn;switch(e.type){case`firstParty`:return new nr(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new N(M.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Nu.get(e);t&&(O(Mu,`Removing Datastore`),Nu.delete(e),t.terminate())}(this),Promise.resolve()}};function zu(e,t,n,r={}){e=Cr(e,Ru);let i=ie(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(ae(`https://${s}`),de(`Firestore`,!0)),a.host!==Fu&&a.host!==s&&qn(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!Ee(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Vn.MOCK_USER;else{t=oe(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new N(M.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Vn(i)}e._authCredentials=new $n(new Zn(t,n))}}var Bu=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},Vu=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Tr(n,e._jsonSchema))return new e(t,r||null,new F(mr.fromString(n.referencePath)))}};Vu._jsonSchemaVersion=`firestore/documentReference/1.0`,Vu._jsonSchema={type:wr(`string`,Vu._jsonSchemaVersion),referencePath:wr(`string`)};var Hu=class e extends Bu{constructor(e,t,n){super(e,t,ba(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Vu(this.firestore,null,new F(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function Uu(e,t,...n){if(e=Fe(e),_r(`collection`,`path`,t),e instanceof Ru){let r=mr.fromString(t,...n);return br(r),new Hu(e,null,r)}{if(!(e instanceof Vu||e instanceof Hu))throw new N(M.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(mr.fromString(t,...n));return br(r),new Hu(e.firestore,null,r)}}function Wu(e,t,...n){if(e=Fe(e),arguments.length===1&&(t=or.newId()),_r(`doc`,`path`,t),e instanceof Ru){let r=mr.fromString(t,...n);return yr(r),new Vu(e,null,new F(r))}{if(!(e instanceof Vu||e instanceof Hu))throw new N(M.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(mr.fromString(t,...n));return yr(r),new Vu(e.firestore,e instanceof Hu?e.converter:null,new F(r))}}var Gu=`AsyncQueue`,Ku=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hc(this,`async_queue_retry`),this._c=()=>{let e=Bc();e&&O(Gu,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Bc();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Bc();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Xn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!zr(e))throw e;O(Gu,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Kn(`INTERNAL UNHANDLED ERROR: `,qu(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=Dl.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&k(47125,{Pc:qu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function qu(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var Ju=class extends Ru{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Ku,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ku(e),this._firestoreClient=void 0,await e}}};function Yu(e,t){let n=typeof e==`object`?e:cn(),r=typeof e==`string`?e:t||_i,i=tn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=C(`firestore`);e&&zu(i,...e)}return i}function Xu(e){if(e._terminated)throw new N(M.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Zu(e),e._firestoreClient}function Zu(e){let t=e._freezeSettings(),n=Pu(e._databaseId,e._app?.options.appId||``,e._persistenceKey,e._app?.options.apiKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Su(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var Qu=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(ii.fromBase64String(t))}catch(e){throw new N(M.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(ii.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Tr(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Qu._jsonSchemaVersion=`firestore/bytes/1.0`,Qu._jsonSchema={type:wr(`string`,Qu._jsonSchemaVersion),bytes:wr(`string`)};var $u=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new N(M.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},ed=class{constructor(e){this._methodName=e}},td=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new N(M.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new N(M.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return P(this._lat,e._lat)||P(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Tr(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};td._jsonSchemaVersion=`firestore/geoPoint/1.0`,td._jsonSchema={type:wr(`string`,td._jsonSchemaVersion),latitude:wr(`number`),longitude:wr(`number`)};var nd=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Tr(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new N(M.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};nd._jsonSchemaVersion=`firestore/vectorValue/1.0`,nd._jsonSchema={type:wr(`string`,nd._jsonSchemaVersion),vectorValues:wr(`object`)};var rd=/^__.*__$/,id=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new yo(e,this.data,t,this.fieldTransforms):new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}},ad=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function od(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k(40011,{dataSource:e})}}var sd=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return X(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError(`Document fields must not be empty`);if(od(this.dataSource)&&rd.test(e))throw this.createError(`Document fields cannot begin and end with "__"`)}},cd=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vc(e)}createContext(e,t,n,r=!1){return new sd({dataSource:e,methodName:t,targetDoc:n,path:gr.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ld(e){let t=e._freezeSettings(),n=Vc(e._databaseId);return new cd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ud(e,t,n,r,i,a={}){let o=e.createContext(a.merge||a.mergeFields?2:0,t,n,i);vd(`Data must be an object, but it was:`,o,r);let s=gd(r,o),c,l;if(a.merge)c=new ni(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=yd(t,r,n);if(!o.contains(i))throw new N(M.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Sd(e,i)||e.push(i)}c=new ni(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new id(new Hi(s),c,l)}var dd=class e extends ed{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}};function fd(e,t,n,r){let i=e.createContext(1,t,n);vd(`Data must be an object, but it was:`,i,r);let a=[],o=Hi.empty();return Xr(r,((e,r)=>{let s=xd(t,e,n);r=Fe(r);let c=i.childContextForFieldPath(s);if(r instanceof dd)a.push(s);else{let e=hd(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new ad(o,new ni(a),i.fieldTransforms)}function pd(e,t,n,r,i,a){let o=e.createContext(1,t,n),s=[yd(t,r,n)],c=[i];if(a.length%2!=0)throw new N(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(yd(t,a[e])),c.push(a[e+1]);let l=[],u=Hi.empty();for(let e=s.length-1;e>=0;--e)if(!Sd(l,s[e])){let t=s[e],n=c[e];n=Fe(n);let r=o.childContextForFieldPath(t);if(n instanceof dd)l.push(t);else{let e=hd(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new ad(u,new ni(l),o.fieldTransforms)}function md(e,t,n,r=!1){return hd(n,e.createContext(r?4:3,t))}function hd(e,t){if(_d(e=Fe(e)))return vd(`Unsupported field value:`,t,e),gd(e,t);if(e instanceof ed)return function(e,t){if(!od(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=hd(i,t.childContextForArray(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Fe(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Za(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Or.fromDate(e);return{timestampValue:$o(t.serializer,n)}}if(e instanceof Or){let n=new Or(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$o(t.serializer,n)}}if(e instanceof td)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qu)return{bytesValue:es(t.serializer,e._byteString)};if(e instanceof Vu){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:rs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof nd)return function(e,t){let n=e instanceof nd?e.toArray():e;return{mapValue:{fields:{[bi]:{stringValue:Ci},[wi]:{arrayValue:{values:n.map((e=>{if(typeof e!=`number`)throw t.createError(`VectorValues must only contain numeric values.`);return Ya(t.serializer,e)}))}}}}}}(e,t);if(ks(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${Sr(e)}`)}(e,t)}function gd(e,t){let n={};return Zr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(e,((e,r)=>{let i=hd(r,t.childContextForField(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function _d(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Or||e instanceof td||e instanceof Qu||e instanceof Vu||e instanceof ed||e instanceof nd||ks(e))}function vd(e,t,n){if(!_d(n)||!xr(n)){let r=Sr(n);throw r===`an object`?t.createError(e+` a custom object`):t.createError(e+` `+r)}}function yd(e,t,n){if((t=Fe(t))instanceof $u)return t._internalPath;if(typeof t==`string`)return xd(e,t);throw X(`Field path arguments must be of type string or `,e,!1,void 0,n)}var bd=RegExp(`[~\\*/\\[\\]]`);function xd(e,t,n){if(t.search(bd)>=0)throw X(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $u(...t.split(`.`))._internalPath}catch{throw X(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function X(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new N(M.INVALID_ARGUMENT,s+e+c)}function Sd(e,t){return e.some((e=>e.isEqual(t)))}var Cd=class{convertValue(e,t=`none`){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw k(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Xr(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[wi].arrayValue?.values?.map((e=>si(e.doubleValue)));return new nd(t)}convertGeoPoint(e){return new td(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=mi(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(hi(e));default:return null}}convertTimestamp(e){let t=oi(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=mr.fromString(e);A(Os(n),9688,{name:e});let r=new vi(n.get(1),n.get(3)),i=new F(n.popFirst(5));return r.isEqual(t)||Kn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},wd=class extends Cd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vu(this.firestore,null,t)}},Td=`@firebase/firestore`,Ed=`4.10.0`;function Dd(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var Od=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new kd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(yd(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},kd=class extends Od{data(){return super.data()}};function Ad(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new N(M.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var jd=class{},Md=class extends jd{};function Nd(e,t,...n){let r=[];t instanceof jd&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof Fd)).length,n=e.filter((e=>e instanceof Pd)).length;if(t>1||t>0&&n>0)throw new N(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var Pd=class e extends Md{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return Rd(e._query,t),new Bu(e.firestore,e.converter,Da(e._query,t))}_parse(e){let t=ld(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new N(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){Ld(o,a);let t=[];for(let n of o)t.push(Id(r,e,n));s={arrayValue:{values:t}}}else s=Id(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||Ld(o,a),s=md(n,t,o,a===`in`||a===`not-in`);return Zi.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}},Fd=class e extends jd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Qi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)Rd(n,e),n=Da(n,e)}(e._query,t),new Bu(e.firestore,e.converter,Da(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}};function Id(e,t,n){if(typeof(n=Fe(n))==`string`){if(n===``)throw new N(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Ca(t)&&n.indexOf(`/`)!==-1)throw new N(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(mr.fromString(n));if(!F.isDocumentKey(r))throw new N(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pi(e,new F(r))}if(n instanceof Vu)return Pi(e,n._key);throw new N(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sr(n)}.`)}function Ld(e,t){if(!Array.isArray(e)||e.length===0)throw new N(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Rd(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new N(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new N(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function zd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Bd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vd=class e extends Od{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(yd(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new N(M.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Vd._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Vd._jsonSchema={type:wr(`string`,Vd._jsonSchemaVersion),bundleSource:wr(`string`,`DocumentSnapshot`),bundleName:wr(`string`),bundle:wr(`string`)};var Hd=class extends Vd{data(e={}){return super.data(e)}},Ud=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Hd(this._firestore,this._userDataWriter,n.key,n,new Bd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new N(M.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Hd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Bd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Hd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Wd(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new N(M.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=or.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Wd(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return k(61501,{type:e})}}Ud._jsonSchemaVersion=`firestore/querySnapshot/1.0`,Ud._jsonSchema={type:wr(`string`,Ud._jsonSchemaVersion),bundleSource:wr(`string`,`QuerySnapshot`),bundleName:wr(`string`),bundle:wr(`string`)};var Gd=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,t,n){this._verifyNotCommitted();let r=Kd(e,this._firestore),i=zd(r.converter,t,n),a=ud(this._dataReader,`WriteBatch.set`,r._key,i,r.converter!==null,n);return this._mutations.push(a.toMutation(r._key,V.none())),this}update(e,t,n,...r){this._verifyNotCommitted();let i=Kd(e,this._firestore),a;return a=typeof(t=Fe(t))==`string`||t instanceof $u?pd(this._dataReader,`WriteBatch.update`,i._key,t,n,r):fd(this._dataReader,`WriteBatch.update`,i._key,t),this._mutations.push(a.toMutation(i._key,V.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Kd(e,this._firestore);return this._mutations=this._mutations.concat(new wo(t._key,V.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new N(M.FAILED_PRECONDITION,`A write batch can no longer be used after commit() has been called.`)}};function Kd(e,t){if((e=Fe(e)).firestore!==t)throw new N(M.INVALID_ARGUMENT,`Provided document reference is from a different Firestore instance.`);return e}function qd(e,t,n,...r){e=Cr(e,Vu);let i=Cr(e.firestore,Ju),a=ld(i),o;return o=typeof(t=Fe(t))==`string`||t instanceof $u?pd(a,`updateDoc`,e._key,t,n,r):fd(a,`updateDoc`,e._key,t),Zd(i,[o.toMutation(e._key,V.exists(!0))])}function Jd(e){return Zd(Cr(e.firestore,Ju),[new wo(e._key,V.none())])}function Yd(e,t){let n=Cr(e.firestore,Ju),r=Wu(e),i=zd(e.converter,t);return Zd(n,[ud(ld(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,V.exists(!1))]).then((()=>r))}function Xd(e,...t){e=Fe(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||Dd(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Dd(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof Vu)o=Cr(e.firestore,Ju),s=ba(e._key.path),a={next:n=>{t[r]&&t[r](Qd(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=Cr(e,Bu);o=Cr(n.firestore,Ju),s=n._query;let i=new wd(o);a={next:e=>{t[r]&&t[r](new Ud(o,i,n,e))},error:t[r+1],complete:t[r+2]},Ad(e._query)}return ku(Xu(o),s,i,a)}function Zd(e,t){return Au(Xu(e),t)}function Qd(e,t,n){let r=n.docs.get(t._key);return new Vd(e,new wd(e),t._key,r,new Bd(n.hasPendingWrites,n.fromCache),t.converter)}function $d(e){return e=Cr(e,Ju),Xu(e),new Gd(e,(t=>Zd(e,t)))}(function(e,t=!0){Un(on),en(new Ie(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Ju(new er(e.getProvider(`auth-internal`)),new ir(i,e.getProvider(`app-check-internal`)),yi(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),ln(Td,Ed,e),ln(Td,Ed,`esm2020`)})();function ef(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tf=ef,nf=new Se(`auth`,`Firebase`,ef()),rf=new qe(`@firebase/auth`);function af(e,...t){rf.logLevel<=E.WARN&&rf.warn(`Auth (${on}): ${e}`,...t)}function of(e,...t){rf.logLevel<=E.ERROR&&rf.error(`Auth (${on}): ${e}`,...t)}function sf(e,...t){throw df(e,...t)}function cf(e,...t){return df(e,...t)}function lf(e,t,n){return new Se(`auth`,`Firebase`,{...tf(),[t]:n}).create(t,{appName:e.name})}function uf(e){return lf(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function df(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return nf.create(e,...t)}function Z(e,t,...n){if(!e)throw df(t,...n)}function ff(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw of(t),Error(t)}function pf(e,t){e||ff(t)}function mf(){return typeof self<`u`&&self.location?.href||``}function hf(){return gf()===`http:`||gf()===`https:`}function gf(){return typeof self<`u`&&self.location?.protocol||null}function _f(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(hf()||me()||`connection`in navigator)?navigator.onLine:!0}function vf(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var yf=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,pf(t>e,`Short delay should be less than long delay!`),this.isMobile=T()||he()}get(){return _f()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function bf(e,t){pf(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var xf=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;ff(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;ff(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;ff(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Sf={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Cf=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],wf=new yf(3e4,6e4);function Tf(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ef(e,t,n,r,i={}){return Df(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Oe({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return pe()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&ie(e.emulatorConfig.host)&&(c.credentials=`include`),xf.fetch()(await kf(e,e.config.apiHost,n,o),c)})}async function Df(e,t,n){e._canInitEmulator=!1;let r={...Sf,...t};try{let t=new jf(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Mf(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Mf(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Mf(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Mf(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw lf(e,o,n);sf(e,o)}}catch(t){if(t instanceof xe)throw t;sf(e,`network-request-failed`,{message:String(t)})}}async function Of(e,t,n,r,i={}){let a=await Ef(e,t,n,r,i);return`mfaPendingCredential`in a&&sf(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function kf(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?bf(e.config,i):`${e.config.apiScheme}://${i}`;return Cf.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function Af(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var jf=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(cf(this.auth,`network-request-failed`)),wf.get())})}};function Mf(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=cf(e,t,r);return i.customData._tokenResponse=n,i}function Nf(e){return e!==void 0&&e.enterprise!==void 0}var Pf=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Af(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function Ff(e,t){return Ef(e,`GET`,`/v2/recaptchaConfig`,Tf(e,t))}async function If(e,t){return Ef(e,`POST`,`/v1/accounts:delete`,t)}async function Lf(e,t){return Ef(e,`POST`,`/v1/accounts:lookup`,t)}function Rf(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zf(e,t=!1){let n=Fe(e),r=await n.getIdToken(t),i=Vf(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Rf(Bf(i.auth_time)),issuedAtTime:Rf(Bf(i.iat)),expirationTime:Rf(Bf(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Bf(e){return Number(e)*1e3}function Vf(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return of(`JWT malformed, contained fewer than 3 sections`),null;try{let e=_(n);return e?JSON.parse(e):(of(`Failed to decode base64 JWT payload`),null)}catch(e){return of(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function Hf(e){let t=Vf(e);return Z(t,`internal-error`),Z(t.exp!==void 0,`internal-error`),Z(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function Uf(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof xe&&Wf(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function Wf({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var Gf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Kf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rf(this.lastLoginAt),this.creationTime=Rf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function qf(e){let t=e.auth,n=await Uf(e,Lf(t,{idToken:await e.getIdToken()}));Z(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?Xf(r.providerUserInfo):[],a=Yf(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Kf(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function Jf(e){let t=Fe(e);await qf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Yf(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Xf(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Zf(e,t){let n=await Df(e,{},async()=>{let n=Oe({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await kf(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&ie(e.emulatorConfig.host)&&(s.credentials=`include`),xf.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qf(e,t){return Ef(e,`POST`,`/v2/accounts:revokeToken`,Tf(e,t))}var $f=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,`internal-error`),Z(e.idToken!==void 0,`internal-error`),Z(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):Hf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,`internal-error`);let t=Hf(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Zf(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(Z(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(Z(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(Z(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return ff(`not implemented`)}};function ep(e,t){Z(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var tp=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new Gf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Kf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await Uf(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zf(this,e)}reload(){return Jf(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await qf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(uf(this.auth));let e=await this.getIdToken();return await Uf(this,If(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;Z(d&&h,t,`internal-error`);let g=$f.fromJSON(this.name,h);Z(typeof d==`string`,t,`internal-error`),ep(r,t.name),ep(i,t.name),Z(typeof f==`boolean`,t,`internal-error`),Z(typeof p==`boolean`,t,`internal-error`),ep(a,t.name),ep(o,t.name),ep(s,t.name),ep(c,t.name),ep(l,t.name),ep(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new $f;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await qf(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];Z(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:Xf(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new $f;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Kf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},np=new Map;function rp(e){pf(e instanceof Function,`Expected a class definition`);let t=np.get(e);return t?(pf(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,np.set(e,t),t)}var ip=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};ip.type=`NONE`;var ap=ip;function op(e,t,n){return`firebase:${e}:${t}:${n}`}var sp=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=op(this.userKey,r.apiKey,i),this.fullPersistenceKey=op(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Lf(this.auth,{idToken:e}).catch(()=>void 0);return t?tp._fromGetAccountInfoResponse(this.auth,t,e):null}return tp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(rp(ap),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||rp(ap),o=op(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Lf(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await tp._fromGetAccountInfoResponse(t,e,n)}else r=tp._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function cp(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(fp(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(lp(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(mp(t))return`Blackberry`;if(hp(t))return`Webos`;if(up(t))return`Safari`;if((t.includes(`chrome/`)||dp(t))&&!t.includes(`edge/`))return`Chrome`;if(pp(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function lp(e=w()){return/firefox\//i.test(e)}function up(e=w()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function dp(e=w()){return/crios\//i.test(e)}function fp(e=w()){return/iemobile/i.test(e)}function pp(e=w()){return/android/i.test(e)}function mp(e=w()){return/blackberry/i.test(e)}function hp(e=w()){return/webos/i.test(e)}function gp(e=w()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _p(e=w()){return gp(e)&&!!window.navigator?.standalone}function vp(){return ge()&&document.documentMode===10}function yp(e=w()){return gp(e)||pp(e)||hp(e)||mp(e)||/windows phone/i.test(e)||fp(e)}function bp(e,t=[]){let n;switch(e){case`Browser`:n=cp(w());break;case`Worker`:n=`${cp(w())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${on}/${r}`}var xp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Sp(e,t={}){return Ef(e,`GET`,`/v2/passwordPolicy`,Tf(e,t))}var Cp=6,wp=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Cp,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Tp=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dp(this),this.idTokenSubscription=new Dp(this),this.beforeStateQueue=new xp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rp(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sp.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Lf(this,{idToken:e}),n=await tp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qf(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vf()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(uf(this));let t=e?Fe(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(uf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(uf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rp(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new wp(await Sp(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Se(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await Qf(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&rp(e)||this._popupRedirectResolver;Z(t,this,`argument-error`),this.redirectPersistenceManager=await sp.create(this,[rp(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&af(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Ep(e){return Fe(e)}var Dp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=je(e=>this.observer=e)}get next(){return Z(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Op={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function kp(e){Op=e}function Ap(e){return Op.loadJS(e)}function jp(){return Op.recaptchaEnterpriseScript}function Mp(){return Op.gapiScript}function Np(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Pp=class{constructor(){this.enterprise=new Fp}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Fp=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Ip=`recaptcha-enterprise`,Lp=`NO_RECAPTCHA`,Rp=class{constructor(e){this.type=Ip,this.auth=Ep(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ff(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new Pf(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;Nf(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Lp)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new Pp().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&Nf(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=jp();t.length!==0&&(t+=n),Ap(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function zp(e,t,n,r=!1,i=!1){let a=new Rp(e),o;if(i)o=Lp;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function Bp(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await zp(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await zp(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await zp(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await zp(e,t,n,!1,!0))):Promise.reject(i)):r(e,await zp(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function Vp(e){let t=Ep(e),n=new Pf(await Ff(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new Rp(t).verify()}function Hp(e,t){let n=tn(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Ee(n.getOptions(),t??{}))return e;sf(e,`already-initialized`)}return n.initialize({options:t})}function Up(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(rp);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Wp(e,t,n){let r=Ep(e);Z(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Gp(t),{host:o,port:s}=Kp(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Z(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),Z(Ee(l,r.config.emulator)&&Ee(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ie(o)?(ae(`${a}//${o}${c}`),de(`Auth`,!0)):i||Jp()}function Gp(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Kp(e){let t=Gp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:qp(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:qp(t)}}}function qp(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Jp(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var Yp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ff(`not implemented`)}_getIdTokenResponse(e){return ff(`not implemented`)}_linkToIdToken(e,t){return ff(`not implemented`)}_getReauthenticationResolver(e){return ff(`not implemented`)}};async function Xp(e,t){return Ef(e,`POST`,`/v1/accounts:signUp`,t)}async function Zp(e,t){return Of(e,`POST`,`/v1/accounts:signInWithPassword`,Tf(e,t))}async function Qp(e,t){return Of(e,`POST`,`/v1/accounts:signInWithEmailLink`,Tf(e,t))}async function $p(e,t){return Of(e,`POST`,`/v1/accounts:signInWithEmailLink`,Tf(e,t))}var em=class e extends Yp{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return Bp(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,Zp,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Qp(e,{email:this._email,oobCode:this._password});default:sf(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return Bp(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,Xp,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return $p(e,{idToken:t,email:this._email,oobCode:this._password});default:sf(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function tm(e,t){return Of(e,`POST`,`/v1/accounts:signInWithIdp`,Tf(e,t))}var nm=`http://localhost`,rm=class e extends Yp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):sf(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return tm(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,tm(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,tm(e,t)}buildRequest(){let e={requestUri:nm,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oe(t)}return e}};async function im(e,t){return Ef(e,`POST`,`/v1/accounts:sendVerificationCode`,Tf(e,t))}async function am(e,t){return Of(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Tf(e,t))}async function om(e,t){let n=await Of(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Tf(e,t));if(n.temporaryProof)throw Mf(e,`account-exists-with-different-credential`,n);return n}var sm={USER_NOT_FOUND:`user-not-found`};async function cm(e,t){return Of(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Tf(e,{...t,operation:`REAUTH`}),sm)}var lm=class e extends Yp{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return am(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return om(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return cm(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function um(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function dm(e){let t=ke(Ae(e)).link,n=t?ke(Ae(t)).deep_link_id:null,r=ke(Ae(e)).deep_link_id;return(r?ke(Ae(r)).link:null)||r||n||t||e}var fm=class e{constructor(e){let t=ke(Ae(e)),n=t.apiKey??null,r=t.oobCode??null,i=um(t.mode??null);Z(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=dm(t);try{return new e(n)}catch{return null}}},pm=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return em._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=fm.parseLink(t);return Z(n,`argument-error`),em._fromEmailAndCode(e,n.code,n.tenantId)}};pm.PROVIDER_ID=`password`,pm.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,pm.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var mm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},hm=class extends mm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},gm=class e extends hm{constructor(){super(`facebook.com`)}static credential(t){return rm._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};gm.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,gm.PROVIDER_ID=`facebook.com`;var _m=class e extends hm{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return rm._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};_m.GOOGLE_SIGN_IN_METHOD=`google.com`,_m.PROVIDER_ID=`google.com`;var vm=class e extends hm{constructor(){super(`github.com`)}static credential(t){return rm._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};vm.GITHUB_SIGN_IN_METHOD=`github.com`,vm.PROVIDER_ID=`github.com`;var ym=class e extends hm{constructor(){super(`twitter.com`)}static credential(t,n){return rm._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};ym.TWITTER_SIGN_IN_METHOD=`twitter.com`,ym.PROVIDER_ID=`twitter.com`;async function bm(e,t){return Of(e,`POST`,`/v1/accounts:signUp`,Tf(e,t))}var xm=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await tp._fromIdTokenResponse(t,r,i),providerId:Sm(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Sm(r),_tokenResponse:r,operationType:n})}};function Sm(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}async function Cm(e){if(nn(e.app))return Promise.reject(uf(e));let t=Ep(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new xm({user:t.currentUser,providerId:null,operationType:`signIn`});let n=await bm(t,{returnSecureToken:!0}),r=await xm._fromIdTokenResponse(t,`signIn`,n,!0);return await t._updateCurrentUser(r.user),r}var wm=class e extends xe{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function Tm(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?wm._fromErrorAndOperation(e,n,t,r):n})}async function Em(e,t,n=!1){let r=await Uf(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return xm._forOperation(e,`link`,r)}async function Dm(e,t,n=!1){let{auth:r}=e;if(nn(r.app))return Promise.reject(uf(r));let i=`reauthenticate`;try{let a=await Uf(e,Tm(r,i,t,e),n);Z(a.idToken,r,`internal-error`);let o=Vf(a.idToken);Z(o,r,`internal-error`);let{sub:s}=o;return Z(e.uid===s,r,`user-mismatch`),xm._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&sf(r,`user-mismatch`),e}}async function Om(e,t,n=!1){if(nn(e.app))return Promise.reject(uf(e));let r=`signIn`,i=await Tm(e,r,t),a=await xm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function km(e,t,n,r){return Fe(e).onIdTokenChanged(t,n,r)}function Am(e,t,n){return Fe(e).beforeAuthStateChanged(t,n)}function jm(e,t,n,r){return Fe(e).onAuthStateChanged(t,n,r)}function Mm(e,t){return Ef(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Tf(e,t))}function Nm(e,t){return Ef(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Tf(e,t))}function Pm(e,t){return Ef(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Tf(e,t))}function Fm(e,t){return Ef(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Tf(e,t))}var Im=`__sak`,Lm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Im,`1`),this.storage.removeItem(Im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Rm=1e3,zm=10,Bm=class extends Lm{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);vp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,zm):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Rm)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Bm.type=`LOCAL`;var Vm=Bm,Hm=1e3;function Um(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Wm(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var Gm=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=Wm(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Um(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=Wm(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=Wm(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Um(n),i=setInterval(()=>{let e=Um(n);e!==r&&(t(e),r=e)},Hm);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};Gm.type=`COOKIE`;var Km=class extends Lm{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Km.type=`SESSION`;var qm=Km;function Jm(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var Ym=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await Jm(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};Ym.receivers=[];function Xm(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var Zm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=Xm(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function Qm(){return window}function $m(e){Qm().location.href=e}function eh(){return Qm().WorkerGlobalScope!==void 0&&typeof Qm().importScripts==`function`}async function th(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nh(){return navigator?.serviceWorker?.controller||null}function rh(){return eh()?self:null}var ih=`firebaseLocalStorageDb`,ah=1,oh=`firebaseLocalStorage`,sh=`fbase_key`,ch=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function lh(e,t){return e.transaction([oh],t?`readwrite`:`readonly`).objectStore(oh)}function uh(){return new ch(indexedDB.deleteDatabase(ih)).toPromise()}function dh(){let e=indexedDB.open(ih,ah);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(oh,{keyPath:sh})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(oh)?t(n):(n.close(),await uh(),t(await dh()))})})}async function fh(e,t,n){return new ch(lh(e,!0).put({[sh]:t,value:n})).toPromise()}async function ph(e,t){let n=await new ch(lh(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function mh(e,t){return new ch(lh(e,!0).delete(t)).toPromise()}var hh=800,gh=3,_h=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await dh(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>gh)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return eh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ym._getInstance(rh()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await th(),!this.activeServiceWorker)return;this.sender=new Zm(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nh()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await dh();return await fh(e,Im,`1`),await mh(e,Im),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>fh(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ph(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new ch(lh(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hh)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};_h.type=`LOCAL`;var vh=_h;function yh(e,t){return Ef(e,`POST`,`/v2/accounts/mfaSignIn:start`,Tf(e,t))}function bh(e,t){return Ef(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Tf(e,t))}function xh(e,t){return Ef(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Tf(e,t))}Np(`rcb`),new yf(3e4,6e4);var Sh=`recaptcha`;async function Ch(e,t,n){if(!e._getRecaptchaConfig())try{await Vp(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return Z(t.type===`enroll`,e,`internal-error`),(await Bp(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Lp?(Z(n?.type===Sh,e,`argument-error`),Mm(e,await wh(e,t,n))):Mm(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{Z(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return Z(i,e,`missing-multi-factor-info`),(await Bp(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===Lp?(Z(n?.type===Sh,e,`argument-error`),yh(e,await wh(e,t,n))):yh(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await Bp(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===Lp?(Z(n?.type===Sh,e,`argument-error`),im(e,await wh(e,t,n))):im(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function wh(e,t,n){Z(n.type===Sh,e,`argument-error`);let r=await n.verify();Z(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var Th=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ep(t)}verifyPhoneNumber(e,t){return Ch(this.auth,e,Fe(t))}static credential(e,t){return lm._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?lm._fromTokenResponse(t,n):null}};Th.PROVIDER_ID=`phone`,Th.PHONE_SIGN_IN_METHOD=`phone`;function Eh(e,t){return t?rp(t):(Z(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var Dh=class extends Yp{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return tm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Oh(e){return Om(e.auth,new Dh(e),e.bypassAuthState)}function kh(e){let{auth:t,user:n}=e;return Z(n,t,`internal-error`),Dm(n,new Dh(e),e.bypassAuthState)}async function Ah(e){let{auth:t,user:n}=e;return Z(n,t,`internal-error`),Em(n,new Dh(e),e.bypassAuthState)}var jh=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return Oh;case`linkViaPopup`:case`linkViaRedirect`:return Ah;case`reauthViaPopup`:case`reauthViaRedirect`:return kh;default:sf(this.auth,`internal-error`)}}resolve(e){pf(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pf(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},Mh=new yf(2e3,1e4),Nh=class e extends jh{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return Z(e,this.auth,`internal-error`),e}async onExecution(){pf(this.filter.length===1,`Popup operations only handle one event`);let e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(cf(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cf(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cf(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,Mh.get())};e()}};Nh.currentPopupAction=null;var Ph=`pendingRedirect`,Fh=new Map,Ih=class extends jh{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{let t=await Lh(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Lh(e,t){let n=Bh(t),r=zh(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Rh(e,t){Fh.set(e._key(),t)}function zh(e){return rp(e._redirectPersistence)}function Bh(e){return op(Ph,e.config.apiKey,e.name)}async function Vh(e,t,n=!1){if(nn(e.app))return Promise.reject(uf(e));let r=Ep(e),i=await new Ih(r,Eh(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var Hh=600*1e3,Uh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kh(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!Gh(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(cf(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Hh&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wh(e))}saveEventToCache(e){this.cachedEventUids.add(Wh(e)),this.lastProcessedEventTime=Date.now()}};function Wh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function Gh({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function Kh(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return Gh(e);default:return!1}}async function qh(e,t={}){return Ef(e,`GET`,`/v1/projects`,t)}var Jh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yh=/^https?/;async function Xh(e){if(e.config.emulator)return;let{authorizedDomains:t}=await qh(e);for(let e of t)try{if(Zh(e))return}catch{}sf(e,`unauthorized-domain`)}function Zh(e){let t=mf(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!Yh.test(n))return!1;if(Jh.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var Qh=new yf(3e4,6e4);function $h(){let e=Qm().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function eg(e){return new Promise((t,n)=>{function r(){$h(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$h(),n(cf(e,`network-request-failed`))},timeout:Qh.get()})}if(Qm().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Qm().gapi?.load)r();else{let t=Np(`iframefcb`);return Qm()[t]=()=>{gapi.load?r():n(cf(e,`network-request-failed`))},Ap(`${Mp()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw tg=null,e})}var tg=null;function ng(e){return tg||=eg(e),tg}var rg=new yf(5e3,15e3),ig=`__/auth/iframe`,ag=`emulator/auth/iframe`,og={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},sg=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function cg(e){let t=e.config;Z(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?bf(t,ag):`https://${e.config.authDomain}/${ig}`,r={apiKey:t.apiKey,appName:e.name,v:on},i=sg.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Oe(r).slice(1)}`}async function lg(e){let t=await ng(e),n=Qm().gapi;return Z(n,e,`internal-error`),t.open({where:document.body,url:cg(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:og,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=cf(e,`network-request-failed`),a=Qm().setTimeout(()=>{r(i)},rg.get());function o(){Qm().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var ug={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},dg=500,fg=600,pg=`_blank`,mg=`http://localhost`,hg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gg(e,t,n,r=dg,i=fg){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...ug,width:r.toString(),height:i.toString(),top:a,left:o},l=w().toLowerCase();n&&(s=dp(l)?pg:n),lp(l)&&(t||=mg,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(_p(l)&&s!==`_self`)return _g(t||``,s),new hg(null);let d=window.open(t||``,s,u);Z(d,e,`popup-blocked`);try{d.focus()}catch{}return new hg(d)}function _g(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var vg=`__/auth/handler`,yg=`emulator/auth/handler`,bg=`fac`;async function xg(e,t,n,r,i,a){Z(e.config.authDomain,e,`auth-domain-config-required`),Z(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:on,eventId:i};if(t instanceof mm){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,Te(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof hm){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${bg}=${encodeURIComponent(c)}`:``;return`${Sg(e)}?${Oe(s).slice(1)}${l}`}function Sg({config:e}){return e.emulator?bf(e,yg):`https://${e.authDomain}/${vg}`}var Cg=`webStorageSupport`,wg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qm,this._completeRedirectFn=Vh,this._overrideRedirectResult=Rh}async _openPopup(e,t,n,r){return pf(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),gg(e,await xg(e,t,n,mf(),r),Xm())}async _openRedirect(e,t,n,r){return await this._originValidation(e),$m(await xg(e,t,n,mf(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(pf(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await lg(e),n=new Uh(e);return t.register(`authEvent`,t=>(Z(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cg,{type:Cg},n=>{let r=n?.[0]?.[Cg];r!==void 0&&t(!!r),sf(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Xh(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yp()||up()||gp()}},Tg=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return ff(`unexpected MultiFactorSessionType`)}}},Eg=class e extends Tg{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return Nm(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return bh(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Dg=class{constructor(){}static assertion(e){return Eg._fromCredential(e)}};Dg.FACTOR_ID=`phone`;var Og=class{static assertionForEnrollment(e,t){return kg._fromSecret(e,t)}static assertionForSignIn(e,t){return kg._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;Z(t.user?.auth!==void 0,`internal-error`);let n=await Pm(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Ag._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};Og.FACTOR_ID=`totp`;var kg=class e extends Tg{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return Z(this.secret!==void 0,e,`argument-error`),Fm(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Z(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return xh(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},Ag=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(jg(e)||jg(t))&&(n=!0),n&&(jg(e)&&(e=this.auth.currentUser?.email||`unknownuser`),jg(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function jg(e){return e===void 0||e?.length===0}var Mg=`@firebase/auth`,Ng=`1.12.0`,Pg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Fg(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function Ig(e){en(new Ie(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;Z(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new Tp(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:bp(e)});return Up(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),en(new Ie(`auth-internal`,e=>(e=>new Pg(e))(Ep(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),ln(Mg,Ng,Fg(e)),ln(Mg,Ng,`esm2020`)}var Lg=ne(`authIdTokenMaxAge`)||300,Rg=null,zg=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Lg)return;let i=n?.token;Rg!==i&&(Rg=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Bg(e=cn()){let t=tn(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=Hp(e,{popupRedirectResolver:wg,persistence:[vh,Vm,qm]}),r=ne(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=zg(e.toString());Am(n,t,()=>t(n.currentUser)),km(n,e=>t(e))}}let i=ee(`auth`);return i&&Wp(n,`http://${i}`),n}function Vg(){return document.getElementsByTagName(`head`)?.[0]??document}kp({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=cf(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,Vg().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),Ig(`Browser`);var Hg=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),Ug=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),Wg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Gg=e=>{let t=Wg(e);return t.charAt(0).toUpperCase()+t.slice(1)},Kg={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},qg=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0;return!1},Jg=(0,l.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,l.createElement)(`svg`,{ref:c,...Kg,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Hg(`lucide`,i),...!a&&!qg(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Q=(e,t)=>{let n=(0,l.forwardRef)(({className:n,...r},i)=>(0,l.createElement)(Jg,{ref:i,iconNode:t,className:Hg(`lucide-${Ug(Gg(e))}`,`lucide-${e}`,n),...r}));return n.displayName=Gg(e),n},Yg=Q(`activity`,[[`path`,{d:`M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2`,key:`169zse`}]]),Xg=Q(`arrow-right-left`,[[`path`,{d:`m16 3 4 4-4 4`,key:`1x1c3m`}],[`path`,{d:`M20 7H4`,key:`zbl0bi`}],[`path`,{d:`m8 21-4-4 4-4`,key:`h9nckh`}],[`path`,{d:`M4 17h16`,key:`g4d7ey`}]]),Zg=Q(`book-open`,[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]]),Qg=Q(`calendar-days`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M8 18h.01`,key:`lrp35t`}],[`path`,{d:`M12 18h.01`,key:`mhygvu`}],[`path`,{d:`M16 18h.01`,key:`kzsmim`}]]),$g=Q(`calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),e_=Q(`chart-pie`,[[`path`,{d:`M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z`,key:`pzmjnu`}],[`path`,{d:`M21.21 15.89A10 10 0 1 1 8 2.83`,key:`k2fpak`}]]),t_=Q(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),n_=Q(`circle-plus`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 12h8`,key:`1wcyev`}],[`path`,{d:`M12 8v8`,key:`napkw2`}]]),r_=Q(`clipboard-list`,[[`rect`,{width:`8`,height:`4`,x:`8`,y:`2`,rx:`1`,ry:`1`,key:`tgr4d6`}],[`path`,{d:`M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2`,key:`116196`}],[`path`,{d:`M12 11h4`,key:`1jrz19`}],[`path`,{d:`M12 16h4`,key:`n85exb`}],[`path`,{d:`M8 11h.01`,key:`1dfujw`}],[`path`,{d:`M8 16h.01`,key:`18s6g9`}]]),i_=Q(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),a_=Q(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),o_=Q(`file-check`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`m9 15 2 2 4-4`,key:`1grp1n`}]]),s_=Q(`file-spreadsheet`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M8 13h2`,key:`yr2amv`}],[`path`,{d:`M14 13h2`,key:`un5t4a`}],[`path`,{d:`M8 17h2`,key:`2yhykz`}],[`path`,{d:`M14 17h2`,key:`10kma7`}]]),c_=Q(`file-text`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),l_=Q(`house`,[[`path`,{d:`M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8`,key:`5wwlr5`}],[`path`,{d:`M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`,key:`r6nss1`}]]),u_=Q(`image`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,ry:`2`,key:`1m3agn`}],[`circle`,{cx:`9`,cy:`9`,r:`2`,key:`af1f0g`}],[`path`,{d:`m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21`,key:`1xmnt7`}]]),d_=Q(`key`,[[`path`,{d:`m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4`,key:`g0fldk`}],[`path`,{d:`m21 2-9.6 9.6`,key:`1j0ho8`}],[`circle`,{cx:`7.5`,cy:`15.5`,r:`5.5`,key:`yqb3hr`}]]),f_=Q(`list`,[[`path`,{d:`M3 5h.01`,key:`18ugdj`}],[`path`,{d:`M3 12h.01`,key:`nlz23k`}],[`path`,{d:`M3 19h.01`,key:`noohij`}],[`path`,{d:`M8 5h13`,key:`1pao27`}],[`path`,{d:`M8 12h13`,key:`1za7za`}],[`path`,{d:`M8 19h13`,key:`m83p4d`}]]),p_=Q(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),m_=Q(`octagon-alert`,[[`path`,{d:`M12 16h.01`,key:`1drbdi`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z`,key:`1fd625`}]]),h_=Q(`phone`,[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]]),g_=Q(`printer`,[[`path`,{d:`M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2`,key:`143wyd`}],[`path`,{d:`M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6`,key:`1itne7`}],[`rect`,{x:`6`,y:`14`,width:`12`,height:`8`,rx:`1`,key:`1ue0tg`}]]),__=Q(`refresh-ccw`,[[`path`,{d:`M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`14sxne`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}],[`path`,{d:`M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16`,key:`1hlbsb`}],[`path`,{d:`M16 16h5v5`,key:`ccwih5`}]]),v_=Q(`save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),y_=Q(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),b_=Q(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),x_=Q(`shield`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}]]),S_=Q(`square-pen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),C_=Q(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),w_=Q(`triangle-alert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),T_=Q(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),E_=Q(`user-check`,[[`path`,{d:`m16 11 2 2 4-4`,key:`9rsbq5`}],[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),D_=Q(`user-cog`,[[`path`,{d:`M10 15H6a4 4 0 0 0-4 4v2`,key:`1nfge6`}],[`path`,{d:`m14.305 16.53.923-.382`,key:`1itpsq`}],[`path`,{d:`m15.228 13.852-.923-.383`,key:`eplpkm`}],[`path`,{d:`m16.852 12.228-.383-.923`,key:`13v3q0`}],[`path`,{d:`m16.852 17.772-.383.924`,key:`1i8mnm`}],[`path`,{d:`m19.148 12.228.383-.923`,key:`1q8j1v`}],[`path`,{d:`m19.53 18.696-.382-.924`,key:`vk1qj3`}],[`path`,{d:`m20.772 13.852.924-.383`,key:`n880s0`}],[`path`,{d:`m20.772 16.148.924.383`,key:`1g6xey`}],[`circle`,{cx:`18`,cy:`15`,r:`3`,key:`gjjjvw`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),O_=Q(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),k_=Q(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),A_=Q(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),j_=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=e(((e,t)=>{t.exports=j_()}))(),M_=sn({apiKey:`AIzaSyBdNyY60fcACt2D5Kn-Eh4GtKkQUiqwec8`,authDomain:`sibko-gurubk.firebaseapp.com`,projectId:`sibko-gurubk`,storageBucket:`sibko-gurubk.firebasestorage.app`,messagingSenderId:`847568876874`,appId:`1:847568876874:web:7a80bb88432ef2b29fbdb3`}),N_=Bg(M_),P_=Yu(M_),F_={users:`users`,students:`students`,journals:`journals`,settings:`settings`},I_={username:`admin`,password:`admin123`,fullName:`Administrator SIBKO`,role:`admin`,createdAt:new Date().toISOString(),accessExpiry:null},L_=[{label:`7 Hari`,value:7},{label:`30 Hari`,value:30},{label:`6 Bulan`,value:180},{label:`12 Bulan`,value:365},{label:`Selamanya (Full Time)`,value:-1}],R_=[`Konseling Individu`,`Konseling Kelompok`,`Bimbingan Klasikal`,`Bimbingan Kelompok`,`Konferensi Kasus`,`Home Visit`,`Alih Tangan Kasus (Referal)`,`Konsultasi`,`Kolaborasi`,`Mediasi`],z_=[`Landasan Hidup Religius`,`Landasan Perilaku Etis`,`Kematangan Emosi`,`Kematangan Intelektual`,`Kesadaran Tanggung Jawab Sosial`,`Kesadaran Gender`,`Pengembangan Pribadi`,`Perilaku Kewirausahaan (Kemandirian)`,`Wawasan dan Kesiapan Karir`,`Kematangan Hubungan Teman Sebaya`],B_=[`Pribadi`,`Sosial`,`Belajar`,`Karir`,`Kedisiplinan`,`Keluarga`],V_={LOW:{label:`Rendah`,color:`bg-green-100 text-green-800`,icon:t_,badge:`bg-green-500`},MEDIUM:{label:`Sedang`,color:`bg-yellow-100 text-yellow-800`,icon:w_,badge:`bg-yellow-500`},HIGH:{label:`Tinggi`,color:`bg-red-100 text-red-800`,icon:w_,badge:`bg-red-500`}},H_=[`Client Centered (Mendengarkan Aktif)`,`Behavioral (Penguatan/Kontrak)`,`REBT (Rational Emotive Behavior)`,`SFBT (Fokus Solusi)`,`Reality Therapy (WDEP)`,`Trait & Factor (Karir)`,`Diskusi Kelompok`,`Psikodrama`,`Sosiodrama`,`Lainnya`],U_=e=>Uu(P_,e),W_=e=>{if(!e)return`-`;try{if(e&&typeof e==`object`&&e.seconds)return new Date(e.seconds*1e3).toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`});let t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})}catch{return e}},G_=e=>{if(!e)return``;let t=e.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;let n={januari:`01`,februari:`02`,maret:`03`,april:`04`,mei:`05`,juni:`06`,juli:`07`,agustus:`08`,september:`09`,oktober:`10`,november:`11`,desember:`12`,jan:`01`,feb:`02`,mar:`03`,apr:`04`,jun:`06`,jul:`07`,agu:`08`,sep:`09`,okt:`10`,nov:`11`,des:`12`,agust:`08`},r=t.split(/[\s\-\/]+/);if(r.length===3){let e,t,i;if(r[0].length===4?(i=r[0],t=r[1],e=r[2]):(e=r[0],t=r[1],i=r[2]),isNaN(t)){let e=t.toLowerCase();if(n[e])t=n[e];else return``}return e=e.padStart(2,`0`),t=t.padStart(2,`0`),`${i}-${t}-${e}`}return``},K_=e=>({username:`${e.replace(/[^a-zA-Z]/g,``).toLowerCase().substring(0,6)}${Math.floor(1e3+Math.random()*9e3)}`,password:Math.random().toString(36).slice(-8)}),q_=e=>{if(parseInt(e)===-1)return null;let t=new Date;return t.setDate(t.getDate()+parseInt(e)),t.toISOString()},J_=({onLogin:e,loading:t,error:n})=>{let[r,i]=(0,l.useState)(``),[a,o]=(0,l.useState)(``);return(0,$.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-slate-200 p-4`,style:{backgroundImage:`linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)`},children:(0,$.jsxs)(`div`,{className:`bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md border-t-8 border-blue-600 animate-in fade-in zoom-in duration-300`,children:[(0,$.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,$.jsx)(`div`,{className:`h-20 w-20 bg-blue-600 rounded-full mx-auto flex items-center justify-center shadow-lg mb-4`,children:(0,$.jsx)(Zg,{size:40,className:`text-white`})}),(0,$.jsx)(`h1`,{className:`text-2xl font-bold uppercase text-blue-900 tracking-wider`,children:`SIBKO LOGIN`}),(0,$.jsx)(`p`,{className:`text-sm font-semibold text-slate-500 uppercase`,children:`Sistem Informasi Bimbingan Konseling`})]}),n&&(0,$.jsxs)(`div`,{className:`bg-red-100 border border-red-200 text-red-700 px-4 py-3 rounded mb-4 text-sm flex items-center gap-2`,children:[(0,$.jsx)(w_,{size:16}),` `,n]}),(0,$.jsxs)(`form`,{onSubmit:t=>{t.preventDefault(),e(r,a)},className:`space-y-5`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase mb-1`,children:`Username`}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`div`,{className:`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400`,children:(0,$.jsx)(k_,{size:18})}),(0,$.jsx)(`input`,{className:`w-full pl-10 p-3 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition-all`,value:r,onChange:e=>i(e.target.value),placeholder:`Masukkan Username`,required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase mb-1`,children:`Password`}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`div`,{className:`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400`,children:(0,$.jsx)(d_,{size:18})}),(0,$.jsx)(`input`,{type:`password`,className:`w-full pl-10 p-3 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition-all`,value:a,onChange:e=>o(e.target.value),placeholder:`Masukkan Password`,required:!0})]})]}),(0,$.jsx)(`button`,{disabled:t,className:`w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded shadow-lg transition-transform transform hover:scale-105 active:scale-95 disabled:bg-slate-400 disabled:cursor-not-allowed flex justify-center items-center gap-2`,children:t?`Memuat...`:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(E_,{size:20}),` MASUK APLIKASI`]})})]}),(0,$.jsxs)(`div`,{className:`mt-8 text-center text-xs text-gray-400 border-t pt-4`,children:[` `,new Date().getFullYear(),` Layanan Bimbingan Konseling Digital`]})]})})},Y_=({users:e,studentsCount:t,journalsCount:n})=>(0,$.jsxs)(`div`,{className:`p-6 space-y-6 animate-in fade-in`,children:[(0,$.jsx)(`h2`,{className:`text-2xl font-bold text-slate-800`,children:`Dashboard Administrator`}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-6`,children:[(0,$.jsxs)(`div`,{className:`bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4 hover:shadow-md transition-shadow`,children:[(0,$.jsx)(`div`,{className:`p-4 bg-blue-100 text-blue-600 rounded-full`,children:(0,$.jsx)(k_,{size:32})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-sm text-slate-500 font-bold uppercase`,children:`Total Guru BK`}),(0,$.jsx)(`p`,{className:`text-3xl font-extrabold text-slate-800`,children:e.filter(e=>e.role===`guru`).length})]})]}),(0,$.jsxs)(`div`,{className:`bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4 hover:shadow-md transition-shadow`,children:[(0,$.jsx)(`div`,{className:`p-4 bg-green-100 text-green-600 rounded-full`,children:(0,$.jsx)(k_,{size:32})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-sm text-slate-500 font-bold uppercase`,children:`Total Siswa Terdata`}),(0,$.jsx)(`p`,{className:`text-3xl font-extrabold text-slate-800`,children:t})]})]}),(0,$.jsxs)(`div`,{className:`bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4 hover:shadow-md transition-shadow`,children:[(0,$.jsx)(`div`,{className:`p-4 bg-purple-100 text-purple-600 rounded-full`,children:(0,$.jsx)(c_,{size:32})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-sm text-slate-500 font-bold uppercase`,children:`Total Jurnal Aktivitas`}),(0,$.jsx)(`p`,{className:`text-3xl font-extrabold text-slate-800`,children:n})]})]})]}),(0,$.jsxs)(`div`,{className:`bg-blue-50 border-l-4 border-blue-600 p-4 rounded shadow-sm`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-blue-800 mb-2`,children:`Informasi Sistem`}),(0,$.jsx)(`p`,{className:`text-sm text-blue-700`,children:`Sebagai Admin, Anda memiliki akses untuk mengelola akun pengguna (Guru BK) dan mengubah password Admin sendiri. Anda dapat mengatur masa aktif akun guru (trial/full time).`})]})]}),X_=({students:e,journals:t})=>{let n=(0,l.useMemo)(()=>e.filter(e=>e.riskLevel===`HIGH`),[e]),r=(0,l.useMemo)(()=>e.filter(e=>e.riskLevel===`MEDIUM`),[e]),i=new Date().toISOString().slice(0,7),a=(0,l.useMemo)(()=>t.filter(e=>e.date.startsWith(i)),[t,i]),o=(0,l.useMemo)(()=>{let e={};return t.forEach(t=>{let n=t.serviceType||`Lainnya`;e[n]=(e[n]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,5)},[t]),s=(e=>[...e].sort((e,t)=>{let n=e.createdAt?.seconds?e.createdAt.seconds:new Date(e.createdAt||e.date).getTime()/1e3;return((t.createdAt?.seconds?t.createdAt.seconds:new Date(t.createdAt||t.date).getTime()/1e3)||0)-(n||0)}))(t).slice(0,3);return(0,$.jsxs)(`div`,{className:`p-6 space-y-6 animate-in fade-in`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,$.jsx)(`h2`,{className:`text-2xl font-bold text-slate-800`,children:`Dashboard & Analisis`}),(0,$.jsx)(`div`,{className:`text-right`,children:(0,$.jsx)(`p`,{className:`text-xs text-slate-500 font-bold uppercase`,children:new Date().toLocaleDateString(`id-ID`,{weekday:`long`,day:`numeric`,month:`long`,year:`numeric`})})})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-4 gap-4`,children:[(0,$.jsxs)(`div`,{className:`bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-32 hover:border-blue-400 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Siswa Binaan`}),(0,$.jsx)(`h3`,{className:`text-3xl font-extrabold text-slate-800 mt-1`,children:e.length})]}),(0,$.jsx)(`div`,{className:`p-2 bg-blue-50 text-blue-600 rounded-lg`,children:(0,$.jsx)(k_,{size:20})})]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Total data siswa`})]}),(0,$.jsxs)(`div`,{className:`bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-32 hover:border-green-400 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Layanan Bulan Ini`}),(0,$.jsx)(`h3`,{className:`text-3xl font-extrabold text-green-700 mt-1`,children:a.length})]}),(0,$.jsx)(`div`,{className:`p-2 bg-green-50 text-green-600 rounded-lg`,children:(0,$.jsx)(Yg,{size:20})})]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Jurnal tercatat bulan ini`})]}),(0,$.jsxs)(`div`,{className:`bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-32 hover:border-red-400 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Resiko Tinggi`}),(0,$.jsx)(`h3`,{className:`text-3xl font-extrabold text-red-600 mt-1`,children:n.length})]}),(0,$.jsx)(`div`,{className:`p-2 bg-red-50 text-red-600 rounded-lg`,children:(0,$.jsx)(m_,{size:20})})]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Siswa butuh perhatian khusus`})]}),(0,$.jsxs)(`div`,{className:`bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-32 hover:border-orange-400 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Resiko Sedang`}),(0,$.jsx)(`h3`,{className:`text-3xl font-extrabold text-orange-600 mt-1`,children:r.length})]}),(0,$.jsx)(`div`,{className:`p-2 bg-orange-50 text-orange-600 rounded-lg`,children:(0,$.jsx)(w_,{size:20})})]}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Perlu pantauan berkala`})]})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-6`,children:[(0,$.jsxs)(`div`,{className:`lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col`,children:[(0,$.jsxs)(`div`,{className:`p-4 border-b flex justify-between items-center bg-slate-50 rounded-t-xl`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(w_,{size:18,className:`text-red-500`}),` Early Warning System (Prioritas)`]}),(0,$.jsxs)(`span`,{className:`text-xs bg-red-100 text-red-700 px-2 py-1 rounded font-bold`,children:[n.length,` Siswa`]})]}),(0,$.jsx)(`div`,{className:`flex-1 overflow-y-auto max-h-[300px] p-2`,children:n.length>0?(0,$.jsxs)(`table`,{className:`w-full text-sm text-left`,children:[(0,$.jsx)(`thead`,{className:`text-xs text-slate-500 bg-white sticky top-0`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-2`,children:`Nama Siswa`}),(0,$.jsx)(`th`,{className:`p-2`,children:`Kelas`}),(0,$.jsx)(`th`,{className:`p-2`,children:`Wali`}),(0,$.jsx)(`th`,{className:`p-2 text-right`,children:`Info`})]})}),(0,$.jsx)(`tbody`,{className:`divide-y divide-slate-100`,children:n.map(e=>(0,$.jsxs)(`tr`,{className:`hover:bg-red-50 transition-colors`,children:[(0,$.jsx)(`td`,{className:`p-2 font-bold text-slate-700`,children:e.name}),(0,$.jsx)(`td`,{className:`p-2 text-slate-600`,children:e.class}),(0,$.jsx)(`td`,{className:`p-2 text-slate-500 text-xs`,children:e.parent||`-`}),(0,$.jsx)(`td`,{className:`p-2 text-right`,children:(0,$.jsx)(`span`,{className:`text-xs text-red-500 font-bold`,children:`URGENT`})})]},e.id))})]}):(0,$.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-40 text-slate-400`,children:[(0,$.jsx)(t_,{size:40,className:`text-green-200 mb-2`}),(0,$.jsx)(`p`,{children:`Alhamdulillah, tidak ada siswa resiko tinggi.`})]})})]}),(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col`,children:[(0,$.jsx)(`div`,{className:`p-4 border-b bg-slate-50 rounded-t-xl`,children:(0,$.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(e_,{size:18,className:`text-blue-500`}),` Tren Layanan`]})}),(0,$.jsxs)(`div`,{className:`p-4 flex-1 overflow-y-auto`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 mb-4 uppercase font-bold`,children:`Layanan Terbanyak Diberikan`}),(0,$.jsxs)(`div`,{className:`space-y-4`,children:[o.map(([e,n],r)=>(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`flex justify-between text-xs mb-1`,children:[(0,$.jsx)(`span`,{className:`font-medium text-slate-700`,children:e}),(0,$.jsx)(`span`,{className:`font-bold text-slate-900`,children:n})]}),(0,$.jsx)(`div`,{className:`w-full bg-slate-100 rounded-full h-2`,children:(0,$.jsx)(`div`,{className:`h-2 rounded-full ${r===0?`bg-blue-500`:r===1?`bg-indigo-400`:`bg-slate-300`}`,style:{width:`${n/t.length*100}%`}})})]},r)),o.length===0&&(0,$.jsx)(`p`,{className:`text-sm text-slate-400 italic`,children:`Belum ada data layanan.`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-200 p-6`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-slate-800 mb-4 flex items-center gap-2`,children:[(0,$.jsx)(i_,{size:18,className:`text-slate-400`}),` Aktivitas Terakhir`]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`,children:[s.map(e=>(0,$.jsxs)(`div`,{className:`border border-slate-100 p-4 rounded-lg hover:bg-slate-50 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between mb-2`,children:[(0,$.jsx)(`span`,{className:`text-[10px] uppercase font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded`,children:e.serviceType}),(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:W_(e.date)})]}),(0,$.jsx)(`p`,{className:`font-bold text-slate-800 text-sm mb-1 line-clamp-1`,children:e.studentNames?.join(`, `)||e.studentName}),(0,$.jsxs)(`p`,{className:`text-xs text-slate-500 line-clamp-2`,children:[`"`,e.description,`"`]})]},e.id)),s.length===0&&(0,$.jsx)(`p`,{className:`text-sm text-slate-400 italic`,children:`Belum ada aktivitas.`})]})]})]})},Z_=({users:e})=>{let[t,n]=(0,l.useState)({username:``,password:``,fullName:``,duration:30}),[r,i]=(0,l.useState)(null),a=e=>{let i={...t,fullName:e};if(!r&&e.length>3){let t=K_(e);i.username=t.username,i.password=t.password}n(i)},o=async n=>{if(n.preventDefault(),!t.username||!t.password||!t.fullName)return alert(`Lengkapi data!`);let i=q_(t.duration),a={fullName:t.fullName,username:t.username,password:t.password,accessExpiry:i,role:`guru`,updatedAt:new Date().toISOString()};try{if(r)await qd(Wu(U_(F_.users),r),a),alert(`Data guru berhasil diperbarui.`);else{if(e.some(e=>e.username===t.username))return alert(`Username sudah digunakan!`);await Yd(U_(F_.users),{...a,createdAt:new Date().toISOString()}),alert(`Guru BK berhasil ditambahkan.`)}u()}catch(e){console.error(e),alert(`Gagal menyimpan data.`)}},s=e=>{i(e.id),n({fullName:e.fullName,username:e.username,password:e.password,duration:e.accessExpiry?30:-1})},c=async e=>{confirm(`Yakin hapus akun ini? Guru tidak akan bisa login lagi.`)&&await Jd(Wu(U_(F_.users),e))},u=()=>{n({username:``,password:``,fullName:``,duration:30}),i(null)},d=e=>{if(!e)return{label:`Full Time`,color:`bg-green-100 text-green-700`};let t=new Date,n=new Date(e),r=Math.ceil((n-t)/(1e3*60*60*24));return r<0?{label:`Expired`,color:`bg-red-100 text-red-700`}:r<7?{label:`${r} Hari Lagi`,color:`bg-orange-100 text-orange-700`}:{label:`Aktif (${r} hari)`,color:`bg-blue-100 text-blue-700`}};return(0,$.jsxs)(`div`,{className:`p-6 space-y-6`,children:[(0,$.jsxs)(`h2`,{className:`text-2xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(x_,{size:24}),` Manajemen Pengguna (Guru BK)`]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-8`,children:[(0,$.jsxs)(`div`,{className:`bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-fit`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center border-b pb-2 mb-4`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-blue-600`,children:r?`Edit Data Guru`:`Tambah Guru Baru`}),r&&(0,$.jsx)(`button`,{onClick:u,className:`text-xs text-red-500 hover:underline`,children:`Batal`})]}),(0,$.jsxs)(`form`,{onSubmit:o,className:`space-y-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:`Nama Lengkap Guru`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none`,value:t.fullName,onChange:e=>a(e.target.value),placeholder:`Misal: Budi Santoso, S.Pd`,required:!0})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:`Username (Auto)`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded bg-slate-100 font-mono text-sm`,value:t.username,onChange:e=>n({...t,username:e.target.value}),placeholder:`Username`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:`Password (Auto)`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded bg-slate-100 font-mono text-sm`,value:t.password,onChange:e=>n({...t,password:e.target.value}),placeholder:`Password`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1`,children:`Masa Aktif Akun`}),(0,$.jsx)(`select`,{className:`w-full p-2 border rounded bg-white`,value:t.duration,onChange:e=>n({...t,duration:e.target.value}),children:L_.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))}),(0,$.jsx)(`p`,{className:`text-[10px] text-slate-400 mt-1`,children:`*Pilih "Selamanya" untuk akses tanpa batas.`})]}),(0,$.jsx)(`button`,{className:`w-full text-white py-2 rounded font-bold flex justify-center items-center gap-2 ${r?`bg-orange-600 hover:bg-orange-700`:`bg-green-600 hover:bg-green-700`}`,children:r?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(S_,{size:18}),` Update Akun`]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(n_,{size:18}),` Buat Akun`]})})]})]}),(0,$.jsxs)(`div`,{className:`lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden`,children:[(0,$.jsx)(`div`,{className:`p-4 bg-slate-50 border-b font-bold text-slate-700`,children:`Daftar Guru BK Aktif`}),(0,$.jsx)(`div`,{className:`overflow-x-auto`,children:(0,$.jsxs)(`table`,{className:`w-full text-sm text-left`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-100 text-slate-500`,children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{className:`p-3`,children:`Nama Lengkap`}),(0,$.jsx)(`th`,{className:`p-3`,children:`Akun Login`}),(0,$.jsx)(`th`,{className:`p-3`,children:`Status Akses`}),(0,$.jsx)(`th`,{className:`p-3 text-center`,children:`Aksi`})]})}),(0,$.jsxs)(`tbody`,{className:`divide-y divide-slate-100`,children:[e.filter(e=>e.role===`guru`).map(e=>{let t=d(e.accessExpiry);return(0,$.jsxs)(`tr`,{className:`hover:bg-slate-50`,children:[(0,$.jsx)(`td`,{className:`p-3 font-bold text-slate-700`,children:e.fullName}),(0,$.jsxs)(`td`,{className:`p-3 text-slate-500 font-mono text-xs`,children:[`User: `,e.username,(0,$.jsx)(`br`,{}),`Pass: `,e.password]}),(0,$.jsxs)(`td`,{className:`p-3`,children:[(0,$.jsx)(`span`,{className:`text-[10px] px-2 py-1 rounded font-bold uppercase ${t.color}`,children:t.label}),e.accessExpiry&&(0,$.jsxs)(`div`,{className:`text-[10px] text-slate-400 mt-1`,children:[`Exp: `,W_(e.accessExpiry)]})]}),(0,$.jsx)(`td`,{className:`p-3 text-center`,children:(0,$.jsxs)(`div`,{className:`flex justify-center gap-1`,children:[(0,$.jsx)(`button`,{onClick:()=>s(e),className:`text-blue-500 hover:bg-blue-50 p-2 rounded`,title:`Edit / Perpanjang`,children:(0,$.jsx)(S_,{size:16})}),(0,$.jsx)(`button`,{onClick:()=>c(e.id),className:`text-red-500 hover:bg-red-50 p-2 rounded`,title:`Hapus Akses`,children:(0,$.jsx)(C_,{size:16})})]})})]},e.id)}),e.filter(e=>e.role===`guru`).length===0&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:`4`,className:`p-6 text-center text-slate-400 italic`,children:`Belum ada data guru BK.`})})]})]})})]})]})]})},Q_=({user:e,onUpdatePassword:t})=>{let[n,r]=(0,l.useState)(e.password||``),[i,a]=(0,l.useState)(e.fullName||``);return(0,$.jsx)(`div`,{className:`p-6 max-w-2xl mx-auto animate-in fade-in`,children:(0,$.jsxs)(`div`,{className:`bg-white p-8 rounded-xl shadow-sm border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-4 mb-6 border-b pb-4`,children:[(0,$.jsx)(`div`,{className:`w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-2xl`,children:e.fullName?.charAt(0)}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{className:`text-xl font-bold text-slate-800`,children:`Profil & Akun Saya`}),(0,$.jsxs)(`p`,{className:`text-sm text-slate-500`,children:[`Kelola informasi login Anda (`,e.role===`admin`?`Administrator`:`Guru BK`,`)`]})]})]}),(0,$.jsxs)(`form`,{onSubmit:r=>{r.preventDefault(),confirm(`Simpan perubahan akun?`)&&t({id:e.id,password:n,fullName:i})},className:`space-y-5`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-bold text-slate-600 mb-1`,children:`Nama Lengkap`}),(0,$.jsx)(`input`,{className:`w-full p-3 border rounded-lg`,value:i,onChange:e=>a(e.target.value)})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-bold text-slate-600 mb-1`,children:`Username (Tidak dapat diubah)`}),(0,$.jsx)(`input`,{className:`w-full p-3 border rounded-lg bg-slate-100 text-slate-500`,value:e.username,disabled:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-bold text-slate-600 mb-1`,children:`Password Login`}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(d_,{className:`absolute left-3 top-3.5 text-slate-400`,size:18}),(0,$.jsx)(`input`,{className:`w-full pl-10 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500`,value:n,onChange:e=>r(e.target.value)})]})]})]}),e.role===`guru`&&(0,$.jsxs)(`div`,{className:`bg-blue-50 p-4 rounded text-sm text-blue-800 flex gap-2`,children:[(0,$.jsx)(Qg,{size:20}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-bold`,children:`Status Akun:`}),` `,e.accessExpiry?`Berlaku hingga ${W_(e.accessExpiry)}`:`Full Time (Permanen)`]})]}),(0,$.jsx)(`div`,{className:`pt-4`,children:(0,$.jsxs)(`button`,{className:`bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg`,children:[(0,$.jsx)(v_,{size:18}),` Simpan Perubahan`]})})]})]})})},$_=({students:e,journals:t,onAdd:n,onEdit:r,onDelete:i,onImport:a,onMoveClass:o})=>{let[s,c]=(0,l.useState)(``),[u,d]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null),[m,h]=(0,l.useState)({nisn:``,name:``,class:``,gender:`L`,pob:``,dob:``,address:``,phone:``,parent:``,parentPhone:``,jobParent:``,career:``,riskLevel:`LOW`}),[g,_]=(0,l.useState)(null),v=(0,l.useRef)(null),[y,b]=(0,l.useState)(!1),[x,S]=(0,l.useState)([]),[ee,C]=(0,l.useState)(``),te=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.class.toLowerCase().includes(s.toLowerCase())),ne=e=>t.filter(t=>t.studentId===e||t.studentIds&&t.studentIds.includes(e)).sort((e,t)=>t.date.localeCompare(e.date)),re=e=>{e.preventDefault(),g?r({...m,id:g}):n(m),ie()},ie=()=>{h({nisn:``,name:``,class:``,gender:`L`,pob:``,dob:``,address:``,phone:``,parent:``,parentPhone:``,jobParent:``,career:``,riskLevel:`LOW`}),_(null),d(!1)},ae=e=>{_(e.id),h({...m,...e}),d(!0)},oe=()=>{let e=document.createElement(`a`);e.setAttribute(`href`,`data:text/csv;charset=utf-8,NISN,Nama%20Lengkap,Kelas,L/P,Tempat%20Lahir,Tanggal%20Lahir%20(DD-MM-YYYY),Alamat,No%20HP%20Siswa,Nama%20Wali,No%20HP%20Wali,Pekerjaan%20Wali,Resiko%20(LOW/MEDIUM/HIGH)%0A12345678,Budi%20Santoso,X-1,L,Jakarta,06-08-2008,Jl.%20Merdeka%20No%201,08123456789,Bpk.%20Santoso,08198765432,Wiraswasta,LOW`),e.setAttribute(`download`,`template_siswa_sibko.csv`),document.body.appendChild(e),e.click(),document.body.removeChild(e)},se=e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{let t=e.target.result.split(`
`).slice(1),n=[];t.forEach(e=>{let t=e.split(`,`);if(t.length>=2&&t[1].trim()!==``){let e=G_(t[5]?.trim()||``);n.push({nisn:t[0]?.trim()||``,name:t[1]?.trim()||``,class:t[2]?.trim()||``,gender:t[3]?.trim().toUpperCase()===`P`?`P`:`L`,pob:t[4]?.trim()||``,dob:e,address:t[6]?.trim()||``,phone:t[7]?.trim()||``,parent:t[8]?.trim()||``,parentPhone:t[9]?.trim()||``,jobParent:t[10]?.trim()||``,riskLevel:[`LOW`,`MEDIUM`,`HIGH`].includes(t[11]?.trim())?t[11]?.trim():`LOW`})}}),n.length>0?confirm(`Ditemukan ${n.length} data siswa. Yakin ingin import?`)&&a(n):alert(`Tidak ada data valid yang ditemukan dalam file CSV.`)},n.readAsText(t),e.target.value=null},ce=e=>{e.target.checked?S(te.map(e=>e.id)):S([])},le=e=>{x.includes(e)?S(x.filter(t=>t!==e)):S([...x,e])};return(0,$.jsxs)(`div`,{className:`p-6 space-y-6 relative`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-slate-200`,children:[(0,$.jsxs)(`h2`,{className:`text-2xl font-bold text-slate-800 flex items-center gap-2`,children:[(0,$.jsx)(k_,{className:`text-blue-600`}),` Data Siswa Binaan`]}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 justify-center md:justify-end w-full md:w-auto`,children:y?(0,$.jsxs)(`div`,{className:`flex items-center gap-2 bg-orange-50 p-1 pr-2 rounded border border-orange-200 animate-in fade-in slide-in-from-right-4`,children:[(0,$.jsxs)(`span`,{className:`text-xs font-bold text-orange-700 px-2`,children:[x.length,` Dipilih`]}),(0,$.jsx)(`input`,{className:`text-sm p-1.5 border rounded w-32 focus:ring-2 ring-orange-400 outline-none`,placeholder:`Kelas Tujuan...`,value:ee,onChange:e=>C(e.target.value.toUpperCase())}),(0,$.jsx)(`button`,{onClick:()=>{if(!ee)return alert(`Masukkan nama kelas tujuan!`);if(x.length===0)return alert(`Pilih minimal satu siswa!`);confirm(`Pindahkan ${x.length} siswa terpilih ke kelas ${ee}?`)&&(o(x,ee),b(!1),S([]),C(``))},className:`bg-orange-600 text-white p-1.5 rounded hover:bg-orange-700 text-xs font-bold px-3`,children:`SIMPAN`}),(0,$.jsx)(`button`,{onClick:()=>{b(!1),S([])},className:`text-slate-500 hover:text-slate-700 p-1`,children:(0,$.jsx)(A_,{size:18})})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`button`,{onClick:()=>b(!0),className:`bg-orange-100 text-orange-700 border border-orange-200 px-3 py-2 rounded text-sm font-medium hover:bg-orange-200 flex items-center gap-2 transition-colors`,children:[(0,$.jsx)(Xg,{size:16}),` Pindah Kelas`]}),(0,$.jsxs)(`button`,{onClick:oe,className:`bg-slate-100 text-slate-700 border border-slate-300 px-3 py-2 rounded text-sm font-medium hover:bg-slate-200 flex items-center gap-2 transition-colors`,children:[(0,$.jsx)(s_,{size:16}),` Template`]}),(0,$.jsx)(`input`,{type:`file`,ref:v,className:`hidden`,accept:`.csv`,onChange:se}),(0,$.jsxs)(`button`,{onClick:()=>v.current.click(),className:`bg-green-600 text-white px-3 py-2 rounded text-sm font-medium hover:bg-green-700 flex items-center gap-2 shadow-sm transition-colors`,children:[(0,$.jsx)(T_,{size:16}),` Import`]}),(0,$.jsxs)(`button`,{onClick:()=>{ie(),d(!u)},className:`bg-blue-600 text-white px-4 py-2 rounded text-sm font-medium flex items-center gap-2 hover:bg-blue-700 shadow-sm transition-colors`,children:[(0,$.jsx)(n_,{size:18}),` `,u?`Batal`:`Tambah`]})]})})]}),u&&(0,$.jsxs)(`div`,{className:`bg-blue-50 p-6 rounded-lg border border-blue-200 animate-in fade-in slide-in-from-top-4`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-blue-800 mb-4 border-b border-blue-200 pb-2`,children:g?`Edit Data Siswa`:`Input Siswa Baru`}),(0,$.jsxs)(`form`,{onSubmit:re,className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Nama Lengkap`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.name,onChange:e=>h({...m,name:e.target.value}),required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`NIS / NISN`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.nisn,onChange:e=>h({...m,nisn:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Kelas`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.class,onChange:e=>h({...m,class:e.target.value}),required:!0})]})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-4 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`L/P`}),(0,$.jsxs)(`select`,{className:`w-full p-2 border rounded bg-white`,value:m.gender,onChange:e=>h({...m,gender:e.target.value}),children:[(0,$.jsx)(`option`,{value:`L`,children:`Laki-laki`}),(0,$.jsx)(`option`,{value:`P`,children:`Perempuan`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Tempat Lahir`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.pob,onChange:e=>h({...m,pob:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Tanggal Lahir`}),(0,$.jsx)(`input`,{type:`date`,className:`w-full p-2 border rounded`,value:m.dob,onChange:e=>h({...m,dob:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`No HP Siswa`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.phone,onChange:e=>h({...m,phone:e.target.value})})]})]}),(0,$.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4`,children:(0,$.jsxs)(`div`,{className:`md:col-span-3`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Alamat Lengkap`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.address,onChange:e=>h({...m,address:e.target.value})})]})}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4 bg-white p-3 rounded border border-slate-200`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Nama Orang Tua/Wali`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.parent,onChange:e=>h({...m,parent:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Pekerjaan Ortu`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.jobParent,onChange:e=>h({...m,jobParent:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`No HP Ortu`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,value:m.parentPhone,onChange:e=>h({...m,parentPhone:e.target.value})})]})]}),(0,$.jsxs)(`div`,{className:`flex justify-between items-end`,children:[(0,$.jsxs)(`div`,{className:`w-1/3`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500`,children:`Tingkat Kerawanan`}),(0,$.jsxs)(`select`,{className:`w-full p-2 border rounded font-bold ${m.riskLevel===`HIGH`?`text-red-600 bg-red-50`:m.riskLevel===`MEDIUM`?`text-yellow-600 bg-yellow-50`:`text-green-600 bg-green-50`}`,value:m.riskLevel,onChange:e=>h({...m,riskLevel:e.target.value}),children:[(0,$.jsx)(`option`,{value:`LOW`,children:`Resiko Rendah (Normal)`}),(0,$.jsx)(`option`,{value:`MEDIUM`,children:`Resiko Sedang (Perlu Pantauan)`}),(0,$.jsx)(`option`,{value:`HIGH`,children:`Resiko Tinggi (Perlu Tindakan)`})]})]}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:ie,className:`px-4 py-2 text-slate-500 hover:bg-slate-200 rounded`,children:`Batal`}),(0,$.jsxs)(`button`,{type:`submit`,className:`bg-blue-600 text-white font-bold rounded px-6 py-2 shadow hover:bg-blue-700 flex items-center gap-2`,children:[(0,$.jsx)(v_,{size:18}),` Simpan Data`]})]})]})]})]}),(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden ${y?`ring-2 ring-orange-200`:``}`,children:[(0,$.jsxs)(`div`,{className:`p-4 border-b flex flex-col md:flex-row gap-4 justify-between items-center bg-slate-50`,children:[(0,$.jsxs)(`div`,{className:`relative w-full md:w-96`,children:[(0,$.jsx)(y_,{className:`text-slate-400 absolute left-3 top-2.5`,size:18}),(0,$.jsx)(`input`,{className:`outline-none w-full pl-10 p-2 border rounded text-sm focus:ring-1 focus:ring-blue-500`,placeholder:`Cari nama, kelas, atau NISN...`,value:s,onChange:e=>c(e.target.value)})]}),(0,$.jsxs)(`div`,{className:`text-xs text-slate-500 font-medium`,children:[`Total: `,te.length,` Siswa`]})]}),(0,$.jsx)(`div`,{className:`overflow-x-auto`,children:(0,$.jsxs)(`table`,{className:`w-full text-sm text-left`,children:[(0,$.jsx)(`thead`,{className:`bg-slate-100 text-slate-600 uppercase text-xs font-bold tracking-wider`,children:(0,$.jsxs)(`tr`,{children:[y&&(0,$.jsx)(`th`,{className:`p-4 w-10 text-center`,children:(0,$.jsx)(`input`,{type:`checkbox`,onChange:ce,checked:x.length>0&&x.length===te.length,className:`w-4 h-4 accent-orange-500 cursor-pointer`})}),(0,$.jsx)(`th`,{className:`p-4`,children:`Identitas Siswa`}),(0,$.jsx)(`th`,{className:`p-4`,children:`L/P`}),(0,$.jsx)(`th`,{className:`p-4`,children:`Kontak`}),(0,$.jsx)(`th`,{className:`p-4`,children:`Status`}),(0,$.jsx)(`th`,{className:`p-4 text-center`,children:`Aksi / Menu`})]})}),(0,$.jsxs)(`tbody`,{className:`divide-y divide-slate-100`,children:[te.map(e=>(0,$.jsxs)(`tr`,{className:`hover:bg-slate-50 transition-colors ${x.includes(e.id)?`bg-orange-50`:``}`,children:[y&&(0,$.jsx)(`td`,{className:`p-4 text-center`,children:(0,$.jsx)(`input`,{type:`checkbox`,checked:x.includes(e.id),onChange:()=>le(e.id),className:`w-4 h-4 accent-orange-500 cursor-pointer`})}),(0,$.jsxs)(`td`,{className:`p-4`,children:[(0,$.jsx)(`div`,{className:`font-bold text-slate-700 text-base`,children:e.name}),(0,$.jsxs)(`div`,{className:`text-xs text-slate-500 mt-0.5 flex gap-2`,children:[(0,$.jsx)(`span`,{className:`bg-slate-200 px-1.5 rounded`,children:e.class}),(0,$.jsx)(`span`,{children:e.nisn||`-`})]})]}),(0,$.jsx)(`td`,{className:`p-4 font-medium text-slate-600`,children:e.gender}),(0,$.jsxs)(`td`,{className:`p-4`,children:[e.phone&&(0,$.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-slate-600`,children:[(0,$.jsx)(h_,{size:12}),` `,e.phone]}),e.parentPhone&&(0,$.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-slate-600 mt-1`,children:[(0,$.jsx)(O_,{size:12}),` `,e.parentPhone,` (Ortu)`]}),!e.phone&&!e.parentPhone&&(0,$.jsx)(`span`,{className:`text-slate-300 italic`,children:`-`})]}),(0,$.jsx)(`td`,{className:`p-4`,children:(0,$.jsx)(`span`,{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide text-white ${V_[e.riskLevel].badge}`,children:V_[e.riskLevel].label})}),(0,$.jsx)(`td`,{className:`p-4 text-center`,children:(0,$.jsxs)(`div`,{className:`flex justify-center gap-1`,children:[(0,$.jsxs)(`button`,{onClick:()=>p(e),className:`text-blue-600 bg-blue-50 hover:bg-blue-100 p-2 rounded transition-colors flex items-center gap-1 text-xs font-bold border border-blue-200`,title:`Lihat Profil`,children:[(0,$.jsx)(a_,{size:14}),` Detail/Sisip`]}),(0,$.jsx)(`button`,{onClick:()=>ae(e),className:`text-orange-600 bg-orange-50 hover:bg-orange-100 p-2 rounded transition-colors border border-orange-200`,title:`Edit Data`,children:(0,$.jsx)(S_,{size:14})}),(0,$.jsx)(`button`,{onClick:()=>i(e.id),className:`text-red-600 bg-red-50 hover:bg-red-100 p-2 rounded transition-colors border border-red-200`,title:`Hapus Data`,children:(0,$.jsx)(C_,{size:14})})]})})]},e.id)),te.length===0&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:y?6:5,className:`p-10 text-center text-slate-400 italic`,children:`Data siswa tidak ditemukan. Silakan tambah atau import data baru.`})})]})]})})]}),f&&(0,$.jsx)(`div`,{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col`,children:[(0,$.jsxs)(`div`,{className:`p-4 bg-slate-800 text-white flex justify-between items-center sticky top-0`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-lg flex items-center gap-2`,children:[(0,$.jsx)(Zg,{size:20}),` Buku Pribadi Siswa`]}),(0,$.jsx)(`button`,{onClick:()=>p(null),className:`hover:bg-slate-700 p-1 rounded-full`,children:(0,$.jsx)(A_,{size:20})})]}),(0,$.jsxs)(`div`,{className:`p-6 overflow-y-auto flex-1`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-6 mb-8`,children:[(0,$.jsxs)(`div`,{className:`w-full md:w-1/3 flex flex-col items-center`,children:[(0,$.jsx)(`div`,{className:`w-32 h-32 bg-slate-200 rounded-full flex items-center justify-center mb-4 border-4 border-white shadow-lg overflow-hidden`,children:(0,$.jsx)(O_,{size:64,className:`text-slate-400`})}),(0,$.jsx)(`h2`,{className:`text-xl font-bold text-slate-800 text-center`,children:f.name}),(0,$.jsx)(`div`,{className:`bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-bold mt-2`,children:f.class}),(0,$.jsx)(`div`,{className:`mt-4 w-full space-y-2`,children:(0,$.jsxs)(`div`,{className:`p-3 rounded text-center text-white text-xs font-bold uppercase ${V_[f.riskLevel].badge}`,children:[`Status: `,V_[f.riskLevel].label]})})]}),(0,$.jsxs)(`div`,{className:`w-full md:w-2/3 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm`,children:[(0,$.jsxs)(`div`,{className:`space-y-1`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold`,children:`NIS / NISN`}),(0,$.jsx)(`p`,{className:`font-medium text-slate-700`,children:f.nisn||`-`})]}),(0,$.jsxs)(`div`,{className:`space-y-1`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold`,children:`Jenis Kelamin`}),(0,$.jsx)(`p`,{className:`font-medium text-slate-700`,children:f.gender===`L`?`Laki-laki`:`Perempuan`})]}),(0,$.jsxs)(`div`,{className:`space-y-1`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold`,children:`Tempat, Tanggal Lahir`}),(0,$.jsxs)(`p`,{className:`font-medium text-slate-700`,children:[f.pob||`-`,`, `,W_(f.dob)]})]}),(0,$.jsxs)(`div`,{className:`space-y-1`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold`,children:`Alamat`}),(0,$.jsx)(`p`,{className:`font-medium text-slate-700`,children:f.address||`-`})]}),(0,$.jsxs)(`div`,{className:`space-y-1`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold`,children:`Kontak Siswa`}),(0,$.jsx)(`p`,{className:`font-medium text-slate-700`,children:f.phone||`-`})]}),(0,$.jsxs)(`div`,{className:`col-span-1 md:col-span-2 border-t pt-4 mt-2`,children:[(0,$.jsxs)(`h4`,{className:`font-bold text-slate-800 mb-2 flex items-center gap-2`,children:[(0,$.jsx)(k_,{size:14}),` Data Orang Tua / Wali`]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400`,children:`Nama`}),(0,$.jsx)(`p`,{className:`font-medium`,children:f.parent||`-`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400`,children:`Pekerjaan`}),(0,$.jsx)(`p`,{className:`font-medium`,children:f.jobParent||`-`})]}),(0,$.jsxs)(`div`,{className:`col-span-2`,children:[(0,$.jsx)(`p`,{className:`text-xs text-slate-400`,children:`Kontak Ortu`}),(0,$.jsx)(`p`,{className:`font-medium text-blue-600`,children:f.parentPhone||`-`})]})]})]})]})]}),(0,$.jsxs)(`div`,{className:`border-t pt-6`,children:[(0,$.jsxs)(`h3`,{className:`font-bold text-slate-800 mb-4 flex items-center gap-2`,children:[(0,$.jsx)(Yg,{size:18,className:`text-blue-500`}),` Riwayat Layanan BK`]}),(0,$.jsxs)(`div`,{className:`space-y-3`,children:[ne(f.id).map(e=>(0,$.jsxs)(`div`,{className:`bg-slate-50 border-l-4 border-blue-500 p-3 rounded hover:bg-slate-100 transition-colors`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,$.jsx)(`span`,{className:`text-xs font-bold text-blue-700 uppercase bg-blue-100 px-2 py-0.5 rounded`,children:e.serviceType}),(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:W_(e.date)})]}),(0,$.jsx)(`p`,{className:`text-sm text-slate-700 mt-2 line-clamp-2`,children:e.description}),(0,$.jsxs)(`div`,{className:`mt-2 text-xs text-slate-500`,children:[(0,$.jsx)(`span`,{className:`font-bold`,children:`Hasil:`}),` `,e.result||`-`]})]},e.id)),ne(f.id).length===0&&(0,$.jsx)(`div`,{className:`text-center py-8 text-slate-400 italic bg-slate-50 rounded border border-dashed`,children:`Belum ada riwayat layanan tercatat.`})]})]})]}),(0,$.jsx)(`div`,{className:`p-4 border-t bg-slate-50 flex justify-end`,children:(0,$.jsx)(`button`,{onClick:()=>p(null),className:`px-6 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded font-bold`,children:`Tutup`})})]})})]})},ev=({students:e,journals:t,onAdd:n,onUpdate:r,settings:i})=>{let[a,o]=(0,l.useState)([]),[s,c]=(0,l.useState)(``),[u,d]=(0,l.useState)(null),[f,p]=(0,l.useState)({date:new Date().toISOString().slice(0,10),time:``,place:``,serviceType:R_[0],skkpd:``,technique:``,description:``,processEval:``,resultEval:``,category:B_[0],followUp:`Selesai`}),m=f.serviceType===`Bimbingan Klasikal`,h=(0,l.useMemo)(()=>[...new Set(e.map(e=>e.class))].sort(),[e]),g=e=>{a.find(t=>t.id===e.id)||o([...a,e]),c(``)},_=e=>{o(a.filter(t=>t.id!==e))},v=t=>{o(e.filter(e=>e.class===t))},y=t=>{if(d(t.id),p({date:t.date,time:t.time||``,place:t.place||``,serviceType:t.serviceType,category:t.category||B_[0],skkpd:t.skkpd||``,technique:t.technique||``,description:t.description||``,processEval:t.processEval||``,resultEval:t.resultEval||t.result||``,followUp:t.followUp||`Selesai`}),t.studentIds&&t.studentIds.length>0)o(e.filter(e=>t.studentIds.includes(e.id)));else if(t.studentId){let n=e.find(e=>e.id===t.studentId);n&&o([n])}else o([])},b=()=>{p({date:new Date().toISOString().slice(0,10),description:``,processEval:``,resultEval:``,time:``,place:``,technique:``,category:B_[0],serviceType:R_[0],skkpd:``,followUp:`Selesai`}),o([]),d(null)},x=e=>{if(e.preventDefault(),a.length===0)return alert(`Pilih minimal satu siswa atau kelas!`);let t={...f,studentIds:a.map(e=>e.id),studentNames:a.map(e=>e.name),studentName:a.length===1?a[0].name:`${a.length} Siswa`,result:f.resultEval,academicYear:i?.academicYear||`2024/2025`,semester:i?.semester||`Ganjil`};u?r({id:u,...t}):n(t),b()},S=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())&&!a.find(t=>t.id===e.id));return(0,$.jsxs)(`div`,{className:`p-6 space-y-6 h-full overflow-y-auto`,children:[(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`p-4 text-white flex justify-between items-center rounded-t-xl ${u?`bg-orange-500`:`bg-blue-600`}`,children:[(0,$.jsxs)(`h3`,{className:`font-bold flex items-center gap-2`,children:[(0,$.jsx)(Zg,{size:20}),` `,u?`Edit Jurnal Layanan`:`Input Jurnal Layanan`]}),(0,$.jsx)(`div`,{className:`text-xs bg-white/20 px-3 py-1 rounded`,children:i?.semester?`${i.semester} ${i.academicYear}`:`Semester Default`}),u&&(0,$.jsx)(`button`,{onClick:b,className:`bg-white/20 hover:bg-white/30 text-white text-xs px-2 py-1 rounded ml-2`,children:`Batal Edit`})]}),(0,$.jsx)(`div`,{className:`p-6`,children:(0,$.jsxs)(`form`,{onSubmit:x,className:`space-y-6`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-6`,children:[(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Tanggal`}),(0,$.jsx)(`input`,{type:`date`,className:`w-full p-2 border rounded text-sm`,value:f.date,onChange:e=>p({...f,date:e.target.value}),required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Waktu (Jam Ke-)`}),(0,$.jsx)(`input`,{type:`text`,className:`w-full p-2 border rounded text-sm`,placeholder:`Contoh: 3-4`,value:f.time,onChange:e=>p({...f,time:e.target.value})})]})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,$.jsxs)(`div`,{className:`col-span-2`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Jenis Layanan`}),(0,$.jsx)(`select`,{className:`w-full p-2 border rounded text-sm font-bold text-blue-700 bg-blue-50`,value:f.serviceType,onChange:e=>{p({...f,serviceType:e.target.value}),o([])},children:R_.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))})]}),(0,$.jsxs)(`div`,{className:`col-span-2`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Tempat Layanan`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded text-sm`,placeholder:`Contoh: Ruang BK`,value:f.place,onChange:e=>p({...f,place:e.target.value})})]})]}),(0,$.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded border border-slate-200`,children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-2 block`,children:`Sasaran Siswa / Konseli`}),m?(0,$.jsxs)(`select`,{className:`w-full p-2 border rounded text-sm bg-white mb-2`,onChange:e=>v(e.target.value),children:[(0,$.jsx)(`option`,{value:``,children:`-- Pilih Kelas --`}),h.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]}):(0,$.jsxs)(`div`,{className:`relative mb-2`,children:[(0,$.jsx)(y_,{className:`absolute left-2 top-2.5 text-slate-400`,size:16}),(0,$.jsx)(`input`,{className:`w-full pl-8 p-2 border rounded text-sm`,placeholder:`Ketik nama siswa...`,value:s,onChange:e=>c(e.target.value)}),s&&(0,$.jsx)(`div`,{className:`absolute z-10 w-full bg-white border shadow-lg max-h-40 overflow-y-auto mt-1 rounded`,children:S.map(e=>(0,$.jsxs)(`div`,{onClick:()=>g(e),className:`p-2 hover:bg-blue-50 cursor-pointer text-sm border-b`,children:[e.name,` `,(0,$.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[`(`,e.class,`)`]})]},e.id))})]}),(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-1 max-h-24 overflow-y-auto`,children:[a.map(e=>(0,$.jsxs)(`span`,{className:`bg-white border px-2 py-1 rounded-full text-xs flex items-center gap-1 shadow-sm`,children:[e.name,` `,(0,$.jsx)(`button`,{type:`button`,onClick:()=>_(e.id),children:(0,$.jsx)(A_,{size:12,className:`text-red-500`})})]},e.id)),a.length===0&&(0,$.jsx)(`span`,{className:`text-xs text-slate-400 italic`,children:`Belum ada siswa dipilih.`})]})]})]}),(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Topik / Masalah`}),(0,$.jsx)(`textarea`,{className:`w-full p-2 border rounded text-sm focus:ring-2 ring-blue-200`,rows:`3`,placeholder:`Deskripsi masalah atau topik bahasan...`,value:f.description,onChange:e=>p({...f,description:e.target.value}),required:!0})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Kategori Masalah`}),(0,$.jsx)(`select`,{className:`w-full p-2 border rounded text-sm bg-white`,value:f.category,onChange:e=>p({...f,category:e.target.value}),children:B_.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Bidang Pengembangan`}),(0,$.jsxs)(`select`,{className:`w-full p-2 border rounded text-sm`,value:f.skkpd,onChange:e=>p({...f,skkpd:e.target.value}),children:[(0,$.jsx)(`option`,{value:``,children:`-- Pilih Standar --`}),z_.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Teknik Konseling`}),(0,$.jsxs)(`select`,{className:`w-full p-2 border rounded text-sm`,value:f.technique,onChange:e=>p({...f,technique:e.target.value}),children:[(0,$.jsx)(`option`,{value:``,children:`-- Pilih Teknik --`}),H_.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]}),(0,$.jsxs)(`div`,{className:`space-y-4 bg-slate-50 p-4 rounded border border-slate-200`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Evaluasi Proses`}),(0,$.jsx)(`textarea`,{className:`w-full p-2 border rounded text-sm focus:ring-2 ring-blue-200`,rows:`3`,placeholder:`Analisis proses layanan (keaktifan, antusiasme, hambatan)...`,value:f.processEval,onChange:e=>p({...f,processEval:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Evaluasi Hasil`}),(0,$.jsx)(`textarea`,{className:`w-full p-2 border rounded text-sm focus:ring-2 ring-blue-200`,rows:`3`,placeholder:`Analisis hasil layanan (pemahaman, perasaan, rencana tindakan)...`,value:f.resultEval,onChange:e=>p({...f,resultEval:e.target.value})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-xs font-bold text-slate-500 uppercase mb-1 block`,children:`Rencana Tindak Lanjut`}),(0,$.jsxs)(`select`,{className:`w-full p-2 border rounded text-sm font-bold text-green-700`,value:f.followUp,onChange:e=>p({...f,followUp:e.target.value}),children:[(0,$.jsx)(`option`,{value:`Selesai`,children:`Masalah Selesai`}),(0,$.jsx)(`option`,{value:`Pantau`,children:`Perlu Pantauan Berkala`}),(0,$.jsx)(`option`,{value:`Konseling Lanjutan`,children:`Jadwalkan Konseling Lanjutan`}),(0,$.jsx)(`option`,{value:`Konferensi Kasus`,children:`Konferensi Kasus`}),(0,$.jsx)(`option`,{value:`Alih Tangan Kasus`,children:`Alih Tangan Kasus (Referal)`})]})]})]})]})]}),(0,$.jsx)(`div`,{className:`pt-2 border-t border-slate-100 flex justify-end`,children:(0,$.jsx)(`button`,{className:`w-full md:w-auto px-8 py-3 rounded-lg font-bold flex justify-center items-center gap-2 shadow-lg text-white transition-transform active:scale-95 ${u?`bg-orange-600 hover:bg-orange-700`:`bg-blue-600 hover:bg-blue-700`}`,children:u?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(__,{size:18}),` UPDATE JURNAL`]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(v_,{size:18}),` SIMPAN JURNAL`]})})})]})})]}),(0,$.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`p-4 border-b bg-slate-50 flex justify-between items-center rounded-t-xl`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-slate-700`,children:`Riwayat Aktivitas Terbaru`}),(0,$.jsx)(`div`,{className:`text-xs text-slate-500 italic`,children:`Urut berdasarkan tanggal terbaru`})]}),(0,$.jsxs)(`div`,{className:`p-6`,children:[(0,$.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4`,children:t.sort((e,t)=>(t.createdAt?.seconds||0)-(e.createdAt?.seconds||0)).map(e=>(0,$.jsxs)(`div`,{className:`bg-white border rounded-lg p-4 hover:shadow-md transition-shadow relative group ${u===e.id?`border-orange-500 ring-1 ring-orange-200 bg-orange-50`:`border-slate-200`}`,children:[(0,$.jsx)(`div`,{className:`absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,$.jsx)(`button`,{onClick:()=>y(e),className:`text-slate-400 hover:text-blue-600 bg-white p-1 rounded-full shadow-sm border border-slate-200`,title:`Edit Jurnal Ini`,children:(0,$.jsx)(S_,{size:16})})}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[(0,$.jsx)(`span`,{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${e.serviceType?.includes(`Kelompok`)||e.serviceType?.includes(`Klasikal`)?`bg-purple-100 text-purple-700`:`bg-blue-100 text-blue-700`}`,children:e.serviceType}),(0,$.jsxs)(`span`,{className:`text-xs text-slate-500 flex items-center gap-1`,children:[(0,$.jsx)($g,{size:12}),` `,W_(e.date)]}),e.semester&&(0,$.jsxs)(`span`,{className:`text-[10px] text-slate-400 bg-slate-100 px-1 rounded`,children:[e.semester,` `,e.academicYear]})]}),(0,$.jsx)(`h4`,{className:`font-bold text-slate-800 mb-1 line-clamp-1`,children:e.studentNames?.join(`, `)||e.studentName}),(0,$.jsxs)(`p`,{className:`text-sm text-slate-600 mb-3 bg-slate-50 p-2 rounded border border-slate-100 italic line-clamp-2`,children:[`"`,e.description,`"`]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 text-xs text-slate-500 border-t pt-2 mt-auto`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-bold block text-slate-400`,children:`Teknik:`}),e.technique||`-`]}),(0,$.jsxs)(`div`,{className:`text-right`,children:[(0,$.jsx)(`span`,{className:`font-bold block text-slate-400`,children:`Tindak Lanjut:`}),(0,$.jsx)(`span`,{className:`font-bold ${e.followUp===`Selesai`?`text-green-600`:`text-orange-600`}`,children:e.followUp})]})]})]},e.id))}),t.length===0&&(0,$.jsxs)(`div`,{className:`text-center py-12 text-slate-400 border-2 border-dashed border-slate-200 rounded-xl m-4`,children:[(0,$.jsx)(r_,{size:48,className:`mx-auto mb-2 opacity-20`}),(0,$.jsx)(`p`,{children:`Belum ada data jurnal layanan.`})]})]})]})]})},tv=({journals:e,students:t,settings:n})=>{let[r,i]=(0,l.useState)(`journal`),[a,o]=(0,l.useState)(`journal`);return(0,$.jsxs)(`div`,{className:`space-y-6 pb-10`,children:[(0,$.jsx)(`style`,{children:`
        @media print {
          @page { size: auto; margin: 10mm; }
          body * { visibility: hidden; }
          .print-area, .print-area * { visibility: visible; }
          .print-area { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 0; }
          .print-hidden { display: none !important; }
          .signature-section { page-break-inside: avoid; }
          table, tr, td, th { page-break-inside: avoid; border-color: black !important; }
        }
      `}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 border-b border-slate-200 pb-1 print:hidden px-6 pt-6`,children:[{id:`journal`,label:`Jurnal Bulanan`},{id:`individual`,label:`Rekam Jejak Siswa`},{id:`riskMap`,label:`Peta Kerawanan`},{id:`serviceProof`,label:`Bukti Layanan (LPL)`}].map(e=>(0,$.jsx)(`button`,{onClick:()=>o(e.id),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${a===e.id?`bg-white text-blue-600 border-t-2 border-x border-blue-600 shadow-sm`:`bg-slate-100 text-slate-500 hover:bg-slate-200`}`,children:e.label},e.id))}),(0,$.jsxs)(`div`,{className:`p-6 min-h-[400px]`,children:[a===`journal`&&(0,$.jsx)(nv,{journals:e,students:t,settings:n}),a===`individual`&&(0,$.jsx)(rv,{journals:e,students:t,settings:n}),a===`riskMap`&&(0,$.jsx)(iv,{students:t,settings:n}),a===`serviceProof`&&(0,$.jsx)(av,{journals:e,students:t,settings:n})]})]})};function nv({journals:e,students:t,settings:n}){let[r,i]=(0,l.useState)(new Date().toISOString().slice(0,7)),[a,o]=(0,l.useState)(`landscape`),[s,c]=(0,l.useState)(n?.semester||`Ganjil`),[u,d]=(0,l.useState)(n?.academicYear||`2024/2025`),f=e.filter(e=>!(!e.date.startsWith(r)||e.semester&&e.semester!==s||e.academicYear&&e.academicYear!==u)).sort((e,t)=>e.date.localeCompare(t.date));return(0,$.jsxs)(`div`,{className:`animate-in fade-in`,children:[(0,$.jsx)(`style`,{children:`
        @media print {
          @page { size: ${a} auto; margin: 10mm; }
        }
      `}),(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-end mb-6 gap-4 print:hidden bg-slate-50 p-4 rounded-lg border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-4`,children:[(0,$.jsxs)(`div`,{className:`w-full sm:w-auto`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Pilih Bulan`}),(0,$.jsx)(`input`,{type:`month`,className:`border p-2 rounded w-full sm:w-48 bg-white text-sm`,value:r,onChange:e=>i(e.target.value)})]}),(0,$.jsxs)(`div`,{className:`w-full sm:w-auto`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Tahun Ajaran`}),(0,$.jsx)(`input`,{className:`border p-2 rounded w-full sm:w-32 bg-white text-sm`,value:u,onChange:e=>d(e.target.value),placeholder:`2024/2025`})]}),(0,$.jsxs)(`div`,{className:`w-full sm:w-auto`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Semester`}),(0,$.jsxs)(`select`,{className:`border p-2 rounded w-full sm:w-32 bg-white text-sm`,value:s,onChange:e=>c(e.target.value),children:[(0,$.jsx)(`option`,{value:`Ganjil`,children:`Ganjil`}),(0,$.jsx)(`option`,{value:`Genap`,children:`Genap`})]})]}),(0,$.jsxs)(`div`,{className:`w-full sm:w-auto`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Orientasi`}),(0,$.jsxs)(`select`,{className:`border p-2 rounded w-full sm:w-32 bg-white text-sm`,value:a,onChange:e=>o(e.target.value),children:[(0,$.jsx)(`option`,{value:`portrait`,children:`Portrait`}),(0,$.jsx)(`option`,{value:`landscape`,children:`Landscape`})]})]})]}),(0,$.jsxs)(`button`,{onClick:()=>window.print(),className:`bg-blue-600 text-white px-6 py-2 rounded flex items-center justify-center gap-2 hover:bg-blue-700 w-full sm:w-auto shadow-md font-bold transition-transform active:scale-95`,children:[(0,$.jsx)(g_,{size:18}),` CETAK LAPORAN`]})]}),(0,$.jsxs)(`div`,{className:`print-area bg-white p-10 md:p-12 mx-auto transition-all duration-300 ${a===`landscape`?`max-w-[297mm] min-h-[210mm]`:`max-w-[210mm] min-h-[297mm]`} print:w-full print:max-w-none print:min-h-0`,children:[(0,$.jsx)(ov,{settings:n}),(0,$.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold underline uppercase`,children:`JURNAL KEGIATAN BIMBINGAN DAN KONSELING`}),(0,$.jsxs)(`p`,{className:`mt-1`,children:[`Bulan: `,(0,$.jsx)(`span`,{className:`font-bold`,children:new Date(r).toLocaleDateString(`id-ID`,{month:`long`,year:`numeric`})}),` | Semester: `,s,` `,u]})]}),(0,$.jsxs)(`table`,{className:`w-full border-collapse border border-black text-xs md:text-sm`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{className:`bg-gray-100 text-center`,children:[(0,$.jsx)(`th`,{className:`border border-black p-2 w-8`,children:`No`}),(0,$.jsx)(`th`,{className:`border border-black p-2 w-24`,children:`Hari/Tanggal`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Sasaran (Siswa/Kelas)`}),(0,$.jsx)(`th`,{className:`border border-black p-2 w-32`,children:`Jenis Layanan`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Uraian Kegiatan / Masalah`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Hasil / Tindak Lanjut`})]})}),(0,$.jsxs)(`tbody`,{children:[f.map((e,t)=>{let n=e.studentNames?e.studentNames.join(`, `):e.studentName||`Siswa Dihapus`;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`border border-black p-2 text-center align-top`,children:t+1}),(0,$.jsx)(`td`,{className:`border border-black p-2 align-top`,children:W_(e.date)}),(0,$.jsx)(`td`,{className:`border border-black p-2 align-top`,children:n}),(0,$.jsx)(`td`,{className:`border border-black p-2 align-top`,children:e.serviceType}),(0,$.jsxs)(`td`,{className:`border border-black p-2 align-top text-justify`,children:[e.description,e.technique&&(0,$.jsxs)(`div`,{className:`mt-1 italic text-slate-600`,children:[`Teknik: `,e.technique]})]}),(0,$.jsxs)(`td`,{className:`border border-black p-2 align-top`,children:[(0,$.jsx)(`div`,{children:e.resultEval||e.result||`-`}),(0,$.jsxs)(`div`,{className:`font-bold mt-1`,children:[`(`,e.followUp,`)`]})]})]},t)}),f.length===0&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:`6`,className:`p-8 text-center text-slate-400 italic border border-black`,children:`Belum ada data jurnal pada bulan ini.`})})]})]}),(0,$.jsx)(sv,{settings:n,dateLabel:`${n.city||`...`}, ${new Date().toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})}`})]})]})}function rv({journals:e,students:t,settings:n}){let[r,i]=(0,l.useState)(``),[a,o]=(0,l.useState)(`portrait`),s=(0,l.useMemo)(()=>r?e.filter(e=>e.studentIds&&e.studentIds.includes(r)||e.studentId&&e.studentId===r).sort((e,t)=>e.date.localeCompare(t.date)):[],[r,e]),c=t.find(e=>e.id===r);return(0,$.jsxs)(`div`,{className:`animate-in fade-in`,children:[(0,$.jsx)(`style`,{children:`
        @media print {
          @page { size: ${a} auto; margin: 10mm; }
        }
      `}),(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-end mb-6 gap-4 print:hidden bg-slate-50 p-4 rounded-lg border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 w-full`,children:[(0,$.jsxs)(`div`,{className:`w-full sm:w-auto flex-1`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Cari Nama Siswa`}),(0,$.jsxs)(`select`,{className:`border p-2 rounded w-full bg-white text-sm`,value:r,onChange:e=>i(e.target.value),children:[(0,$.jsx)(`option`,{value:``,children:`-- Pilih Siswa --`}),t.sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,$.jsxs)(`option`,{value:e.id,children:[e.name,` (`,e.class,`)`]},e.id))]})]}),(0,$.jsxs)(`div`,{className:`w-full sm:w-auto`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Orientasi Kertas`}),(0,$.jsxs)(`select`,{className:`border p-2 rounded w-full sm:w-40 bg-white text-sm`,value:a,onChange:e=>o(e.target.value),children:[(0,$.jsx)(`option`,{value:`portrait`,children:`Portrait (Tegak)`}),(0,$.jsx)(`option`,{value:`landscape`,children:`Landscape (Mendatar)`})]})]})]}),(0,$.jsxs)(`button`,{disabled:!r,onClick:()=>window.print(),className:`bg-blue-600 disabled:bg-slate-300 text-white px-6 py-2 rounded flex items-center justify-center gap-2 hover:bg-blue-700 w-full sm:w-auto shadow-md font-bold transition-transform active:scale-95`,children:[(0,$.jsx)(g_,{size:18}),` CETAK REKAM JEJAK`]})]}),c?(0,$.jsxs)(`div`,{className:`print-area bg-white p-10 md:p-12 mx-auto transition-all duration-300 ${a===`landscape`?`max-w-[297mm] min-h-[210mm]`:`max-w-[210mm] min-h-[297mm]`} print:w-full print:max-w-none print:min-h-0`,children:[(0,$.jsx)(ov,{settings:n}),(0,$.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold underline uppercase`,children:`Laporan Perkembangan Peserta Didik`}),(0,$.jsx)(`p`,{className:`text-sm font-bold mt-1`,children:`REKAM JEJAK LAYANAN BK`})]}),(0,$.jsx)(`table`,{className:`w-full mb-4 text-sm font-bold`,children:(0,$.jsxs)(`tbody`,{children:[(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`w-32`,children:`Nama Siswa`}),(0,$.jsxs)(`td`,{children:[`: `,c.name]})]}),(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{children:`Kelas`}),(0,$.jsxs)(`td`,{children:[`: `,c.class]})]}),(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{children:`NISN`}),(0,$.jsxs)(`td`,{children:[`: `,c.nisn]})]})]})}),(0,$.jsxs)(`table`,{className:`w-full border-collapse border border-black text-xs md:text-sm`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{className:`bg-gray-100 text-center`,children:[(0,$.jsx)(`th`,{className:`border border-black p-2 w-8`,children:`No`}),(0,$.jsx)(`th`,{className:`border border-black p-2 w-24`,children:`Tanggal`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Jenis Layanan`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Topik / Masalah`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Tindak Lanjut / Hasil`})]})}),(0,$.jsxs)(`tbody`,{children:[s.map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`border border-black p-2 text-center align-top`,children:t+1}),(0,$.jsx)(`td`,{className:`border border-black p-2 align-top`,children:W_(e.date)}),(0,$.jsx)(`td`,{className:`border border-black p-2 align-top`,children:e.serviceType}),(0,$.jsx)(`td`,{className:`border border-black p-2 align-top text-justify`,children:e.description}),(0,$.jsxs)(`td`,{className:`border border-black p-2 align-top`,children:[e.resultEval||e.result||`-`,(0,$.jsxs)(`div`,{className:`font-bold text-[10px] mt-1`,children:[`(`,e.followUp,`)`]})]})]},t)),s.length===0&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:`5`,className:`text-center p-4 border border-black italic`,children:`Belum ada riwayat layanan untuk siswa ini.`})})]})]}),(0,$.jsx)(sv,{settings:n,dateLabel:`${n.city||`...`}, ${new Date().toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})}`})]}):(0,$.jsxs)(`div`,{className:`text-center p-12 bg-slate-50 border border-dashed border-slate-300 rounded-lg text-slate-400 print:hidden`,children:[(0,$.jsx)(k_,{size:48,className:`mx-auto mb-2 opacity-50`}),(0,$.jsx)(`p`,{children:`Silakan pilih siswa terlebih dahulu untuk melihat rekam jejak.`})]})]})}function iv({students:e,settings:t}){let[n,r]=(0,l.useState)(`portrait`),i={HIGH:1,MEDIUM:2,LOW:3},a=[...e].sort((e,t)=>{let n=i[e.riskLevel]||4,r=i[t.riskLevel]||4;return n===r?e.name.localeCompare(t.name):n-r});return(0,$.jsxs)(`div`,{className:`animate-in fade-in`,children:[(0,$.jsx)(`style`,{children:`
        @media print {
          @page { size: ${n} auto; margin: 10mm; }
        }
      `}),(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-end mb-6 gap-4 print:hidden bg-slate-50 p-4 rounded-lg border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`w-full sm:w-auto`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Orientasi Kertas`}),(0,$.jsxs)(`select`,{className:`border p-2 rounded w-full sm:w-40 bg-white text-sm`,value:n,onChange:e=>r(e.target.value),children:[(0,$.jsx)(`option`,{value:`portrait`,children:`Portrait (Tegak)`}),(0,$.jsx)(`option`,{value:`landscape`,children:`Landscape (Mendatar)`})]})]}),(0,$.jsxs)(`button`,{onClick:()=>window.print(),className:`bg-blue-600 text-white px-6 py-2 rounded flex items-center justify-center gap-2 hover:bg-blue-700 w-full sm:w-auto shadow-md font-bold transition-transform active:scale-95`,children:[(0,$.jsx)(g_,{size:18}),` CETAK PETA KERAWANAN`]})]}),(0,$.jsxs)(`div`,{className:`print-area bg-white p-10 md:p-12 mx-auto transition-all duration-300 ${n===`landscape`?`max-w-[297mm] min-h-[210mm]`:`max-w-[210mm] min-h-[297mm]`} print:w-full print:max-w-none print:min-h-0`,children:[(0,$.jsx)(ov,{settings:t}),(0,$.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold underline uppercase`,children:`PETA KERAWANAN SISWA`}),(0,$.jsxs)(`p`,{className:`mt-1`,children:[`Tahun Pelajaran: `,t?.academicYear||new Date().getFullYear()+`/`+(new Date().getFullYear()+1)]})]}),(0,$.jsxs)(`table`,{className:`w-full border-collapse border border-black text-xs md:text-sm`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{className:`bg-gray-100 text-center`,children:[(0,$.jsx)(`th`,{className:`border border-black p-2 w-8`,children:`No`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Nama Siswa`}),(0,$.jsx)(`th`,{className:`border border-black p-2 w-20`,children:`Kelas`}),(0,$.jsx)(`th`,{className:`border border-black p-2 w-32`,children:`Tingkat Kerawanan`}),(0,$.jsx)(`th`,{className:`border border-black p-2`,children:`Keterangan / Wali`})]})}),(0,$.jsxs)(`tbody`,{children:[a.map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`border border-black p-2 text-center`,children:t+1}),(0,$.jsx)(`td`,{className:`border border-black p-2 font-bold`,children:e.name}),(0,$.jsx)(`td`,{className:`border border-black p-2 text-center`,children:e.class}),(0,$.jsx)(`td`,{className:`border border-black p-2 text-center font-bold`,children:e.riskLevel===`HIGH`?`TINGGI`:e.riskLevel===`MEDIUM`?`SEDANG`:`RENDAH`}),(0,$.jsxs)(`td`,{className:`border border-black p-2`,children:[e.parent,` `,e.parentPhone?`(${e.parentPhone})`:``]})]},e.id)),a.length===0&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:`5`,className:`text-center p-4 border border-black italic`,children:`Belum ada data siswa.`})})]})]}),(0,$.jsx)(sv,{settings:t,dateLabel:`${t.city||`...`}, ${new Date().toLocaleDateString(`id-ID`,{day:`numeric`,month:`long`,year:`numeric`})}`})]})]})}function av({journals:e,students:t,settings:n}){let[r,i]=(0,l.useState)(``),[a,o]=(0,l.useState)(`portrait`),s=[...e].sort((e,t)=>t.date.localeCompare(e.date)),c=e.find(e=>e.id===r);return(0,$.jsxs)(`div`,{className:`animate-in fade-in`,children:[(0,$.jsx)(`style`,{children:`
        @media print {
          @page { size: ${a} auto; margin: 10mm; }
        }
      `}),(0,$.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-end mb-6 gap-4 print:hidden bg-slate-50 p-4 rounded-lg border border-slate-200`,children:[(0,$.jsxs)(`div`,{className:`flex-1 w-full`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Pilih Kegiatan Layanan`}),(0,$.jsxs)(`select`,{className:`border p-2 rounded w-full bg-white text-sm`,value:r,onChange:e=>i(e.target.value),children:[(0,$.jsx)(`option`,{value:``,children:`-- Pilih Kegiatan --`}),s.map(e=>(0,$.jsxs)(`option`,{value:e.id,children:[e.date,` - `,e.serviceType,` - `,e.studentName||`Banyak Siswa`]},e.id))]})]}),(0,$.jsxs)(`button`,{disabled:!c,onClick:()=>window.print(),className:`bg-blue-600 disabled:bg-slate-300 text-white px-6 py-2 rounded flex items-center justify-center gap-2 hover:bg-blue-700 w-full sm:w-auto shadow-md font-bold transition-transform active:scale-95`,children:[(0,$.jsx)(g_,{size:18}),` CETAK BUKTI FISIK`]})]}),c?(0,$.jsxs)(`div`,{className:`print-area bg-white p-10 md:p-12 mx-auto transition-all duration-300 ${a===`landscape`?`max-w-[297mm] min-h-[210mm]`:`max-w-[210mm] min-h-[297mm]`} print:w-full print:max-w-none print:min-h-0`,children:[(0,$.jsx)(ov,{settings:n}),(0,$.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,$.jsx)(`h3`,{className:`text-xl font-bold underline uppercase`,children:`LAPORAN PELAKSANAAN LAYANAN (LPL)`}),(0,$.jsx)(`p`,{className:`font-bold`,children:`BIMBINGAN DAN KONSELING`}),(0,$.jsxs)(`p`,{className:`mt-1 font-bold`,children:[`Semester: `,c.semester||`-`,` Tahun Ajaran: `,c.academicYear||`-`]})]}),(0,$.jsxs)(`div`,{className:`space-y-4 text-sm leading-relaxed`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-[200px_10px_1fr] gap-1`,children:[(0,$.jsx)(`div`,{className:`font-bold`,children:`1. Jenis Layanan`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsx)(`div`,{children:c.serviceType}),(0,$.jsx)(`div`,{className:`font-bold`,children:`2. Bidang Bimbingan`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsx)(`div`,{children:c.skkpd||`-`}),(0,$.jsx)(`div`,{className:`font-bold`,children:`3. Topik / Masalah`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsx)(`div`,{children:c.description}),(0,$.jsx)(`div`,{className:`font-bold`,children:`4. Sasaran / Konseli`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsx)(`div`,{children:c.studentNames?.join(`, `)||c.studentName}),(0,$.jsx)(`div`,{className:`font-bold`,children:`5. Hari / Tanggal`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsx)(`div`,{children:W_(c.date)}),(0,$.jsx)(`div`,{className:`font-bold`,children:`6. Waktu / Tempat`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsxs)(`div`,{children:[c.time||`-`,` / `,c.place||`-`]}),(0,$.jsx)(`div`,{className:`font-bold`,children:`7. Teknik Konseling`}),(0,$.jsx)(`div`,{children:`:`}),(0,$.jsx)(`div`,{children:c.technique||`-`})]}),(0,$.jsxs)(`div`,{className:`mt-6`,children:[(0,$.jsx)(`div`,{className:`font-bold mb-2`,children:`8. Hasil / Evaluasi:`}),(0,$.jsxs)(`div`,{className:`border border-black p-4 min-h-[100px] text-justify`,children:[(0,$.jsxs)(`p`,{className:`mb-2`,children:[(0,$.jsx)(`span`,{className:`font-bold`,children:`Proses:`}),` `,c.processEval||`-`]}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`span`,{className:`font-bold`,children:`Hasil:`}),` `,c.resultEval||c.result||`-`]})]})]}),(0,$.jsxs)(`div`,{className:`mt-4`,children:[(0,$.jsx)(`div`,{className:`font-bold mb-2`,children:`9. Tindak Lanjut:`}),(0,$.jsx)(`div`,{className:`border border-black p-4`,children:c.followUp})]})]}),(0,$.jsx)(sv,{settings:n,dateLabel:`${n.city||`...`}, ${W_(c.date)}`})]}):(0,$.jsxs)(`div`,{className:`text-center p-12 bg-slate-50 border border-dashed border-slate-300 rounded-lg text-slate-400 print:hidden`,children:[(0,$.jsx)(o_,{size:48,className:`mx-auto mb-2 opacity-50`}),(0,$.jsx)(`p`,{children:`Pilih salah satu kegiatan layanan untuk mencetak bukti fisik.`})]})]})}var ov=({settings:e})=>(0,$.jsxs)(`div`,{className:`flex items-center justify-between border-b-4 border-double border-black pb-4 mb-6`,children:[(0,$.jsx)(`div`,{className:`w-24 h-24 flex items-center justify-center`,children:e.logo?(0,$.jsx)(`img`,{src:e.logo,className:`w-full h-full object-contain`}):null}),(0,$.jsxs)(`div`,{className:`flex-1 text-center px-4`,children:[e.government&&(0,$.jsx)(`h3`,{className:`text-lg font-medium uppercase tracking-wide leading-tight`,children:e.government}),e.department&&(0,$.jsx)(`h3`,{className:`text-lg font-bold uppercase tracking-wide leading-tight`,children:e.department}),(0,$.jsx)(`h2`,{className:`text-2xl font-extrabold uppercase my-1`,children:e.name}),(0,$.jsx)(`p`,{className:`text-sm italic`,children:e.address})]}),(0,$.jsx)(`div`,{className:`w-24 h-24 flex items-center justify-center`,children:e.logo2?(0,$.jsx)(`img`,{src:e.logo2,className:`w-full h-full object-contain`}):null})]}),sv=({settings:e,dateLabel:t})=>(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-10 mt-12 text-center break-inside-avoid signature-section text-sm font-serif`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{children:`Mengetahui,`}),(0,$.jsx)(`p`,{children:`Kepala Sekolah`}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`p`,{className:`font-bold underline`,children:e?.headmaster||`......................`}),(0,$.jsxs)(`p`,{children:[`NIP. `,e?.nipHeadmaster||`......................`]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{children:t}),(0,$.jsx)(`p`,{children:`Guru BK / Konselor`}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`p`,{className:`font-bold underline`,children:e?.counselor||`......................`}),(0,$.jsxs)(`p`,{children:[`NIP. `,e?.nipCounselor||`......................`]})]})]}),cv=({settings:e,onSave:t})=>{let[n,r]=(0,l.useState)({...e});(0,l.useEffect)(()=>{e&&r(e)},[e]);let i=e=>r({...n,[e.target.name]:e.target.value}),a=(e,t)=>{let i=e.target.files[0];if(i){let e=new FileReader;e.onload=()=>r({...n,[t]:e.result}),e.readAsDataURL(i)}};return(0,$.jsx)(`div`,{className:`p-6 max-w-4xl mx-auto`,children:(0,$.jsxs)(`div`,{className:`bg-white p-8 rounded-xl shadow-sm border border-slate-200`,children:[(0,$.jsxs)(`h2`,{className:`text-xl font-bold mb-6 flex items-center gap-2`,children:[(0,$.jsx)(b_,{className:`text-blue-600`}),` Pengaturan Kop & Identitas`]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-8`,children:[(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-sm uppercase text-slate-400 border-b pb-2`,children:`Identitas Instansi`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`government`,value:n.government||``,onChange:i,placeholder:`Pemerintah Provinsi...`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`department`,value:n.department||``,onChange:i,placeholder:`Dinas Pendidikan...`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded font-bold`,name:`name`,value:n.name||``,onChange:i,placeholder:`Nama Sekolah...`}),(0,$.jsx)(`textarea`,{className:`w-full p-2 border rounded`,name:`address`,value:n.address||``,onChange:i,placeholder:`Alamat...`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`city`,value:n.city||``,onChange:i,placeholder:`Kota/Kab...`})]}),(0,$.jsxs)(`div`,{className:`space-y-4`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-sm uppercase text-slate-400 border-b pb-2`,children:`Logo Kop Surat`}),(0,$.jsxs)(`div`,{className:`flex gap-4`,children:[(0,$.jsxs)(`div`,{className:`flex-1 text-center border p-4 rounded bg-slate-50`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold mb-2`,children:`Logo Kiri`}),(0,$.jsx)(`div`,{className:`h-20 w-full flex items-center justify-center mb-2`,children:n.logo?(0,$.jsx)(`img`,{src:n.logo,className:`h-full object-contain`}):(0,$.jsx)(u_,{className:`text-slate-300`})}),(0,$.jsx)(`input`,{type:`file`,className:`text-xs w-full`,onChange:e=>a(e,`logo`)})]}),(0,$.jsxs)(`div`,{className:`flex-1 text-center border p-4 rounded bg-slate-50`,children:[(0,$.jsx)(`label`,{className:`block text-xs font-bold mb-2`,children:`Logo Kanan`}),(0,$.jsx)(`div`,{className:`h-20 w-full flex items-center justify-center mb-2`,children:n.logo2?(0,$.jsx)(`img`,{src:n.logo2,className:`h-full object-contain`}):(0,$.jsx)(`span`,{className:`text-xs text-slate-400`,children:`Opsional`})}),(0,$.jsx)(`input`,{type:`file`,className:`text-xs w-full`,onChange:e=>a(e,`logo2`)})]})]})]})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-8 mb-8`,children:[(0,$.jsxs)(`div`,{className:`space-y-3`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-sm uppercase text-slate-400 border-b pb-2`,children:`Kepala Sekolah`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`headmaster`,value:n.headmaster||``,onChange:i,placeholder:`Nama Kepala Sekolah`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`nipHeadmaster`,value:n.nipHeadmaster||``,onChange:i,placeholder:`NIP Kepala Sekolah`})]}),(0,$.jsxs)(`div`,{className:`space-y-3`,children:[(0,$.jsx)(`h3`,{className:`font-bold text-sm uppercase text-slate-400 border-b pb-2`,children:`Guru BK / Konselor`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`counselor`,value:n.counselor||``,onChange:i,placeholder:`Nama Guru BK`}),(0,$.jsx)(`input`,{className:`w-full p-2 border rounded`,name:`nipCounselor`,value:n.nipCounselor||``,onChange:i,placeholder:`NIP Guru BK`})]})]}),(0,$.jsxs)(`button`,{onClick:()=>t(n),className:`w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 flex justify-center items-center gap-2`,children:[(0,$.jsx)(v_,{size:18}),` Simpan Pengaturan`]})]})})},lv=({children:e,activeTab:t,setActiveTab:n,userRole:r,userName:i,onLogout:a})=>{let[o,s]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>{window.innerWidth>=768?s(!0):s(!1)};return e(),window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]);let c=r===`admin`?[{id:`dashboard`,label:`Dashboard`,icon:l_},{id:`users`,label:`Manajemen User`,icon:k_},{id:`account`,label:`Profil Admin`,icon:D_}]:[{id:`dashboard`,label:`Dashboard`,icon:l_},{id:`students`,label:`Data Siswa`,icon:k_},{id:`journal`,label:`Jurnal Harian`,icon:Zg},{id:`reports`,label:`Laporan & Cetak`,icon:g_},{id:`settings`,label:`Pengaturan Sekolah`,icon:b_},{id:`account`,label:`Edit Akun`,icon:D_}],u=e=>{n(e),window.innerWidth<768&&s(!1)};return(0,$.jsxs)(`div`,{className:`flex h-screen bg-slate-100 font-sans text-slate-800 overflow-hidden print:bg-white print:h-auto`,children:[o&&(0,$.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-40 md:hidden transition-opacity`,onClick:()=>s(!1)}),(0,$.jsxs)(`aside`,{className:`
                bg-slate-900 text-white flex flex-col 
                fixed inset-y-0 left-0 z-50 h-full w-64
                transform transition-transform duration-300 ease-in-out
                md:relative md:translate-x-0
                ${o?`translate-x-0`:`-translate-x-full md:w-20`}
                print:hidden
            `,children:[(0,$.jsxs)(`div`,{className:`p-4 border-b border-slate-700 flex items-center gap-3 h-16 justify-between md:justify-start`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsx)(`div`,{className:`w-8 h-8 bg-blue-600 rounded flex items-center justify-center font-bold flex-shrink-0`,children:`S`}),(o||window.innerWidth<768)&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`font-bold tracking-wider`,children:`SIBKO`}),(0,$.jsx)(`p`,{className:`text-[10px] text-slate-400 uppercase`,children:r===`admin`?`Super Admin`:`Guru BK`})]})]}),(0,$.jsx)(`button`,{onClick:()=>s(!1),className:`md:hidden text-slate-400 hover:text-white`,children:(0,$.jsx)(A_,{size:24})})]}),(0,$.jsx)(`nav`,{className:`flex-1 py-4 px-2 space-y-1 overflow-y-auto`,children:c.map(e=>(0,$.jsxs)(`button`,{onClick:()=>u(e.id),className:`w-full flex items-center p-3 rounded-lg transition-colors ${t===e.id?`bg-blue-600 text-white`:`text-slate-400 hover:bg-slate-800 hover:text-white`}`,title:o?``:e.label,children:[(0,$.jsx)(e.icon,{size:20,className:`flex-shrink-0`}),(o||window.innerWidth<768)&&(0,$.jsx)(`span`,{className:`ml-3 font-medium text-sm whitespace-nowrap`,children:e.label})]},e.id))}),(0,$.jsx)(`div`,{className:`p-4 border-t border-slate-800`,children:(0,$.jsxs)(`button`,{onClick:a,className:`w-full flex items-center ${o||window.innerWidth<768?`justify-start`:`justify-center`} text-red-400 hover:text-red-300 hover:bg-slate-800 p-2 rounded transition-all`,children:[(0,$.jsx)(p_,{size:20}),(o||window.innerWidth<768)&&(0,$.jsx)(`span`,{className:`ml-3 text-sm font-medium`,children:`Keluar`})]})})]}),(0,$.jsxs)(`main`,{className:`flex-1 flex flex-col h-screen overflow-hidden relative w-full`,children:[(0,$.jsxs)(`header`,{className:`bg-white shadow-sm h-16 flex items-center justify-between px-4 md:px-6 flex-shrink-0 print:hidden z-30`,children:[(0,$.jsx)(`button`,{onClick:()=>s(!o),className:`p-2 hover:bg-slate-100 rounded text-slate-500`,children:(0,$.jsx)(f_,{size:24})}),(0,$.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,$.jsxs)(`div`,{className:`text-right hidden md:block`,children:[(0,$.jsx)(`p`,{className:`text-sm font-bold text-slate-700`,children:i}),(0,$.jsx)(`p`,{className:`text-xs text-slate-500 capitalize`,children:r})]}),(0,$.jsx)(`div`,{className:`w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold text-sm`,children:i.charAt(0)})]})]}),(0,$.jsx)(`div`,{className:`flex-1 overflow-auto p-0 md:p-0 print:overflow-visible w-full relative`,children:e})]})]})};function uv(){let[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(null),[i,a]=(0,l.useState)(!0),[o,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(``),[d,f]=(0,l.useState)(`dashboard`),[p,m]=(0,l.useState)([]),[h,g]=(0,l.useState)([]),[_,v]=(0,l.useState)([]),[y,b]=(0,l.useState)({});(0,l.useEffect)(()=>{(async()=>{try{await Cm(N_)}catch(e){console.error(`Auth Error:`,e)}})();let e=jm(N_,e=>t(e));return()=>e()},[]),(0,l.useEffect)(()=>{if(!e)return;let t=Xd(Nd(U_(F_.users)),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));m(t),t.length===0&&Yd(U_(F_.users),I_),a(!1)},e=>{console.error(`User Listener Error:`,e)});return()=>t()},[e]),(0,l.useEffect)(()=>{if(!n||!e)return;let t=Xd(U_(F_.students),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));n.role===`guru`&&(t=t.filter(e=>e.teacherId===n.id)),g(t)},e=>console.error(`Students Listener Error`,e)),r=Xd(U_(F_.journals),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));n.role===`guru`&&(t=t.filter(e=>e.teacherId===n.id)),v(t)},e=>console.error(`Journals Listener Error`,e)),i=Xd(U_(F_.settings),e=>{b(e.docs.map(e=>({id:e.id,...e.data()})).find(e=>e.userId===n.id)||{})},e=>console.error(`Settings Listener Error`,e));return()=>{t(),r(),i()}},[n,e]);let x=(e,t)=>{s(!0),u(``),setTimeout(()=>{let n=p.find(n=>n.username===e&&n.password===t);n?n.accessExpiry&&new Date(n.accessExpiry)<new Date?u(`Masa aktif akun telah habis. Hubungi Admin.`):(r(n),f(`dashboard`)):u(`Username atau Password salah!`),s(!1)},800)},S=()=>{confirm(`Keluar dari aplikasi?`)&&(r(null),g([]),v([]))},ee=async e=>{try{await qd(Wu(U_(F_.users),e.id),{password:e.password,fullName:e.fullName}),r(t=>({...t,password:e.password,fullName:e.fullName})),alert(`Profil berhasil diperbarui.`)}catch(e){console.error(e),alert(`Gagal update profil.`)}};return i?(0,$.jsx)(`div`,{className:`h-screen flex items-center justify-center text-slate-500 bg-slate-50`,children:`Menghubungkan ke Server SIBKO...`}):n?(0,$.jsx)(lv,{activeTab:d,setActiveTab:f,userRole:n.role,userName:n.fullName,onLogout:S,children:n.role===`admin`?(0,$.jsxs)($.Fragment,{children:[d===`dashboard`&&(0,$.jsx)(Y_,{users:p,studentsCount:h.length,journalsCount:_.length}),d===`users`&&(0,$.jsx)(Z_,{users:p}),d===`account`&&(0,$.jsx)(Q_,{user:n,onUpdatePassword:ee})]}):(0,$.jsxs)($.Fragment,{children:[d===`dashboard`&&(0,$.jsx)(X_,{students:h,journals:_}),d===`students`&&(0,$.jsx)($_,{students:h,journals:_,onAdd:async e=>{await Yd(U_(F_.students),{...e,teacherId:n.id,createdAt:new Date().toISOString()})},onImport:async e=>{try{let t=$d(P_);e.forEach(e=>{let r=Wu(U_(F_.students));t.set(r,{...e,teacherId:n.id,createdAt:new Date().toISOString()})}),await t.commit(),alert(`Berhasil mengimpor ${e.length} data siswa!`)}catch(e){console.error(`Import Error:`,e),alert(`Gagal mengimpor data. Coba lagi.`)}},onMoveClass:async(e,t)=>{try{let n=$d(P_);e.forEach(e=>{let r=Wu(U_(F_.students),e);n.update(r,{class:t})}),await n.commit(),alert(`Berhasil memindahkan ${e.length} siswa ke kelas ${t}`)}catch(e){console.error(`Move Class Error:`,e),alert(`Gagal memindahkan kelas.`)}},onEdit:async e=>{let{id:t,...n}=e;await qd(Wu(U_(F_.students),t),n)},onDelete:async e=>{confirm(`Hapus siswa?`)&&await Jd(Wu(U_(F_.students),e))}}),d===`journal`&&(0,$.jsx)(ev,{students:h,journals:_,onAdd:async e=>{let t={...e,teacherId:n.id,createdAt:new Date,studentNames:Array.isArray(e.studentNames)?e.studentNames:[e.studentName]};await Yd(U_(F_.journals),t)},onUpdate:async e=>{try{let{id:t,...n}=e,r={...n,studentNames:Array.isArray(e.studentNames)?e.studentNames:[e.studentName],updatedAt:new Date().toISOString()};await qd(Wu(U_(F_.journals),t),r),alert(`Jurnal berhasil diperbarui.`)}catch(e){console.error(`Update Error:`,e),alert(`Gagal memperbarui jurnal.`)}},settings:y}),d===`reports`&&(0,$.jsx)(tv,{journals:_,students:h,settings:y}),d===`settings`&&(0,$.jsx)(cv,{settings:y,onSave:async e=>{y.id?await qd(Wu(U_(F_.settings),y.id),e):await Yd(U_(F_.settings),{...e,userId:n.id}),alert(`Pengaturan sekolah tersimpan.`)}}),d===`account`&&(0,$.jsx)(Q_,{user:n,onUpdatePassword:ee})]})}):(0,$.jsx)(J_,{onLogin:x,loading:o,error:c})}(0,c.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(l.StrictMode,{children:(0,$.jsx)(uv,{})}));